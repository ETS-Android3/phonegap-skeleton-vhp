(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t){e.exports={CLIENT:0,ADMIN:1}},130:function(e,t,a){},132:function(e,t){},194:function(e){e.exports={Username:"Nom d'utilisateur",Password:"Mot de passe","Login.Fail":"Nom d'utilisateur ou mot de passe incorrect",Connect:"Se connecter",Home:"Accueil",Categories:"Familles",Category:"Famille",Products:"Produits",Product:"Produit",Cart:"Panier",Search:"Rechercher...",Logout:"D\xe9connexion",Error:"Erreur",File:"Fichier","Start.Date":"Date de d\xe9but","End.Date":"Date de fin",Confirm:"Confirmer",Update:"Mettre \xe0 jour",Import:"Importer",Warning:"Avertissement",Ok:"Ok",Description:"Description",Format:"Format","Unit.Price":"Prix unitaire",VAT:"TVA",Quantity:"Quantit\xe9",Qty:"Qt\xe9","Excl.Tax":"HT","Incl.Tax":"TTC","Add.Cart":"Ajouter au panier","Cart.Add.Success":"Le produit suivant a bien \xe9t\xe9 ajout\xe9 au panier :",Designation:"D\xe9signation","Vending.unit":"Unit\xe9 de vente",Reference:"R\xe9f\xe9rence","Unit.Price.Excl.Tax":"PU HT","Unit.Price.Incl.Tax":"PU TTC",Total:"Total",Urgent:"Urgent",Actions:"Actions","Shipping.Cost":"Frais de livraison","Emergency.Cost":"Frais d'urgence","Total.Excl.Tax":"Total HT","Total.Incl.Tax":"Total TTC","Cart.Empty":"Vider le panier","Min.Shipping.Cost":"Frais de port offerts a partir de {cost}\u20ac","Min.Order.Cost":"Attention! Le montant total minimum requis pour valider une commande est de {cost}\u20ac","Empty.Cart.Confirm":"\xcates-vous s\xfbr(e) de vouloir supprimer tous les articles?",Cancel:"Annuler","Order.Pass":"Passer la commande","Order.Pass.Some":"Passer une commande",No:"Non",Yes:"Oui","Order.Confirm":"Confirmez-vous cette commande?",Comment:"Commentaire",Orders:"Commandes",Order:"Commande","Empty.Cart":"Votre panier est vide.","Empty.Orders":"Vous n'avez pass\xe9 aucune commande.",Date:"Date","Order.Status":"Statut","Order.Status.0":"Nouvelle","Order.Status.1":"En cours","Order.Status.2":"Envoy\xe9e","Order.Status.3":"Re\xe7ue","Order.Status.4":"Bloqu\xe9e","Empty.Families":"Il n'y a pas de produit pour le moment.","Product.Remove.Confirmation":"\xcates-vous s\xfbr(e) de vouloir supprimer l'article {designation}?","Order.Remove.Confirmation":"\xcates-vous s\xfbr(e) de vouloir supprimer la commande?","Export.PDF":"Exporter en PDF","Search.Family":"Chercher une famille...","Search.Product":"Chercher un produit...",Lang:"Langue","Lang.fr":"Fran\xe7ais","Lang.en":"English",Mercurials:"Mercuriales",Mercurial:"Mercuriale",Client:"Client",Clients:"Clients",Split:"Scinder","Choose.Client":"Choisissez un client",All:"Tous","Product.Available":"Produit disponible","Product.Unavailable":"Produit indisponible","Mercurials.Add.Some":"Ajouter une mercuriale","Empty.Mercurials":"Vous n'avez ajout\xe9 aucune mercuriale pour le moment.","Mercurials.Step.1":"Etape 1 : upload du fichier Excel",Name:"Nom","First.Name":"Pr\xe9nom",Version:"Version","Mercurials.Name.Of":"Nom de la mercuriale","Mercurials.Step.2":"Etape 2","Unsupported.File.Type":"Type de fichier non valide","Unsupported.File.Type.Ext":"Type de fichier non valide : {extension}","Drag.Drop":"Glissez & d\xe9posez un fichier ici","Drag.Drop.Multiple":"Glissez & d\xe9posez des fichiers ici",Select:"S\xe9lectionner","Mercurials.Step2.Desc":"Etape 2 : ordre des colonnes","Mercurials.Step2.Read.1st.Line":"Lecture de la premi\xe8re ligne de votre fichier","Mercurials.Step.3":"Etape 3","Mercurials.Already.Imported":"Une mercuriale avec ce nom existe d\xe9j\xe0","Mercurial.Remove.Confirmation":"\xcates-vous s\xfbr(e) de vouloir supprimer cette mercuriale?","Mercurial.File.Corrupt":"Le fichier est corrompu et ne peut pas \xeatre import\xe9. Veuillez v\xe9rifier qu'il ne contient aucune cellule vide et que les d\xe9finitions de produits sont exhaustives.","Mercurials.Import.Imgs":"Importer des images","Mercurials.Upload.Imgs":"Uploader les images de la mercuriale","Mercurials.Upload.Imgs.Rules":"Les images doivent avoir en nom la r\xe9f\xe9rence produit ou le nom de la famille en minuscule et sans espace","Mercurials.Upload.Imgs.Recommended.Dimensions":"Dimensions recommand\xe9es : 250px * 120px","Mercurials.Auto.Detect":"Activer la d\xe9tection automatique des colonnes","StartDate.Superior.EndDate":"La date de d\xe9but ne peut pas \xeatre apr\xe8s la date de fin","More.items":"{nbr} autre(s)","Mercurials.Missing.Items":"Familles & produits manquants","Mercurials.Missing.Families":"Familles manquantes","Mercurials.Missing.Products":"Produits manquants","Mercurials.Missing":"Il manque pour cette mercuriale","Mercurials.Missing.Family.Images":"image(s) de famille(s)","Mercurials.Missing.Product.Images":"image(s) de produit(s)","Mercurials.Invlid.Images":"image(s) non valide(s)","Mercurials.Download.Template":"Cliquez ici pour t\xe9l\xe9charger le template excel","Mercurials.Update":"Mettre \xe0 jour une mercuriale","Mercurials.Update.Upload":"Upload du nouveau fichier","Mercurials.Update.Upload.Info":"Vous \xeates sur le point de mettre votre mercuriale \xe0 jour. Cette op\xe9ration rendra la mercuriale initiale obsol\xe8te et la remplacera par la version \xe0 jour. Les commandes bas\xe9es sur la mercuriale initiale ne seront pas affect\xe9es.","Mercurials.Update.Warning.Title":"Conflits avec les paniers","Mercurials.Update.Warning.Content":"Nous vous recommandons d'effectuer cette modification apr\xe8s les heures d'utilisation de vos clients afin d'impacter leurs paniers le moins possible","Notification.Mercurial.Upd.Title":"Modification de la mercuriale","Notification.Mercurial.Upd.Content":"La mercuriale courante a \xe9t\xe9 supprim\xe9e ou mise \xe0 jour. Les produits de votre panier affect\xe9s ont \xe9t\xe9 retir\xe9s. Veuillez nous excuser pour la g\xeane occasionn\xe9e.","Unexpected.Error":"Erreur","Unexpected.Error.Expl":"Une erreur inattendue s'est produite. Vous allez \xeatre redirig\xe9(e) vers la page d'accueil du site.","Order.ToolTip.NoDuplicate":"Cette commande contient des produits d'une mercuriale obsol\xe8te et ne peut donc pas \xeatre dupliqu\xe9e","Mercurials.Delete.Warning.Content":"Cette op\xe9ration est d\xe9finitive. La mercuriale ainsi que tous ses produits seront supprim\xe9s. Cette op\xe9ration est fortement d\xe9conseill\xe9e si des clients se sont servis de cette mercuriale.",Settings:"Configuration",General:"G\xe9n\xe9ral",Emails:"Emails",API:"API","Shipping.Delay":"Dur\xe9e de livraison par d\xe9faut (en jours)","Min.Price":"Montant minimum par commande (en \u20ac)","Budget.Annual":"Budget annuel par d\xe9faut (en \u20ac)",Minimum:"Minimum",Maximum:"Maximum","Min.Max":"Min&nbsp;/&nbsp;Max","Shipping.Cost.Excl.Tax":"Co\xfbts de livraison (HT)",Infinity:"\u221e","Remove.Row.Confirmation":"\xcates-vous s\xfbr(e) de vouloir supprimer cette ligne?",Create:"Cr\xe9er",Modify:"Modifier","Settings.Urgent.Cost":"Frais d'urgence","Min.Greater.Max":"Le max n'est pas sup\xe9rieur au min","User.Add":"Ajouter un utilisateur","Empty.Users":"Vous n'avez ajout\xe9 aucun utilisateur.","Establishment.Add":"Ajouter un \xe9tablissement","Empty.Establishment":"Vous n'avez ajout\xe9 aucun \xe9tablissement.",Informations:"Informations","Conf.DM":"Configuration des DM",Users:"Utilisateurs",Establishment:"\xc9tablissement",Email:"Email",Phone:"T\xe9l\xe9phone",Address:"Adresse","Postal.Code":"Code postal",City:"Ville",Requests:"Demandes",Fleet:"Parc","Sales.Rep":"Commercial","Establishment.Name.Already.Exists":"Un \xe9tablissement avec ce nom existe d\xe9j\xe0","Address.Compl":"Compl\xe9ment d'adresse",Website:"Site web",Type:"Type",Add:"Ajouter","Create.Val":"Cr\xe9er '{val}'","No.Options":"Aucune option","Payment.Method":"Mode de r\xe8glement","Payments.Deadline":"\xc9ch\xe9ance de r\xe8glement","Creation.Date":"Date de cr\xe9ation","Add.Annual.Budget":"Ajouter un budget annuel","Modify.Annual.Budget":"Modifier un budget annuel","Annual.Budgets":"Budgets annuels",Year:"Ann\xe9e",Budget:"Budget","Must.Provide.Value":"Vous devez pr\xe9ciser une valeur","Must.Provide.Positive.Value":"La valeur doit \xeatre sup\xe9rieure \xe0 0","Add.User":"Ajouter un utilisateur","Modify.User":"Modifier un utilisateur",Function:"Fonction",Validator:"Validateur","Empty.Username":"Veuillez renseigner un nom d'utilisateur","Empty.Name":"Veuillez renseigner un nom","Empty.FirstName":"Veuillez renseigner un pr\xe9nom","Empty.Email":"Veuillez renseigner une adresse email","Invalid.Email":"Cette adresse email n'est pas valide","Username.Already.Exists":"Ce nom d'utilisateur est d\xe9j\xe0 pris","Email.Already.Exists":"Cet email est d\xe9j\xe0 pris","Types.Dm":"Types DM","Add.Material":"Ajouter un type de mat\xe9riel","Material.Type.Remove.Confirmation":"Etes-vous s\xfbr(e) de vouloir supprimer ce type de mat\xe9riel?","Material.Exist":"Ce type de mat\xe9riel existe d\xe9j\xe0","Add.Material.Fee":"Ajouter un tarif de type","Modify.Material.Fee":"Modifier un tarif de type","Maintenance.Fee":"Tarif maintenance","Long.Term.Fee":"Tarif location dur\xe9e","Daily.Fee":"Tarif journalier fixe","Total.Cmd.Excl.Tax":"Total Cdes HT","Residents.Management":"Gestion des r\xe9sidents","Empty.Residents":"Vous n'avez ajout\xe9 aucun r\xe9sident.","Resident.Add":"Ajouter un r\xe9sident","Resident.Already.Exists":"Un r\xe9sident avec ces nom & pr\xe9nom existe d\xe9j\xe0",Resident:"R\xe9sident","Delete.Resident":"Supprimer un r\xe9sident","Delete.Resident.Confirmation":"Etes-vous s\xfbr(e) de vouloir supprimer ce r\xe9sident?"}},195:function(e){e.exports={Username:"Username",Password:"Password","Login.Fail":"Failed login",Connect:"Connect",Home:"Home",Categories:"Categories",Category:"Category",Products:"Products",Product:"Product",Cart:"Cart",Search:"Search...",Logout:"Logout",Error:"Error",File:"File","Start.Date":"Start date","End.Date":"End date",Confirm:"Confirm",Update:"Update",Import:"Import",Warning:"Warning",Ok:"Ok",Description:"Description",Format:"Format","Unit.Price":"Unit price",VAT:"VAT",Quantity:"Quantity",Qty:"Qty","Excl.Tax":"Excl Tax","Incl.Tax":"Incl Tax","Add.Cart":"Add to cart","Cart.Add.Success":"The following product has successfully been added to the cart :",Designation:"Designation","Vending.unit":"Vending unit",Reference:"Reference","Unit.Price.Excl.Tax":"Unit Price Excl Tax","Unit.Price.Incl.Tax":"Unit Price Incl Tax",Total:"Total",Urgent:"Urgent",Actions:"Actions","Shipping.Cost":"Shipping costs","Emergency.Cost":"Emergency costs","Total.Excl.Tax":"Total (Excl Tax)","Total.Incl.Tax":"Total (Incl Tax)","Cart.Empty":"Empty cart","Min.Shipping.Cost":"Free shipping costs for {cost}\u20ac orders or more","Min.Order.Cost":"Warning! An order must be worth {cost}\u20ac or more to be validated","Empty.Cart.Confirm":"Are you sure you want to empty your cart from all articles?",Cancel:"Cancel","Order.Pass":"Pass the order","Order.Pass.Some":"Pass an order",No:"No",Yes:"Yes","Order.Confirm":"Are you sure you want to pass this order?",Comment:"Comment",Orders:"Orders",Order:"Order","Empty.Cart":"Your cart is empty.","Empty.Orders":"You have no order yet.",Date:"Date","Order.Status":"Status","Order.Status.0":"New","Order.Status.1":"Pending","Order.Status.2":"Sent","Order.Status.3":"Received","Order.Status.4":"Blocked","Empty.Families":"There are no products yet.","Product.Remove.Confirmation":"Are you sure you want to delete this product: {designation}?","Order.Remove.Confirmation":"Are you sure you want to delete this order?","Export.PDF":"Export to PDF","Search.Family":"Search for a family...","Search.Product":"Search for a product...",Lang:"Langage","Lang.fr":"Fran\xe7ais","Lang.en":"English",Mercurials:"Mercurials",Mercurial:"Mercurial",Client:"Client",Clients:"Clients",Split:"Split","Choose.Client":"Choose a client",All:"All","Product.Available":"Product available","Product.Unavailable":"Product unavailable","Mercurials.Add.Some":"Add a mercurial","Empty.Mercurials":"You have not added any mercurial yet.","Mercurials.Step.1":"Step 1 : upload the Excel file",Name:"Name","First.Name":"First name",Version:"Version","Mercurials.Name.Of":"Mercurial's name","Mercurials.Step.2":"Step 2","Unsupported.File.Type":"Unsupported file type","Unsupported.File.Type.Ext":"Unsupported file type : {extension}","Drag.Drop":"Drag & Drop a file here","Drag.Drop.Multiple":"Drag & Drop files here",Select:"Select","Mercurials.Step2.Desc":"Step 2 : columns' order","Mercurials.Step2.Read.1st.Line":"Reading of the first line of your file","Mercurials.Step.3":"Step 3","Mercurials.Already.Imported":"A mercurial with the same name already exists","Mercurial.Remove.Confirmation":"Are you sure you want to delete this mercurial?","Mercurial.File.Corrupt":"The file is corrupt and cannot be imported. Please make sure that it contains no empty cell and that products' definitions are exhaustive.","Mercurials.Import.Imgs":"Import images","Mercurials.Upload.Imgs":"Upload the mercurial's images","Mercurials.Upload.Imgs.Rules":"Images must be named after the product's reference or a family name, in lowercase and with no spaces","Mercurials.Upload.Imgs.Recommended.Dimensions":"Recommended dimensions : 250px * 120px","Mercurials.Auto.Detect":"Activate columns auto matching","StartDate.Superior.EndDate":"Start date cannot be after end date","More.items":"{nbr} more","Mercurials.Missing.Items":"Missing families & products","Mercurials.Missing.Families":"Missing families","Mercurials.Missing.Products":"Missing products","Mercurials.Missing":"For this mercurial the following are missing","Mercurials.Missing.Family.Images":"family image(s)","Mercurials.Missing.Product.Images":"product image(s)","Mercurials.Invlid.Images":"invalid image(s)","Mercurials.Download.Template":"Click here to download the excel template","Mercurials.Update":"Update a mercurial","Mercurials.Update.Upload":"Upload the new file","Mercurials.Update.Upload.Info":"You are about to update this mercurial. This operation will make the initial mercurial obsolete and will replace it with the updated version. Orders based upon the initial mercurial won't be impacted.","Mercurials.Update.Warning.Title":"Conflicts with carts","Mercurials.Update.Warning.Content":"We recommend that you do this operation after your clients' hours of use so that you have minimal impact on their carts selections","Notification.Mercurial.Upd.Title":"Mercurial update","Notification.Mercurial.Upd.Content":"The mercurial has been deleted or updated. Outdated products in your cart have been removed. We apologize for the inconvenience.","Unexpected.Error":"Error","Unexpected.Error.Expl":"An unexpected error happened. You will be redirected to the homepage.","Order.ToolTip.NoDuplicate":"This order contains products from an obsolete mercurial and cannot be duplicated","Mercurials.Delete.Warning.Content":"This operation is definitive and irrevocable. The mercurial and all its products will be deleted. We strongly advise against this operation if clients have used this mercurial.",Settings:"Settings",General:"General",Emails:"Emails",API:"API","Shipping.Delay":"Default shipping delay (days)","Min.Price":"Orders minimum amount (\u20ac)","Budget.Annual":"Default annual budget (\u20ac)",Minimum:"Minimum",Maximum:"Maximum","Min.Max":"Min&nbsp;/&nbsp;Max","Shipping.Cost.Excl.Tax":"Shipping costs (excl tax)",Infinity:"\u221e","Remove.Row.Confirmation":"Are you sure you want to delete this row?",Create:"Create",Modify:"Update","Settings.Urgent.Cost":"Urgent shipping cost","Min.Greater.Max":"Max must be greater than min","Establishment.Add":"Add an establishment","Empty.Establishment":"You have not added any establishment yet.","User.Add":"Add a user","Empty.Users":"You have not added any user yet.",Informations:"Informations","Conf.DM":"Materials configuration",Users:"Users",Establishment:"Establishment",Email:"Email",Phone:"Phone",Address:"Address","Postal.Code":"Postal Code",City:"City",Requests:"Requests",Fleet:"Fleet","Sales.Rep":"Sales Rep.","Establishment.Name.Already.Exists":"An establishment with this name already exists","Address.Compl":"Address complement",Website:"Website",Type:"Type",Add:"Add","Create.Val":"Create '{val}'","No.Options":"No options","Payment.Method":"Payment method","Payments.Deadline":"Payments deadline","Creation.Date":"Creation date","Add.Annual.Budget":"Add an annual budget","Modify.Annual.Budget":"Modify an annual budget","Annual.Budgets":"Annual budgets",Year:"Year",Budget:"Budget","Must.Provide.Value":"You must provide a value","Must.Provide.Positive.Value":"Value must be greater than 0","Add.User":"Add a user","Modify.User":"Modify a user",Function:"Function",Validator:"Validator","Empty.Username":"Please provide a username","Empty.Name":"Please provide a name","Empty.FirstName":"Please provide a first name","Empty.Email":"Please provide an email address","Invalid.Email":"This email address is not valid","Username.Already.Exists":"This username is already taken","Email.Already.Exists":"This email is already taken","Types.Dm":"Material types","Add.Material":"Add a type of material","Material.Type.Remove.Confirmation":"Are you sure you want to delete this material?","Material.Exist":"This material already exists","Add.Material.Fee":"Add a type fee","Modify.Material.Fee":"Modify a type fee","Maintenance.Fee":"Maintenance fee","Long.Term.Fee":"Long term fee","Daily.Fee":"Daily fee","Total.Cmd.Excl.Tax":"Total Cds Excl Tax","Residents.Management":"Residents management","Empty.Residents":"You have not added any resident yet.","Resident.Add":"Add a resident","Resident.Already.Exists":"A resident with such name & first name already exists",Resident:"Resident","Delete.Resident":"Delete a resident","Delete.Resident.Confirmation":"Are you sure you want to delete this resident?"}},199:function(e,t){},204:function(e,t){e.exports={MERCURIAL_DELETE_OR_UPDATE:0}},215:function(e,t,a){e.exports=a(499)},231:function(e,t){},237:function(e,t){},258:function(e,t,a){},264:function(e,t,a){},276:function(e,t){},277:function(e,t){},33:function(e,t){e.exports={NEW:0,PENDING:1,SENT:2,RECEIVED:3,BLOCKED:4}},494:function(e,t,a){},499:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(37),i=a.n(l),s=a(44),o=a(196),c=a(8),u=a(1);var m=Object(c.b)(function(e){return{locale:e.i18n.lang,messages:e.i18n.messages}})(u.c),d=a(3),p=a(4),h=a(6),f=a(5),b=a(7),E=a(502),v=a(504),g=a(501),y="http://51.75.200.191:4000",N={login:y+"/login",logout:y+"/logout",getUser:y+"/user",updateLang:y+"/user/lang/",checkIfUsernameExists:y+"/user/check/username/",checkIfEmailExists:y+"/user/check/email/",getProducts:y+"/product",getProductImg:y+"/product/img/",getFamilyImg:y+"/product/fam/img/",getManyProducts:y+"/product/many",getCart:y+"/cart",addProductToCart:y+"/cart/add",updateUrgent:y+"/cart/urgent",increaseQuantity:y+"/cart/inc",decreaseQuantity:y+"/cart/dec",deleteCartById:y+"/cart/delete",deleteAll:y+"/cart/delete/all",addOrder:y+"/order/add",getOrders:y+"/order",deleteOrder:y+"/order/delete",duplicate:y+"/order/duplicate",toPDF:y+"/pdf",getNotifs:y+"/notifs",deleteNotif:y+"/notifs/delete",getOrdersSettings:y+"/settings/orders",getResidents:y+"/resident",addResident:y+"/resident/add",checkIfResidentExists:y+"/resident/check",deleteResident:y+"/resident/delete/",getProductsAdmin:y+"/admin/product",getMercurials:y+"/admin/mercurial",addMercurial:y+"/admin/mercurial/add",deleteMercurial:y+"/admin/mercurial/delete",updateMercurial:y+"/admin/mercurial/update",addProductsImgs:y+"/admin/mercurial/imgs/products/",addFamilyImgs:y+"/admin/mercurial/imgs/families/",getMercImgOverview:y+"/admin/mercurial/img/overview/",addOrderAdmin:y+"/admin/order/add",getOrdersAdmin:y+"/admin/order",updateAdmin:y+"/admin/order/update",deleteOrderAdmin:y+"/admin/order/delete",splitOrderAdmin:y+"/admin/order/split",duplicateAdmin:y+"/admin/order/duplicate",getClients:y+"/admin/client",addClient:y+"/admin/client/add",updateClient:y+"/admin/client/update",addProductToCartAdmin:y+"/admin/cart/add",addEstablishment:y+"/admin/establishment/add",getEstablishments:y+"/admin/establishment",updateEstablishment:y+"/admin/establishment/update",getEstablishmentSettings:y+"/admin/establishmentsettings/",updateEstablishmentSettings:y+"/admin/establishmentsettings/update",getOrdersSettingsAdmin:y+"/admin/settings/orders",updateOrderSettingAdmin:y+"/admin/settings/orders/update",updateShippingCostsSetting:y+"/admin/settings/orders/shipping/update",getMaterialsTypes:y+"/admin/settings/materials/",addMaterialsType:y+"/admin/settings/materials/add",deleteMaterialType:y+"/admin/settings/materials/delete",getEstablishmentTypes:y+"/admin/establishmenttype",addEstablishmentType:y+"/admin/establishmenttype/add",getPaymentMethods:y+"/admin/paymentmethods",addPaymentMethod:y+"/admin/paymentmethods/add",getPaymentDeadlines:y+"/admin/paymentdeadlines",addPaymentDeadline:y+"/admin/paymentdeadlines/add"},C=a(9),k=a.n(C),O="LOGOUT";var M=function(e){return function(t){return k.a.get(N.logout).then(function(a){t({type:O}),e()}).catch(function(e){throw e})}},S=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),e.stopPropagation();var t=this;!function(){var e=document.getElementById("loginFail");e.classList.remove("d-block"),e.classList.add("d-none")}(),this.props.onLogin(e.target.username.value,e.target.password.value,function(){t.props.history.push("/home")},function(){var e=document.getElementById("loginFail");e.classList.remove("d-none"),e.classList.add("d-block")})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"jumbotron vertical-center no-bg p-0 m-0 bg-light-grey"},r.a.createElement("div",{className:"container p-5 mw-600 border border-dark bg-light"},r.a.createElement("a",{href:"/#",className:"nostyle-a"},r.a.createElement("h3",{className:"text-center text-success mb-3"},"E4COLL")),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement(u.b,{id:"Username"})),r.a.createElement("input",{type:"text",id:"username",name:"username",className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement(u.b,{id:"Password"})),r.a.createElement("input",{type:"password",className:"form-control",id:"pwd",name:"password"})),r.a.createElement("small",{id:"loginFail",className:"form-text text-danger mb-3 d-none"},r.a.createElement(u.b,{id:"Login.Fail"})),r.a.createElement("button",{type:"submit",className:"btn btn-success btn-block"},r.a.createElement(u.b,{id:"Connect"})))))}}]),t}(r.a.Component),x=Object(c.b)(function(e){return{lang:e.i18n.lang}},function(e){return{onLogin:function(t,a,n,r){return e(function(e,t,a,n){return function(r){return k.a.post(N.login,{username:e,password:t}).then(function(e){return a()}).catch(function(e){return n()})}}(t,a,n,r))}}})(S),j=(a(258),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={search:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"search",value:function(e){e.stopPropagation(),e.preventDefault(),this.setState({search:e.target.value})}},{key:"render",value:function(){var e=this;if(0===this.props.products.length)return r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},r.a.createElement(u.b,{id:"Empty.Families"}));var t={},a=!0,n=!1,l=void 0;try{for(var i,s=this.props.products[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value;t[o.famille]={mercurialId:o.mercurial_id,fam:o.fam}}}catch(d){n=!0,l=d}finally{try{a||null==s.return||s.return()}finally{if(n)throw l}}var c=Object.keys(t).map(function(a){if(e.state.search&&""!==e.state.search&&-1===a.toUpperCase().indexOf(e.state.search.toUpperCase()))return null;var n=N.getFamilyImg+t[a].mercurialId+"/"+t[a].fam.split(".")[0];return r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 mt-2 mb-2",key:a},r.a.createElement("a",{href:"#/home/products/"+encodeURI(a),className:"nostyle-a"},r.a.createElement("div",{className:"card hoverable h-200"},r.a.createElement("div",{className:"h-150"},r.a.createElement("img",{className:"card-img-top img-big d-block align-middle mx-auto",src:n,onError:function(e){e.target.onerror=null,e.target.src="/images/placeholder.png"},alt:""})),r.a.createElement("div",{className:"card-body famille-title bg-round-grey p-2"},r.a.createElement("h4",{className:"card-title text-center famille-title-txt"},a)))))}),m=this.props.intl.formatMessage({id:"Search.Family"});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mw-600 p-3 mx-auto"},r.a.createElement("input",{type:"search",className:"form-control",onChange:function(t){return e.search(t)},placeholder:m})),r.a.createElement("div",{className:"row"},c))}}]),t}(r.a.Component)),_=Object(c.b)(function(e){return{lang:e.i18n.lang,products:e.products,mercurials:e.mercurials}},function(e){return{}})(Object(u.e)(j)),w="GET_PANIER";var F=function(){return function(e){return k.a.get(N.getCart).then(function(t){var a;e((a=t.data,{type:w,cart:a}))}).catch(function(e){throw e})}},A=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"round",value:function(e){return Math.round(100*e)/100}}]),e}(),D=a(55),T=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"shallowClone",value:function(e){return Object(D.a)({},e)}},{key:"emptyString",value:function(e){return("string"===typeof e||e instanceof String)&&(!e||""===(""+e).replace(" ",""))}},{key:"emptyArray",value:function(e){return!e||0===e.length}},{key:"isEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}}]),e}(),P=a(200),I=a.n(P),U=function(){function e(){Object(d.a)(this,e),this.store=[]}return Object(p.a)(e,[{key:"add",value:function(e,t){this.store.push({product:e,quantity:t})}},{key:"reset",value:function(){this.store=[]}},{key:"totalHt",value:function(){var t=0,a=!0,n=!1,r=void 0;try{for(var l,i=this.store[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;t=A.round(t+e.priceHt(s.product)*s.quantity)}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t}},{key:"totalTtc",value:function(){var t=0,a=!0,n=!1,r=void 0;try{for(var l,i=this.store[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;t=A.round(t+e.priceTtc(s.product)*s.quantity)}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t}},{key:"totalTva",value:function(){var t=0,a=!0,n=!1,r=void 0;try{for(var l,i=this.store[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;t=A.round(t+A.round(e.priceHt(s.product)*e.tva(s.product))*s.quantity)}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t}}],[{key:"priceHt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return A.round(A.round(e.prix_u_ht_emera)*t)}},{key:"priceTtc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return A.round(A.round(this.priceHt(e)*(1+this.tva(e)))*t)}},{key:"tva",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return A.round(A.round(parseFloat(e.tva))*t)}}]),e}(),R=a(11),L=a.n(R),B=(a(260),a(262),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={_formatId:a.props.product._id,disableButton:!1,quantity:0},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"changeFormat",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({_formatId:e.target.value})}},{key:"changeQuantity",value:function(e){this.setState({quantity:e.target.value})}},{key:"add",value:function(e,t,a){var n=this;this.setState({disableButton:!0}),a||(a=document.getElementById("product-"+t._id).querySelector("#quantity").value);this.props.onAdd(e,this.state._formatId,a,function(){n.setState({disableButton:!1,quantity:0});var e=t.designation;"-"===e[e.length-1]&&(e=e.slice(0,e.length-2));var a="success";n.props.user.role===L.a.ADMIN&&(a="info"),new I.a({type:a,layout:"topRight",theme:"bootstrap-v4",text:n.props.intl.formatMessage({id:"Cart.Add.Success"})+" "+e,timeout:3e3}).show()})}},{key:"addMin",value:function(e,t){this.add(e,t,t.min_cde)}},{key:"getProduct",value:function(e){if(this.props.product._id===e)return this.props.product;var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.product.formats[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(i._id===e)return i}}catch(s){a=!0,n=s}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}}},{key:"getDesignation",value:function(e){return e.designation?0===e.designation.indexOf("-")?e.designation:e.designation.split("-")[0]:e.sous_famille}},{key:"render",value:function(){var e=this,t=this.getProduct(this.state._formatId),a=null;a=1===this.props.product.formats.length?r.a.createElement("div",null,this.props.product.formats[0].format):r.a.createElement("select",{className:"form-control",onChange:function(t){return e.changeFormat(t)},defaultValue:this.state._formatId},this.props.product.formats.map(function(e){return r.a.createElement("option",{key:e.format,value:e._id},e.format)}));var n="btn-success";return this.props.user.role===L.a.ADMIN&&(n="btn-primary"),r.a.createElement("tr",{key:this.props.product._id,id:"product-"+this.props.product._id},r.a.createElement("td",{className:"d-none d-lg-table-cell"},r.a.createElement("img",{className:"card-img-top product-img d-block mx-auto",src:N.getProductImg+this.props.product.mercurial_id+"/"+this.props.product.ref,onError:function(e){e.target.onerror=null,e.target.src="/images/placeholder_120x120.png"},alt:""})),r.a.createElement("td",{className:"product-desc"},r.a.createElement("div",{className:"product-sous-famille"},this.getDesignation(this.props.product)),r.a.createElement("div",{className:"product-caracteristiques"},this.props.product.caracteristiques)),r.a.createElement("td",null,r.a.createElement("div",null,a),r.a.createElement("div",{className:"product-ref"},"Ref: ",r.a.createElement("span",{className:"product-ref-value"},t.ref)),r.a.createElement("div",null,this.props.product.unite_de_vente),r.a.createElement("button",{type:"button",className:"btn "+n+" mt-2 rounded product-button d-md-none",disabled:this.state.disableButton,onClick:function(t){return e.addMin(t,e.props.product)}},r.a.createElement(u.b,{id:"Add.Cart"}))),r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("div",null,r.a.createElement(u.b,{id:"Excl.Tax"}),"\xa0: ",r.a.createElement("span",{className:"product-ht-value"},U.priceHt(t)),"\u20ac"),r.a.createElement("div",null,r.a.createElement(u.b,{id:"Incl.Tax"}),"\xa0: ",r.a.createElement("span",{className:"product-ttc-value"},U.priceTtc(t)),"\u20ac")),r.a.createElement("td",{className:"d-none d-lg-table-cell"},100*U.tva(this.props.product),"%"),r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("div",null,r.a.createElement(u.b,{id:"Quantity"}),"\xa0: "),r.a.createElement("div",null,r.a.createElement("input",{id:"quantity",type:"number",value:this.state.quantity,min:"0",step:this.props.product.min_cde,onChange:function(t){return e.changeQuantity(t,e.props.product)},className:"product-quantity-input"}))),r.a.createElement("td",{className:"va-middle d-none d-md-table-cell"},r.a.createElement("button",{type:"button",className:"btn "+n+" btn-lg btn-block rounded product-button",disabled:this.state.quantity<this.props.product.min_cde||this.state.disableButton,onClick:function(t){return e.add(t,e.props.product)}},r.a.createElement(u.b,{id:"Add.Cart"}))))}}]),t}(r.a.Component)),G=Object(c.b)(function(e){return{lang:e.i18n.lang,user:e.user}},function(e){return{}})(Object(u.e)(B)),V=(a(264),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={search:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"getFormat",value:function(e){if(!e.designation)return null;if(0===e.designation.indexOf("-"))return null;var t=e.designation.split("-");return t[t.length-1]}},{key:"equal",value:function(e,t){var a=e.designation.replace(this.getFormat(e),"").trim(),n=t.designation.replace(this.getFormat(t),"").trim();return e.famille===t.famille&&e.sous_famille===t.sous_famille&&e.caracteristiques===t.caracteristiques&&a===n}},{key:"parseProducts",value:function(e,t){var a=[],n=!0,r=!1,l=void 0;try{e:for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;if(o.famille===t){for(var c=T.shallowClone(o),u=0;u<a.length;u++){var m=a[u];if(this.equal(c,m))continue e}var d={},p=this.getFormat(c);d[p]={_id:o._id,format:p,ref:c.ref,prix_u_ht_emera:c.prix_u_ht_emera,tva:c.tva};var h=!0,f=!1,b=void 0;try{for(var E,v=e[Symbol.iterator]();!(h=(E=v.next()).done);h=!0){var g=E.value;if(this.equal(c,g)){var y=this.getFormat(g);d[y]||(d[y]={_id:g._id,format:y,ref:g.ref,prix_u_ht_emera:g.prix_u_ht_emera,tva:g.tva})}}}catch(N){f=!0,b=N}finally{try{h||null==v.return||v.return()}finally{if(f)throw b}}c.designation=c.designation.replace(p,""),c.formats=Object.values(d),a.push(c)}}}catch(N){r=!0,l=N}finally{try{n||null==s.return||s.return()}finally{if(r)throw l}}return a}},{key:"changeFormat",value:function(e,t){e.preventDefault(),e.stopPropagation();var a=!0,n=!1,r=void 0;try{for(var l,i=t.formats[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;if(s.format===e.target.value){var o=document.getElementById("product-"+t._id);return o.getElementsByClassName("product-ref-value")[0].innerHTML=s.ref,o.getElementsByClassName("product-ht-value")[0].innerHTML=A.round(s.prix_u_ht_emera),void(o.getElementsByClassName("product-ttc-value")[0].innerHTML=A.round(s.prix_u_ht_emera*(1+parseFloat(s.tva))))}}}catch(c){n=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"add",value:function(e,t,a,n){var r={id_product:t,quantity:a};this.props.user.role===L.a.ADMIN?this.props.onAddProductToCartAdmin(r,n):this.props.onAddProductToCart(r,n)}},{key:"search",value:function(e){e.stopPropagation(),e.preventDefault(),this.setState({search:e.target.value})}},{key:"render",value:function(){var e=this;if(0===this.props.products.length)return null;var t=this.props.match.params.famille,a=this.parseProducts(this.props.products,t).map(function(a){return a.famille!==t?null:e.state.search&&""!==e.state.search&&-1===a.sous_famille.toUpperCase().indexOf(e.state.search.toUpperCase())&&-1===a.caracteristiques.toUpperCase().indexOf(e.state.search.toUpperCase())?null:r.a.createElement(G,{product:a,key:a._id,onAdd:function(t,a,n,r){return e.add(t,a,n,r)}})}),n=this.props.intl.formatMessage({id:"Search.Product"});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",{className:"float-left p-2"},r.a.createElement("a",{href:"#/home/families",className:"d-inline-block align-top iconed-btn nostyle-a hoverable m-0"},r.a.createElement(u.b,{id:"Categories"})),r.a.createElement("div",{className:"d-inline-block align-top pr-2"},"/"),r.a.createElement("span",{className:"d-inline-block align-top iconed-btn m-0"},t)),r.a.createElement("div",{className:"mw-600 p-3 mx-auto"},r.a.createElement("input",{type:"search",className:"form-control",onChange:function(t){return e.search(t)},placeholder:n}))),r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Product"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Description"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Format"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Unit.Price"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"VAT"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Quantity"})),r.a.createElement("th",{className:"d-none d-md-table-cell"}))),r.a.createElement("tbody",null,a)))}}]),t}(r.a.Component)),q=Object(c.b)(function(e){return{user:e.user,products:e.products}},function(e){return{onAddProductToCart:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.addProductToCart,e).then(function(e){t(),a(F())}).catch(function(e){throw e})}}(t,a))},onAddProductToCartAdmin:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.addProductToCartAdmin,e).then(function(e){t(),a(F())}).catch(function(e){throw e})}}(t,a))}}})(Object(u.e)(V)),W=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"updateUrgent",value:function(e,t,a){var n={cartId:t,urgent:!a};this.props.onUpdateUrgent(n)}},{key:"increaseQuantity",value:function(e,t){var a={cartId:t};this.props.onIncreaseQuantity(a)}},{key:"decreaseQuantity",value:function(e,t){var a={cartId:t};this.props.onDecreaseQuantity(a)}},{key:"deleteCartById",value:function(e,t){var a={cartId:t};this.props.onDeleteCartById(a)}},{key:"render",value:function(){var e=this,t=r.a.createElement(u.b,{id:"Confirm"}),a=r.a.createElement(u.b,{id:"Product.Remove.Confirmation",values:{designation:this.props.product.designation}}),n=function(t){return e.deleteCartById(t,e.props.cart._id)},l="switch-bg-green";return this.props.user.role===L.a.ADMIN&&(l="switch-bg-blue"),r.a.createElement("tr",{key:this.props.cart._id},r.a.createElement("td",{className:"d-none d-lg-table-cell"},this.props.product.famille),r.a.createElement("td",null,this.props.product.designation),r.a.createElement("td",{className:"d-none d-md-table-cell"},this.props.product.unite_de_vente),r.a.createElement("td",{className:"d-none d-lg-table-cell"},this.props.product.ref),r.a.createElement("td",null,this.props.cart.quantity),r.a.createElement("td",{className:"d-none d-lg-table-cell"},U.priceHt(this.props.product),"\u20ac"),r.a.createElement("td",{className:"d-none d-md-table-cell"},U.priceTtc(this.props.product),"\u20ac"),r.a.createElement("td",{className:"d-none d-lg-table-cell"},U.priceHt(this.props.product,this.props.cart.quantity),"\u20ac"),r.a.createElement("td",null,U.priceTtc(this.props.product,this.props.cart.quantity),"\u20ac"),r.a.createElement("td",{className:"text-center card-body d-none d-md-table-cell"},r.a.createElement("div",{className:"custom-control custom-switch mx-auto switch-success"},r.a.createElement("input",{onChange:function(t){return e.updateUrgent(t,e.props.cart._id,e.props.cart.urgent)},type:"checkbox",className:"custom-control-input "+l,id:"switch"+this.props.product._id,checked:this.props.cart.urgent}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"switch"+this.props.product._id}))),r.a.createElement("td",{className:"text-center"},r.a.createElement("i",{onClick:function(t){return e.decreaseQuantity(t,e.props.cart._id)},className:"fa fa-minus-circle icon-big"}),r.a.createElement("i",{onClick:function(t){return e.increaseQuantity(t,e.props.cart._id)},className:"fa fa-plus-circle icon-big"}),r.a.createElement("i",{className:"fa fa-trash icon-big",onClick:function(r){return e.props.openConfModal(t,a,n)}})))}}]),t}(r.a.Component),H=Object(c.b)(function(e){return{user:e.user}},function(e){return{onUpdateUrgent:function(t){return e(function(e){return function(t){return k.a.post(N.updateUrgent,e).then(function(e){t(F())}).catch(function(e){throw e})}}(t))},onIncreaseQuantity:function(t){return e(function(e){return function(t){return k.a.post(N.increaseQuantity,e).then(function(e){t(F())}).catch(function(e){throw e})}}(t))},onDecreaseQuantity:function(t){return e(function(e){return function(t){return k.a.post(N.decreaseQuantity,e).then(function(e){t(F())}).catch(function(e){throw e})}}(t))},onDeleteCartById:function(t){return e(function(e){return function(t){return k.a.post(N.deleteCartById,e).then(function(e){t(F())}).catch(function(e){throw e})}}(t))}}})(W),Y=a(118),z=a.n(Y),Q=a(201),X=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={disabled:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"confirm",value:function(){var e=this,t=function(){var t=Object(Q.a)(z.a.mark(function t(){return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.successCallback();case 2:e.close();case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();this.setState({disabled:!0},t)}},{key:"stopEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this,t="btn-success";this.props.user.role===L.a.ADMIN&&(t="btn-primary");var a="";this.props.size&&(a="modal-"+this.props.size);var n=r.a.createElement(u.b,{id:"Confirm"});return this.props.title&&(n=this.props.title),r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog "+a,role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},n),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},this.props.content),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn "+t,onClick:function(){return e.confirm()},disabled:this.state.disabled},r.a.createElement(u.b,{id:"Confirm"})))))))}}]),t}(r.a.Component),K=Object(c.b)(function(e){return{user:e.user}},function(e){return{}})(X),J=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"confirm",value:function(){this.props.successCallback(),this.close()}},{key:"stopEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this,t="btn-success";return this.props.user.role===L.a.ADMIN&&(t="btn-primary"),r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},this.props.title),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("label",{htmlFor:"comment"},this.props.content," :"),r.a.createElement("div",null,r.a.createElement("textarea",{className:"form-control",type:"text",id:"comment",name:"comment"}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"No"})),r.a.createElement("button",{type:"button",className:"btn "+t,onClick:function(){return e.confirm()}},r.a.createElement(u.b,{id:"Yes"})))))))}}]),t}(r.a.Component),Z=Object(c.b)(function(e){return{user:e.user}},function(e){return{}})(J),$="GET_ORDERS";function ee(e){return{type:$,orders:e}}var te=function(){return function(e){return k.a.get(N.getOrders).then(function(t){e(ee(t.data))}).catch(function(e){throw e})}},ae=function(){return function(e){return k.a.get(N.getOrdersAdmin).then(function(t){e(ee(t.data))}).catch(function(e){throw e})}},ne=function(){function e(t,a){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;Object(d.a)(this,e),i||(i={urgent:!1,min_order_amount:0,shipping_costs:[{min:0,max:1/0,cost:0}]}),this.urgent_shipping_cost=i.urgent,this.min_cost_to_order=i.min_order_amount,this.settings=i,this.getProductsFn=l;var s=new U;this._urgent=!1,this.missingProducts=[],this.containsOldProducts=!1,this.containsMissingProducts=!1,t.map(function(e){e.urgent&&(n._urgent=!0);var t=n.getProduct(e.id_product,a);return t||(t=n.getOldProduct(e.id_product,r),n.containsOldProducts=!0),t?(s.add(t,e.quantity),null):(n.missingProducts.push(e),n.containsMissingProducts=!0,null)}),this.getOldProducts(this.missingProducts),this._totalHt=s.totalHt(),this._totalTtc=s.totalTtc(),this._totalTva=s.totalTva()}return Object(p.a)(e,[{key:"getProduct",value:function(e,t){var a=!0,n=!1,r=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;if(s._id===e)return s}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return null}},{key:"getOldProduct",value:function(e,t){var a=!0,n=!1,r=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;if(s._id===e)return s}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return null}},{key:"getOldProducts",value:function(e){if(0!==e.length){var t=[],a=!0,n=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value,o=s._id||s.id_product;t.push(o)}}catch(c){n=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}t.length>0&&this.getProductsFn&&this.getProductsFn({ids:t})}}},{key:"aboveMinToOrder",value:function(){var e=this._totalTtc;return this._urgent&&(e=A.round(e+this.urgent_shipping_cost)),e>this.min_cost_to_order}},{key:"freeShipping",value:function(){if(this.settings.shipping_costs.length>0){var e=this.settings.shipping_costs[this.settings.shipping_costs.length-1];if(!e.max&&0===e.cost)return this.getTotal(!0,!1)<e.min;if(e.max)return this.getTotal(!0,!1)<e.max}return!1}},{key:"getTotal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this._totalTtc;return e&&this._urgent&&(a=A.round(a+this.urgent_shipping_cost)),t&&a>this.settings.min_order_amount&&(a=A.round(a+this.shippingCost)),a}},{key:"totalHt",get:function(){return this._totalHt},set:function(e){}},{key:"totalTtc",get:function(){return this.getTotal(!0,!0)},set:function(e){}},{key:"totalTva",get:function(){return this._totalTva},set:function(e){}},{key:"urgent",get:function(){return this._urgent},set:function(e){}},{key:"shippingCost",get:function(){var e=this.getTotal(!0,!1),t=0;if(this.settings.shipping_costs.length>0){var a=!0,n=!1,r=void 0;try{for(var l,i=this.settings.shipping_costs[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;!s.max&&e>=s.min?t=s.cost:e>=s.min&&e<=s.max&&(t=s.cost)}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t}return t}}]),e}(),re=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"confirm",value:function(){this.props.successCallback(),this.close()}},{key:"stopEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props.clients.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.username)});return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},r.a.createElement(u.b,{id:"Order.Confirm"})),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("label",{htmlFor:"comment"},r.a.createElement(u.b,{id:"Choose.Client"})," :"),r.a.createElement("select",{id:"order-clientId",className:"form-control mb-3 w-100"},t),r.a.createElement("label",{htmlFor:"comment"},r.a.createElement(u.b,{id:"Comment"})," :"),r.a.createElement("div",null,r.a.createElement("textarea",{className:"form-control",type:"text",id:"comment",name:"comment"}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.confirm()},disabled:0===this.props.clients.length},r.a.createElement(u.b,{id:"Confirm"})))))))}}]),t}(r.a.Component),le=Object(c.b)(function(e){return{lang:e.i18n.lang,user:e.user,clients:e.clients}},function(e){return{}})(re),ie=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null,disableButton:!0},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"getProduct",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.products[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(i._id===e)return i}}catch(s){a=!0,n=s}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}return null}},{key:"passOrder",value:function(e){var t={comment:document.getElementById("comment").value};if(this.props.user.role===L.a.ADMIN){var a=document.getElementById("order-clientId").value;t.clientId=a,this.props.onPassOrderAdmin(t)}else this.props.onPassOrder(t)}},{key:"deleteAll",value:function(e){this.props.onDeleteAll()}},{key:"openConfModal",value:function(e,t,a){var n=this;this.setState({modal:r.a.createElement(K,{isOpen:!0,title:e,content:t,successCallback:a,closeModal:function(){return n.closeModal()}})})}},{key:"openOrderPromptModal",value:function(){var e=this;if(this.props.user.role===L.a.ADMIN)this.setState({modal:r.a.createElement(le,{isOpen:!0,successCallback:function(t){return e.passOrder()},closeModal:function(){return e.closeModal()}})});else{var t=r.a.createElement(u.b,{id:"Order.Confirm"}),a=r.a.createElement(u.b,{id:"Comment"});this.setState({modal:r.a.createElement(Z,{isOpen:!0,title:t,content:a,successCallback:function(t){return e.passOrder()},closeModal:function(){return e.closeModal()}})})}}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"render",value:function(){var e,t=this;if(0===this.props.ordersSettings.length&&0===this.props.ordersSettingsAdmin.length)return null;if(0!==this.props.ordersSettings.length&&(e=this.props.ordersSettings),0!==this.props.ordersSettingsAdmin.length&&(e=this.props.ordersSettingsAdmin),0===this.props.cart.length||0===this.props.products.length)return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#/home/families",className:"iconed-btn nostyle-a hoverable"},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-arrow-circle-left icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Categories"})))),r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},r.a.createElement(u.b,{id:"Empty.Cart"})));var a=new ne(this.props.cart,this.props.products,null,null,e),n=r.a.createElement(u.b,{id:"Confirm"}),l=r.a.createElement(u.b,{id:"Empty.Cart.Confirm"}),i=function(e){return t.deleteAll(e)},s=this.props.cart.map(function(e){var a=t.getProduct(e.id_product);return r.a.createElement(H,{key:e._id,cart:e,product:a,openConfModal:function(e,a,n){return t.openConfModal(e,a,n)}})}),o=null,c=null;if(a.aboveMinToOrder()||(o=r.a.createElement("div",{className:"alert alert-danger",role:"alert"},r.a.createElement(u.b,{id:"Min.Order.Cost",values:{cost:a.min_cost_to_order}}))),a.freeShipping()){var m=e.shipping_costs[e.shipping_costs.length-1].max,d=e.shipping_costs[e.shipping_costs.length-1].min;c=r.a.createElement("div",{className:"alert alert-info",role:"alert"},r.a.createElement(u.b,{id:"Min.Shipping.Cost",values:{cost:m||d}}))}var p="btn-success";return this.props.user.role===L.a.ADMIN&&(p="btn-primary"),r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#/home/families",className:"iconed-btn nostyle-a hoverable"},r.a.createElement("span",{className:"mt-3"},r.a.createElement("i",{className:"fa fa-arrow-circle-left icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Categories"})))),r.a.createElement("div",{className:"content"},this.state.modal,o,c,r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Category"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Designation"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Vending.unit"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Reference"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Qty"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Unit.Price.Excl.Tax"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Unit.Price.Incl.Tax"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Total"})," ",r.a.createElement(u.b,{id:"Excl.Tax"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Total"})," ",r.a.createElement(u.b,{id:"Incl.Tax"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Urgent"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})))),r.a.createElement("tbody",null,s)),r.a.createElement("div",{className:"card col-12 col-lg-6 offset-lg-6"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,a.aboveMinToOrder()&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(u.b,{id:"Shipping.Cost"}),"\xa0:"),r.a.createElement("td",null,r.a.createElement("b",null,a.shippingCost,"\u20ac"))),a.urgent&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(u.b,{id:"Emergency.Cost"})),r.a.createElement("td",null,r.a.createElement("b",null,a.urgent_shipping_cost,"\u20ac"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(u.b,{id:"Total.Excl.Tax"})),r.a.createElement("td",null,r.a.createElement("b",null,a.totalHt,"\u20ac"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(u.b,{id:"VAT"})),r.a.createElement("td",null,r.a.createElement("b",null,a.totalTva,"\u20ac"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(u.b,{id:"Total.Incl.Tax"})),r.a.createElement("td",null,r.a.createElement("b",null,a.totalTtc,"\u20ac"))))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-12 col-sm-6 mb-1"},r.a.createElement("button",{className:"btn btn-m "+p+" btn-block",onClick:function(e){return t.openConfModal(n,l,i)}},r.a.createElement(u.b,{id:"Cart.Empty"}))),r.a.createElement("div",{className:"col-12 col-sm-6"},r.a.createElement("button",{className:"btn btn-m "+p+" btn-block",onClick:function(e){return t.openOrderPromptModal()},disabled:!a.aboveMinToOrder()},r.a.createElement(u.b,{id:"Order.Pass"})))))))))}}]),t}(r.a.Component),se=Object(c.b)(function(e){return{lang:e.i18n.lang,cart:e.cart,products:e.products,user:e.user,ordersSettings:e.ordersSettings,ordersSettingsAdmin:e.ordersSettingsAdmin}},function(e){return{onDeleteAll:function(){return e(function(e){return k.a.post(N.deleteAll).then(function(t){e(F())}).catch(function(e){throw e})})},onPassOrder:function(t){return e(function(e){return function(t){return k.a.post(N.addOrder,e).then(function(e){t(F()),t(te())}).catch(function(e){throw e})}}(t))},onPassOrderAdmin:function(t){return e(function(e){return function(t){return k.a.post(N.addOrderAdmin,e).then(function(e){t(F()),t(ae())}).catch(function(e){throw e})}}(t))}}})(ie),oe=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"toPDF",value:function(e,t,a){var n={css:[],html:document.getElementById(e).innerHTML,zoom:"1",header:'\n                <div style="width: 90%; font-style: italic; font-size: 12px; text-align: right; margin: 0 auto; border-bottom: 1px solid;">\n                    {{page}}/{{pages}}\n                </div>',footer:'\n                <div style="font-size: 8px; width: 90%; margin: 0 auto; text-align: center; border-top: 1px solid;">\n                    <p style="color: black; font-style: italic; font-size: 12px; line-height: 0px; margin-top: 20px; width: 100%;">\n                        ENTREPRISE (Si\xe8ge) - 00 Rue de l\'Entreprise, 00000 Nom-de-la-commune - Tel : 00 00 00 00 00 - FAX : 00 00 00 00 00\n                    </p>\n                    <p style="color: black; font-style: italic; font-size: 12px; line-height: 0px; margin-top: 20px; width: 100%;">\n                        SAS au capital de 0 000 000,00 \u20ac - SIRET : 000 000 000 000 00 - Site : http://www.entreprise.com\n                    </p>\n                </div>'};!function(e,t){k.a.get(e).then(function(e){return n.css.push(e.data),t()}).catch(function(e){throw e})}("/css/pdf.css",function(){k.a.post(N.toPDF,n,{responseType:"arraybuffer"}).then(function(e){var n=new Blob([e.data],{type:"application/pdf"}),r=document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=t+".pdf",document.body.appendChild(r),r.click(),document.body.removeChild(r),a&&a()}).catch(function(e){throw e})})}}]),e}(),ce=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"toDate",value:function(e){var t=(e=new Date(e)).getDate(),a=e.getMonth()+1,n=e.getFullYear();return t<10&&(t="0".concat(t)),a<10&&(a="0".concat(a)),"".concat(t,"/").concat(a,"/").concat(n)}},{key:"toDateWithHour",value:function(e){var t=(e=new Date(e)).getDate(),a=e.getMonth()+1,n=e.getFullYear();t<10&&(t="0".concat(t)),a<10&&(a="0".concat(a));var r=e.getHours(),l=e.getMinutes();return l<10&&(l="0".concat(l)),"".concat(t,"/").concat(a,"/").concat(n," ").concat(r,":").concat(l)}}]),e}(),ue=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e="text-success";return this.props.user.role===L.a.ADMIN&&(e="text-info"),r.a.createElement("tr",{key:this.props.key,id:"product-"+this.props.product._id},r.a.createElement("td",{className:"d-none d-md-table-cell"},this.props.product.ref),r.a.createElement("td",null,this.props.product.designation," ",this.props.urgent&&r.a.createElement("i",{className:"fa fa-check "+e+" float-right"})),r.a.createElement("td",null,this.props.quantity),r.a.createElement("td",{className:"d-none d-md-table-cell"},U.priceHt(this.props.product),"\u20ac"),r.a.createElement("td",null,U.priceHt(this.props.product,this.props.quantity),"\u20ac"))}}]),t}(r.a.Component),me=Object(c.b)(function(e){return{user:e.user}},function(e){return{}})(ue),de=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"getProduct",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.products[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(i._id===e)return i}}catch(p){a=!0,n=p}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}var s=!0,o=!1,c=void 0;try{for(var u,m=this.props.oldProducts[Symbol.iterator]();!(s=(u=m.next()).done);s=!0){var d=u.value;if(d._id===e)return d}}catch(p){o=!0,c=p}finally{try{s||null==m.return||m.return()}finally{if(o)throw c}}}},{key:"render",value:function(){var e=this;if(0===this.props.products.length&&0===this.props.oldProducts.length)return null;var t=new U,a=0,n=this.props.order.products.map(function(n){var l=e.getProduct(n.id_product);return t.add(l,n.quantity),r.a.createElement(me,{key:++a+"-"+l._id,product:l,quantity:n.quantity,urgent:n.urgent})}),l=this.props.user.role===L.a.ADMIN?"alert-info":"alert-success",i=null;return this.props.order.comment&&""!==this.props.order.comment&&(i=r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"1000"},r.a.createElement("div",{className:"alert "+l+" mb-0 break-word",role:"alert"},r.a.createElement("b",null,r.a.createElement(u.b,{id:"Comment"}))," : ",this.props.order.comment)))),r.a.createElement("table",{className:"table table-striped table-bordered m-0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Reference"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Designation"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Quantity"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Unit.Price.Excl.Tax"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Total.Excl.Tax"})))),r.a.createElement("tbody",null,n,i))}}]),t}(r.a.Component),pe=Object(c.b)(function(e){return{products:e.products,oldProducts:e.oldProducts,lang:e.i18n.lang,user:e.user}},function(e){return{}})(de),he=a(503),fe=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e;e=this.props.user.role===L.a.ADMIN?this.props.ordersSettingsAdmin:this.props.ordersSettings;var t=new ne(this.props.order.products,this.props.products,this.props.oldProducts,null,e),a="green";return this.props.user.role===L.a.ADMIN&&(a="blue"),r.a.createElement("div",{id:this.props.id,className:"pdf-container"},r.a.createElement("div",{className:"pdf"},r.a.createElement("div",null,r.a.createElement("div",{className:"w-50-perc in-block"},r.a.createElement("div",{className:"e4coll-logo"})),r.a.createElement("div",{className:"w-50-perc in-block"},r.a.createElement("div",{className:"stamp "+a+"-bg"},"COMMANDE N\xb0",this.props.order.ref," du ",ce.toDate(this.props.order.creation_date)))),r.a.createElement("div",null,r.a.createElement("div",{className:"w-50-perc in-block"},r.a.createElement("div",{className:"contacts"},r.a.createElement("h1",null,"Responsable Commercial"),r.a.createElement("p",null,"Pr\xe9nom NOM"),r.a.createElement("p",null,"Tel : 06.00.00.00.00"),r.a.createElement("p",null,"Email : nom.prenom@domain.com"),r.a.createElement("h1",null,"Administration des ventes"),r.a.createElement("p",null,"Pr\xe9nom NOM"),r.a.createElement("p",null,"Tel : 06.00.00.00.00"),r.a.createElement("p",null,"Email : nom.prenom@domain.com"))),r.a.createElement("div",{className:"w-50-perc in-block"},r.a.createElement("div",{className:"address text-left"},r.a.createElement("p",null,"ADRESSE DE L'ETABLISSEMENT"),r.a.createElement("p",{className:"mention"},"Ordere pass\xe9e par Nom Pr\xe9nom"),r.a.createElement("br",null),r.a.createElement("p",null,"00 RUE DE L'ETABLISSEMENT"),r.a.createElement("p",null,"0000 VILLE")))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:a+"-table"},r.a.createElement(pe,{order:this.props.order})),r.a.createElement("div",{className:"fl-fix"},r.a.createElement("div",{className:"fl-right"},r.a.createElement("div",{className:"summary"},r.a.createElement("table",{className:a+"-bg"},r.a.createElement("tbody",null,t.aboveMinToOrder()&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(u.b,{id:"Shipping.Cost"}),"\xa0:"),r.a.createElement("td",null,r.a.createElement("b",null,t.shippingCost,"\u20ac"))),t.urgent&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(u.b,{id:"Emergency.Cost"})),r.a.createElement("td",null,r.a.createElement("b",null,t.urgent_shipping_cost,"\u20ac"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(u.b,{id:"Total.Excl.Tax"})),r.a.createElement("td",null,r.a.createElement("b",null,t.totalHt,"\u20ac"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(u.b,{id:"VAT"})),r.a.createElement("td",null,r.a.createElement("b",null,t.totalTva,"\u20ac"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(u.b,{id:"Total.Incl.Tax"})),r.a.createElement("td",null,r.a.createElement("b",null,t.totalTtc,"\u20ac")))))),r.a.createElement("div",{className:"contacts"},r.a.createElement("p",null,"Dur\xe9e de livraison: ",e.shipping_delay," jours"),r.a.createElement("p",null,"Moyens de paiment: Ch\xe8que"))))))}}]),t}(r.a.Component),be=Object(c.b)(function(e){return{lang:e.i18n.lang,user:e.user,ordersSettings:e.ordersSettings,ordersSettingsAdmin:e.ordersSettingsAdmin}},function(e){return{}})(fe),Ee=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={open:!0},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({open:!1})}},{key:"render",value:function(){var e=this;if(!this.props.open)return r.a.createElement("div",{style:{position:"absolute",marginLeft:"-10000px"}},this.props.template);var t="pdf-overview-green-btn";return this.props.user.role===L.a.ADMIN&&(t="pdf-overview-blue-btn"),r.a.createElement("div",{className:"pdf-overview-bg",onClick:function(t){return e.props.toggle(t)}},r.a.createElement("button",{className:"pdf-overview-export-button "+t,onClick:function(t){return oe.toPDF(e.props.template.props.id,e.props.fileName)}},r.a.createElement(u.b,{id:"Export.PDF"})),r.a.createElement("div",{className:"pdf-overview"},this.props.template))}}]),t}(r.a.Component),ve=Object(c.b)(function(e){return{lang:e.i18n.lang,user:e.user}},function(e){return{}})(Ee),ge=a(33),ye=a.n(ge),Ne="GET_OLD_PRODUCTS";var Ce={},ke=function(e){return function(t){var a=function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;Ce[s]||(t.push(s),Ce[s]=!0)}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t}(e.ids);if(0!==a.length)return k.a.post(N.getManyProducts,{ids:a}).then(function(e){var a;t((a=e.data,{type:Ne,oldProducts:a}))}).catch(function(e){throw e})}},Oe=(a(88),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={collapsed:!1,displayPDF:!1,disableExport:!1},a.alreadySent={},a.outdated=!1,a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"collapse",value:function(e){var t=document.getElementById(e);t.classList.contains("table-hidden")?(this.setState({collapsed:!0}),t.classList.remove("table-hidden"),t.classList.add("table-visible-green")):(this.setState({collapsed:!1}),t.classList.remove("table-visible-green"),t.classList.add("table-hidden"))}},{key:"deleteOrder",value:function(e,t,a){var n={orderId:t};this.props.onDeleteOrder(n)}},{key:"hasUrgent",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=e[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){if(r.value.urgent)return!0}}catch(i){a=!0,n=i}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}return!1}},{key:"canPDF",value:function(e){return e.status===ye.a.PENDING||e.status===ye.a.SENT||e.status===ye.a.RECEIVED}},{key:"togglePDF",value:function(e,t){!this.state.disableExport&&this.canPDF(this.props.order)&&this.setState({displayPDF:!this.state.displayPDF})}},{key:"render",value:function(){var e=this,t=this.props.order,a=new ne(t.products,this.props.products,this.props.oldProducts,function(t){return e.props.onGetOldProducts(t)}),n=a.containsMissingProducts,l=a.containsOldProducts,i=r.a.createElement(u.b,{id:"Confirm"}),s=r.a.createElement(u.b,{id:"Order.Remove.Confirmation"}),o=function(t){return e.deleteOrder(t,e.props.order._id)},c="order-pdf-"+this.props.order._id,m="order-"+this.props.order._id,d=null;n||(d=r.a.createElement(be,{id:c,order:this.props.order,products:this.props.products,oldProducts:this.props.oldProducts}));var p="text-success";return this.props.user.role===L.a.ADMIN&&(p="text-info"),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:this.props.order._id,className:n?"order-tr font-italic text-muted":"order-tr"},r.a.createElement("td",{className:"d-none d-md-table-cell mw-200 break-word align-middle"},this.props.order.ref,this.props.order.comment&&""!==this.props.comment&&r.a.createElement("i",{className:"fa fa-commenting-o icon-big float-right",disabled:!0})),r.a.createElement("td",{className:"align-middle"},ce.toDateWithHour(this.props.order.creation_date)),r.a.createElement("td",{className:"d-none d-lg-table-cell align-middle"},a.totalHt,"\u20ac"),r.a.createElement("td",{className:"align-middle"},a.totalTtc,"\u20ac"),r.a.createElement("td",{className:"align-middle"},r.a.createElement(u.b,{id:"Order.Status."+this.props.order.status})),r.a.createElement("td",{className:"text-center align-middle"},r.a.createElement("i",{className:"fa fa-sort-down icon-big "+(this.state.collapsed?"flip-ver":""),onClick:function(t){n||e.collapse("prods-"+e.props.order._id)},disabled:n}),r.a.createElement("i",{className:"fa fa-trash icon-big",onClick:function(t){n||e.props.openConfModal(i,s,o)},disabled:n}),r.a.createElement("i",{className:"fa fa-file-pdf-o icon-big",onClick:function(t){n||e.togglePDF(c,m)},disabled:this.state.disableExport||!this.canPDF(this.props.order)||n}),r.a.createElement(ve,{open:this.state.displayPDF,toggle:function(t,a){n||e.togglePDF(t,a)},template:d,fileName:m,disabled:n}),r.a.createElement("i",{id:"duplicate-btn"+this.props.order._id,className:"fa fa-files-o icon-big",onClick:function(t){n||l||e.props.onDuplicate({orderId:e.props.order._id})},disabled:n||l}),l&&!n&&r.a.createElement(he.a,{placement:"top",target:"duplicate-btn"+this.props.order._id},r.a.createElement(u.b,{id:"Order.ToolTip.NoDuplicate"}))),r.a.createElement("td",{className:"text-center d-none d-lg-table-cell align-middle"},!n&&this.hasUrgent(this.props.order.products)?r.a.createElement("i",{className:"fa fa-check icon-big "+p+" static"}):r.a.createElement("i",{className:"fa fa-close icon-big text-muted op-3 static"}))),r.a.createElement("tr",{id:"prods-"+this.props.order._id,className:"table-hidden"},r.a.createElement("td",{colSpan:"1000",className:"p-1"},!n&&r.a.createElement(pe,{order:this.props.order}))))}}]),t}(r.a.Component)),Me=Object(c.b)(function(e){return{user:e.user,oldProducts:e.oldProducts}},function(e){return{onDeleteOrder:function(t){return e(function(e){return function(t){return k.a.post(N.deleteOrder,e).then(function(e){t(te())}).catch(function(e){throw e})}}(t))},onDuplicate:function(t){return e(function(e){return function(t){return k.a.post(N.duplicate,e).then(function(e){t(te())}).catch(function(e){throw e})}}(t))},onGetOldProducts:function(t){return e(ke(t))}}})(Oe),Se=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null,referenceFilter:null,dateFilter:null,statusFilter:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openConfModal",value:function(e,t,a){var n=this;this.setState({modal:r.a.createElement(K,{isOpen:!0,title:e,content:t,successCallback:a,closeModal:function(){return n.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"sortByDateDesc",value:function(e,t){return e.creation_date>t.creation_date?-1:e.creation_date<t.creation_date?1:0}},{key:"render",value:function(){var e=this;if(0===this.props.orders.length)return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#/home/families",className:"iconed-btn nostyle-a hoverable"},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Order.Pass.Some"})))),r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},r.a.createElement(u.b,{id:"Empty.Orders"})));var t=this.props.orders.sort(this.sortByDateDesc).map(function(t){return e.state.referenceFilter&&""!==e.state.referenceFilter&&-1===t.ref.indexOf(e.state.referenceFilter)?null:e.state.dateFilter&&""!==e.state.dateFilter&&new Date(t.creation_date)<new Date(e.state.dateFilter)?null:e.state.statusFilter&&""!==e.state.statusFilter&&t.status!==Number(e.state.statusFilter)?null:r.a.createElement(Me,{key:t._id,order:t,products:e.props.products,openConfModal:function(t,a,n){return e.openConfModal(t,a,n)}})}),a=Object.values(ye.a).map(function(t){return r.a.createElement("option",{key:t,value:t},e.props.intl.formatMessage({id:"Order.Status."+t}))});return r.a.createElement(r.a.Fragment,null,this.state.modal,r.a.createElement("a",{href:"#/home/families",className:"iconed-btn nostyle-a hoverable"},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Order.Pass.Some"})))),r.a.createElement("table",{className:"table table-striped-3 table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Reference"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Date"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Total"})," ",r.a.createElement(u.b,{id:"Excl.Tax"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Total"})," ",r.a.createElement(u.b,{id:"Incl.Tax"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Order.Status"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Urgent"})))),r.a.createElement("tbody",null,r.a.createElement("tr",{className:"d-none d-xl-table-row filter-row"},r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("input",{className:"form-control",type:"search",onChange:function(t){e.setState({referenceFilter:t.target.value})}})),r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("input",{className:"form-control",type:"date",onChange:function(t){e.setState({dateFilter:t.target.value})}})),r.a.createElement("td",{className:"d-none d-lg-table-cell"}),r.a.createElement("td",{className:"d-none d-md-table-cell"}),r.a.createElement("td",null,r.a.createElement("select",{id:"order-filter-status",className:"form-control w-100",onChange:function(t){e.setState({statusFilter:t.target.value})}},r.a.createElement("option",{value:""},this.props.intl.formatMessage({id:"All"})),a)),r.a.createElement("td",null),r.a.createElement("td",{className:"d-none d-lg-table-cell"})),t)))}}]),t}(r.a.Component),xe=Object(c.b)(function(e){return{lang:e.i18n.lang,orders:e.orders,products:e.products}},function(e){return{}})(Object(u.e)(Se)),je=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={collapsed:!1,displayPDF:!1,disableExport:!1},a.alreadySent={},a.outdated=!1,a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"collapse",value:function(e){var t=document.getElementById(e);t.classList.contains("table-hidden")?(this.setState({collapsed:!0}),t.classList.remove("table-hidden"),t.classList.add("table-visible-blue")):(this.setState({collapsed:!1}),t.classList.remove("table-visible-blue"),t.classList.add("table-hidden"))}},{key:"deleteOrderAdmin",value:function(e,t){var a={orderId:t};this.props.onDeleteOrderAdmin(a)}},{key:"togglePDF",value:function(e,t){this.state.disableExport||this.setState({displayPDF:!this.state.displayPDF})}},{key:"updateStatus",value:function(e,t){var a={updatedValue:e.target.value,updatedField:"status",orderId:t._id};this.props.onUpdateAdmin(a)}},{key:"render",value:function(){var e=this;if(!this.props.clientName)return null;var t=this.props.order,a=new ne(t.products,this.props.products,this.props.oldProducts,function(t){return e.props.onGetOldProducts(t)}),n=a.containsMissingProducts,l=a.containsOldProducts,i=r.a.createElement(u.b,{id:"Confirm"}),s=r.a.createElement(u.b,{id:"Order.Remove.Confirmation"}),o=function(t){return e.deleteOrderAdmin(t,e.props.order._id)},c="order-pdf-"+this.props.order._id,m="order-"+this.props.order._id,d=null;n||(d=r.a.createElement(be,{id:c,order:this.props.order,products:this.props.products,oldProducts:this.props.oldProducts}));var p=Object.values(ye.a).map(function(t){return r.a.createElement("option",{key:t,value:t},e.props.intl.formatMessage({id:"Order.Status."+t}))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:this.props.order._id,className:n?"font-italic text-muted break-word":"break-word"},r.a.createElement("td",{className:"align-middle"},this.props.clientName,r.a.createElement("div",{className:"d-md-none text-muted mt-2"},r.a.createElement(u.b,{id:"Total"})," ",r.a.createElement(u.b,{id:"Incl.Tax"}),"\xa0: ",a.totalTtc,"\u20ac")),r.a.createElement("td",{className:"d-none d-md-table-cell mw-200 align-middle"},this.props.order.ref,this.props.order.comment&&""!==this.props.comment&&r.a.createElement("i",{className:"fa fa-commenting-o icon-big float-right",disabled:!0})),r.a.createElement("td",{className:"d-none d-md-table-cell align-middle"},ce.toDateWithHour(this.props.order.creation_date)),r.a.createElement("td",{className:"d-none d-lg-table-cell align-middle"},a.totalHt,"\u20ac"),r.a.createElement("td",{className:"d-none d-md-table-cell align-middle"},a.totalTtc,"\u20ac"),r.a.createElement("td",null,r.a.createElement("select",{className:"form-control",onChange:function(t){return e.updateStatus(t,e.props.order)},defaultValue:this.props.order.status,disabled:n},p)),r.a.createElement("td",{className:"text-center align-middle"},r.a.createElement("i",{className:"fa fa-sort-down icon-big "+(this.state.collapsed?"flip-ver":""),onClick:function(t){n||e.collapse("prods-"+e.props.order._id)},disabled:n}),r.a.createElement("i",{className:"fa fa-trash icon-big",onClick:function(t){n||e.props.openConfModal(i,s,o)},disabled:n}),r.a.createElement("i",{className:"fa fa-cut icon-big",onClick:function(a){n||e.props.openSplitModal(t)},disabled:n}),r.a.createElement("i",{className:"fa fa-file-pdf-o icon-big",onClick:function(t){n||e.togglePDF(c,m)},disabled:this.state.disableExport||n}),r.a.createElement(ve,{open:this.state.displayPDF,toggle:function(t,a){n||e.togglePDF(t,a)},template:d,fileName:m}),r.a.createElement("i",{id:"duplicate-btn"+this.props.order._id,className:"fa fa-files-o icon-big",onClick:function(a){n||l||e.props.onDuplicateAdmin({orderId:t._id})},disabled:n||l}),l&&!n&&r.a.createElement(he.a,{placement:"top",target:"duplicate-btn"+this.props.order._id},r.a.createElement(u.b,{id:"Order.ToolTip.NoDuplicate"}))),r.a.createElement("td",{className:"text-center d-none d-lg-table-cell align-middle"},!n&&a.urgent?r.a.createElement("i",{className:"fa fa-check icon-big text-info static"}):r.a.createElement("i",{className:"fa fa-close icon-big text-muted op-3 static"}))),r.a.createElement("tr",{id:"prods-"+this.props.order._id,className:"table-hidden"},r.a.createElement("td",{colSpan:"1000",className:"p-1"},!n&&r.a.createElement(pe,{order:this.props.order}))))}}]),t}(r.a.Component),_e=Object(c.b)(function(e){return{lang:e.i18n.lang,user:e.user,oldProducts:e.oldProducts}},function(e){return{onDeleteOrderAdmin:function(t){return e(function(e){return function(t){return k.a.post(N.deleteOrderAdmin,e).then(function(e){t(ae())}).catch(function(e){throw e})}}(t))},onUpdateAdmin:function(t){return e(function(e){return function(t){return k.a.post(N.updateAdmin,e).then(function(e){t(ae())}).catch(function(e){throw e})}}(t))},onDuplicateAdmin:function(t){return e(function(e){return function(t){return k.a.post(N.duplicateAdmin,e).then(function(e){t(ae())}).catch(function(e){throw e})}}(t))},onGetOldProducts:function(t){return e(ke(t))}}})(Object(u.e)(je)),we=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={checked:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"updateDisponibility",value:function(e){this.setState({checked:!this.state.checked},this.props.onClickCallback)}},{key:"render",value:function(){var e=this;return r.a.createElement("tr",{key:this.props.key,id:"product-"+this.props.product._id},r.a.createElement("td",{className:"d-none d-lg-table-cell"},this.props.product.ref),r.a.createElement("td",null,this.props.product.designation),r.a.createElement("td",null,this.props.quantity),r.a.createElement("td",{className:"d-none d-lg-table-cell"},U.priceHt(this.props.product),"\u20ac"),r.a.createElement("td",{className:"d-none d-lg-table-cell"},U.priceHt(this.props.product,this.props.quantity),"\u20ac"),r.a.createElement("td",{className:"text-center d-none d-lg-table-cell align-middle"},this.props.urgent?r.a.createElement("i",{className:"fa fa-check icon-big text-info static"}):r.a.createElement("i",{className:"fa fa-close icon-big text-muted op-3 static"})),r.a.createElement("td",{className:"text-center card-body"},r.a.createElement("div",{className:"custom-control custom-switch mx-auto switch-success",onClick:function(t){return e.updateDisponibility(t)}},r.a.createElement("input",{onChange:function(t){return e.updateDisponibility(t)},type:"checkbox",className:"custom-control-input switch-bg-blue disponibility",id:"switch-av-"+this.props.order._id+this.props.product._id,value:this.props.product._id,checked:this.state.checked}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"switch-av-"+this.props.order._id+this.props.product._id}))))}}]),t}(r.a.Component),Fe=Object(c.b)(function(e){return{user:e.user}},function(e){return{}})(we),Ae=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"getProduct",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.products[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(i._id===e)return i}}catch(p){a=!0,n=p}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}var s=!0,o=!1,c=void 0;try{for(var u,m=this.props.oldProducts[Symbol.iterator]();!(s=(u=m.next()).done);s=!0){var d=u.value;if(d._id===e)return d}}catch(p){o=!0,c=p}finally{try{s||null==m.return||m.return()}finally{if(o)throw c}}}},{key:"render",value:function(){var e=this;if(0===this.props.products.length)return null;var t=new U,a=0,n=this.props.order.products.map(function(n){var l=e.getProduct(n.id_product);return t.add(l,n.quantity),r.a.createElement(Fe,{key:++a+"-"+l._id,order:e.props.order,product:l,quantity:n.quantity,urgent:n.urgent,onClickCallback:e.props.onClickCallback})});return r.a.createElement("table",{id:"bootstrap-data-table-export",className:"table table-striped table-bordered m-0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Reference"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Designation"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Quantity"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Unit.Price.Excl.Tax"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Total.Excl.Tax"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Urgent"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})))),r.a.createElement("tbody",null,n))}}]),t}(r.a.Component),De=Object(c.b)(function(e){return{lang:e.i18n.lang,products:e.products,oldProducts:e.oldProducts}},function(e){return{}})(Ae),Te=(a(130),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={disabled:!0},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeConfModal()}},{key:"getSplittedProducts",value:function(){var e=[],t=[],a=document.getElementsByClassName("disponibility"),n=!0,r=!1,l=void 0;try{for(var i,s=this.props.order.products[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value,c=!0,u=!1,m=void 0;try{for(var d,p=a[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var h=d.value;h.checked&&h.value===o.id_product&&e.push(o),h.checked||h.value!==o.id_product||t.push(o)}}catch(f){u=!0,m=f}finally{try{c||null==p.return||p.return()}finally{if(u)throw m}}}}catch(f){r=!0,l=f}finally{try{n||null==s.return||s.return()}finally{if(r)throw l}}return{productsAvailable:e,productsUnavailable:t}}},{key:"checkProductsDisponibility",value:function(){var e=this.getSplittedProducts();this.setState({disabled:0===e.productsAvailable.length||0===e.productsUnavailable.length})}},{key:"split",value:function(e,t){var a=this.getSplittedProducts();a.orderId=t._id,this.props.onSplitOrderAdmin(a),this.close()}},{key:"stopEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog modal-lg",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},r.a.createElement("span",null," ",r.a.createElement(u.b,{id:"Order"})," ",this.props.order.ref," ")),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-12 col-sm-6 p-3"},r.a.createElement("span",{className:"d-inline-block mr-3"},r.a.createElement(u.b,{id:"Product.Available"})),r.a.createElement("div",{className:"custom-control custom-switch mx-auto d-inline-block"},r.a.createElement("input",{onChange:function(t){return e.stopEvent(t)},type:"checkbox",className:"custom-control-input switch-bg-blue",id:"switch-av",checked:!0}),r.a.createElement("label",{className:"custom-control-label cursor-pointer",htmlFor:"switch-av"}))),r.a.createElement("div",{className:"col-12 col-sm-6 p-3"},r.a.createElement("span",{className:"d-inline-block mr-3"},r.a.createElement(u.b,{id:"Product.Unavailable"})),r.a.createElement("div",{className:"custom-control custom-switch mx-auto d-inline-block"},r.a.createElement("input",{onChange:function(t){return e.stopEvent(t)},type:"checkbox",className:"custom-control-input switch-bg-blue",id:"switch-av-f",checked:!1}),r.a.createElement("label",{className:"custom-control-label cursor-pointer",htmlFor:"switch-av-f"})))),r.a.createElement(De,{order:this.props.order,onClickCallback:function(){return e.checkProductsDisponibility()}})),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(t){return e.split(t,e.props.order)},disabled:this.state.disabled},r.a.createElement(u.b,{id:"Split"})))))))}}]),t}(r.a.Component)),Pe=Object(c.b)(function(e){return{lang:e.i18n.lang}},function(e){return{onSplitOrderAdmin:function(t){return e(function(e){return function(t){return k.a.post(N.splitOrderAdmin,e).then(function(e){t(ae())}).catch(function(e){throw e})}}(t))}}})(Te),Ie=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null,clientFilter:null,referenceFilter:null,dateFilter:null,statusFilter:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openSplitModal",value:function(e){var t=this;this.setState({modal:r.a.createElement(Pe,{isOpen:!0,order:e,closeConfModal:function(){return t.closeModal()}})})}},{key:"openConfModal",value:function(e,t,a){var n=this;this.setState({modal:r.a.createElement(K,{isOpen:!0,title:e,content:t,successCallback:a,closeModal:function(){return n.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"sortByDateDesc",value:function(e,t){return e.creation_date>t.creation_date?-1:e.creation_date<t.creation_date?1:0}},{key:"render",value:function(){var e=this;if(0===this.props.products.length)return null;if(0===this.props.orders.length)return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"#/home/families",className:"iconed-btn nostyle-a hoverable"},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Order.Pass.Some"})))),r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},r.a.createElement(u.b,{id:"Empty.Orders"})));var t=this.props.orders.sort(this.sortByDateDesc).map(function(t){var a,n,l=!0,i=!1,s=void 0;try{for(var o,c=e.props.clients[Symbol.iterator]();!(l=(o=c.next()).done);l=!0){var u=o.value;u._id===t.id_client&&(a=u.username,n=u._id)}}catch(m){i=!0,s=m}finally{try{l||null==c.return||c.return()}finally{if(i)throw s}}return e.state.clientFilter&&""!==e.state.clientFilter&&n!==e.state.clientFilter?null:e.state.referenceFilter&&""!==e.state.referenceFilter&&-1===t.ref.indexOf(e.state.referenceFilter)?null:e.state.dateFilter&&""!==e.state.dateFilter&&new Date(t.creation_date)<new Date(e.state.dateFilter)?null:e.state.statusFilter&&""!==e.state.statusFilter&&t.status!==Number(e.state.statusFilter)?null:r.a.createElement(_e,{key:t._id,order:t,products:e.props.products,clientName:a,openConfModal:function(t,a,n){return e.openConfModal(t,a,n)},openSplitModal:function(t){return e.openSplitModal(t)}})}),a=this.props.clients.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.username)}),n=Object.values(ye.a).map(function(t){return r.a.createElement("option",{key:t,value:t},e.props.intl.formatMessage({id:"Order.Status."+t}))});return r.a.createElement(r.a.Fragment,null,this.state.modal,r.a.createElement("a",{href:"#/home/families",className:"iconed-btn nostyle-a hoverable"},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Order.Pass.Some"})))),r.a.createElement("table",{className:"table table-striped-3 table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(u.b,{id:"Client"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Reference"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Date"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Total"})," ",r.a.createElement(u.b,{id:"Excl.Tax"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Total"})," ",r.a.createElement(u.b,{id:"Incl.Tax"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Order.Status"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Urgent"})))),r.a.createElement("tbody",null,r.a.createElement("tr",{className:"d-none d-xl-table-row filter-row"},r.a.createElement("td",null,r.a.createElement("select",{id:"order-filter-clientId",className:"form-control w-100",onChange:function(t){e.setState({clientFilter:t.target.value})}},r.a.createElement("option",{value:""},this.props.intl.formatMessage({id:"All"})),a)),r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("input",{className:"form-control",type:"search",onChange:function(t){e.setState({referenceFilter:t.target.value})}})),r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("input",{className:"form-control",type:"date",onChange:function(t){e.setState({dateFilter:t.target.value})}})),r.a.createElement("td",{className:"d-none d-lg-table-cell"}),r.a.createElement("td",{className:"d-none d-md-table-cell"}),r.a.createElement("td",null,r.a.createElement("select",{id:"order-filter-status",className:"form-control w-100",onChange:function(t){e.setState({statusFilter:t.target.value})}},r.a.createElement("option",{value:""},this.props.intl.formatMessage({id:"All"})),n)),r.a.createElement("td",null),r.a.createElement("td",{className:"d-none d-lg-table-cell"})),t)))}}]),t}(r.a.Component),Ue=Object(c.b)(function(e){return{lang:e.i18n.lang,orders:e.orders,clients:e.clients,products:e.products}},function(e){return{}})(Object(u.e)(Ie)),Re=a(19),Le=function(e){function t(e){var a;if(Object(d.a)(this,t),-1===(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).props.index){var n=a.props.shippingCosts.length>0?a.props.shippingCosts[a.props.shippingCosts.length-1].max:0;a.state={min:n,max:n+1,cost:0,disabledInputMax:!0,defaultChecked:!0,alert:null}}else{var r=a.props.shippingCosts[a.props.index].max;a.state={min:a.props.shippingCosts[a.props.index].min,max:a.props.shippingCosts[a.props.index].max,cost:a.props.shippingCosts[a.props.index].cost,disabledInputMax:!r,defaultChecked:!r,alert:null}}return a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"onComplete",value:function(){if(this.state.min>=this.state.max&&!this.state.disabledInputMax)return this.setState({alert:r.a.createElement(u.b,{id:"Min.Greater.Max"})}),!1;var e=this.props.shippingCosts||[],t={min:this.state.min,max:this.state.max,cost:this.state.cost||0};this.state.disabledInputMax&&(t.max=""),-1!==this.props.index?e[this.props.index]=t:e.push(t),this.props.successCallback(e),-1===this.props.index&&this.close()}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"onChangeMin",value:function(e){this.setState({min:e})}},{key:"onChangeMax",value:function(e){this.setState({max:e})}},{key:"onChangeCost",value:function(e){this.setState({cost:e})}},{key:"onClickRadioMax",value:function(e){this.state.disabledInputMax?this.setState({max:document.getElementById("maxShippingCost").value,disabledInputMax:!1}):this.setState({disabledInputMax:!0})}},{key:"render",value:function(){var e=this,t=r.a.createElement(u.b,{id:"Create"});return this.props.shippingCost&&(t=r.a.createElement(u.b,{id:"Modify"})),r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},r.a.createElement(u.b,{id:"Shipping.Cost"})),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-10 m-auto"},r.a.createElement("label",{htmlFor:"Min",className:"col-form-label"},r.a.createElement(u.b,{id:"Minimum"})),r.a.createElement("input",{type:"number",disabled:!0,onChange:function(t){return e.onChangeMin(t.target.value)},className:"form-control",min:"0",value:this.state.min,id:"minShippingCost"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-10 m-auto"},r.a.createElement("label",{htmlFor:"Max",className:"col-form-label"},r.a.createElement(u.b,{id:"Maximum"})),r.a.createElement("br",null),r.a.createElement("div",{className:"m-auto align-items-center row"},r.a.createElement("div",{className:"row m-0 align-items-center col-8 p-0"},r.a.createElement("input",{className:"btnRadioMax",type:"radio",name:"max",onBlur:function(){return-1!==e.props.index&&e.onComplete()},onChange:function(t){return e.onClickRadioMax(t)},value:"number",defaultChecked:!this.state.defaultChecked}),r.a.createElement("input",{type:"number",onBlur:function(){return-1!==e.props.index&&e.onComplete()},onChange:function(t){return e.onChangeMax(t.target.value)},disabled:this.state.disabledInputMax,className:"form-control ml-2 col-10",min:"0",value:this.state.max||this.state.min+1,id:"maxShippingCost"})),r.a.createElement("div",{className:"row m-0 align-items-center col-3 p-0"},r.a.createElement("input",{className:"btnRadioMax",type:"radio",name:"max",onBlur:function(){return-1!==e.props.index&&e.onComplete()},onChange:function(t){return e.onClickRadioMax(t)},defaultChecked:this.state.defaultChecked,value:"infinity"}),r.a.createElement("h4",{className:"m-0 ml-2"},"\u221e"))),r.a.createElement("small",{className:"ml-2 col-8 row text-danger"},this.state.alert))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-10 m-auto"},r.a.createElement("label",{htmlFor:"Cost",className:"col-form-label"},r.a.createElement(u.b,{id:"Shipping.Cost.Excl.Tax"})),r.a.createElement("input",{type:"number",onBlur:function(){return-1!==e.props.index&&e.onComplete()},onChange:function(t){return e.onChangeCost(t.target.value)},className:"form-control",min:"0",value:this.state.cost,id:"cost"})))),-1===this.props.index&&r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.onComplete()}},t))))))}}]),t}(r.a.Component),Be=Object(c.b)(function(e){return{lang:e.user.lang}},function(e){return{}})(Le),Ge="GET_ESTABLISHMENT_SETTINGS";var Ve=function(e){return function(t){return k.a.get(N.getEstablishmentSettings).then(function(a){var n;t((n=a.data,{type:Ge,establishmentSettings:n})),e&&e()}).catch(function(e){throw e})}},qe=function(e,t){return function(a){return k.a.post(N.updateEstablishmentSettings,e).then(function(e){a(Ve(t))}).catch(function(e){throw e})}},We="GET_ADMIN_ORDERS_SETTINGS";var He=function(){return function(e){return k.a.get(N.getOrdersSettingsAdmin).then(function(t){var a;e((a=t.data,{type:We,ordersSettingsAdmin:a}))}).catch(function(e){throw e})}},Ye=function(e){return function(t){return k.a.post(N.updateShippingCostsSetting,e).then(function(e){t(He())}).catch(function(e){throw e})}},ze=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"updateShippingCostsSetting",value:function(e){this.props.onUpdateShippingCostsSetting({shippingCosts:e})}},{key:"isLast",value:function(){return this.props.index===this.props.shippingCosts.length-1}},{key:"openShippingModal",value:function(e,t){this.isLast()&&this.props.openShippingModal(e,t)}},{key:"openConfModal",value:function(e,t,a){this.isLast()&&this.props.openConfModal(e,t,a)}},{key:"splice",value:function(e,t){return e.splice(t,1),e}},{key:"render",value:function(){var e=this,t=r.a.createElement(u.b,{id:"Confirm"}),a=r.a.createElement(u.b,{id:"Remove.Row.Confirmation"}),n=function(){return e.updateShippingCostsSetting(e.splice(e.props.shippingCosts,e.props.index))},l=function(t){return e.updateShippingCostsSetting(t)},i=this.props.shippingCost.max?r.a.createElement("span",null,this.props.shippingCost.max):r.a.createElement(u.b,{id:"Infinity"});return r.a.createElement("tr",{key:this.props.key},r.a.createElement("td",null,r.a.createElement("span",{className:"d-sm-none"},this.props.shippingCost.min," / ",i),r.a.createElement("span",{className:"d-none d-sm-table-cell"},this.props.shippingCost.min)),r.a.createElement("td",{className:"d-none d-sm-table-cell"},i),r.a.createElement("td",null,this.props.shippingCost.cost),r.a.createElement("td",{className:"text-center"},r.a.createElement("i",{className:"fa fa-edit icon-big",onClick:function(t,a){return e.openShippingModal(e.props.index,l)},disabled:!this.isLast()}),r.a.createElement("i",{className:"fa fa-trash icon-big",onClick:function(r){return e.openConfModal(t,a,n)},disabled:!this.isLast()})))}}]),t}(r.a.Component),Qe=Object(c.b)(function(e){return{lang:e.user.lang}},function(e){return{onUpdateShippingCostsSetting:function(t){return e(Ye(t))}}})(ze),Xe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openShippingModal",value:function(e,t){var a=this;this.setState({modal:r.a.createElement(Be,{isOpen:!0,index:e,shippingCosts:this.props.ordersSettingsAdmin.shipping_costs,successCallback:t,closeModal:function(){return a.closeModal()}})})}},{key:"openConfModal",value:function(e,t,a){var n=this;this.setState({modal:r.a.createElement(K,{isOpen:!0,title:e,content:t,successCallback:a,closeModal:function(){return n.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"render",value:function(){var e=this,t=-1,a=this.props.ordersSettingsAdmin.shipping_costs.map(function(a){return r.a.createElement(Qe,{index:++t,key:t,shippingCost:a,shippingCosts:e.props.ordersSettingsAdmin.shipping_costs,openConfModal:function(t,a,n){return e.openConfModal(t,a,n)},openShippingModal:function(t,a){return e.openShippingModal(t,a)}})});return r.a.createElement(r.a.Fragment,null,this.state.modal,r.a.createElement("table",{className:"table table-striped table-bordered col-12"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{className:"d-sm-none"},r.a.createElement(u.a,{id:"Min.Max"})),r.a.createElement("span",{className:"d-none d-sm-table-cell"},r.a.createElement(u.b,{id:"Minimum"}))),r.a.createElement("th",{className:"d-none d-sm-table-cell"},r.a.createElement(u.b,{id:"Maximum"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Shipping.Cost.Excl.Tax"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})))),r.a.createElement("tbody",null,a)))}}]),t}(r.a.Component),Ke=Object(c.b)(function(e){return{lang:e.user.lang}},function(e){return{}})(Xe),Je=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null,shipping_delay:a.props.ordersSettingsAdmin.shipping_delay,min_order_amount:a.props.ordersSettingsAdmin.min_order_amount,annual_budget:a.props.ordersSettingsAdmin.annual_budget,urgent:a.props.ordersSettingsAdmin.urgent},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openShippingModal",value:function(e){var t=this;this.hasInfinity()||this.setState({modal:r.a.createElement(Be,{isOpen:!0,index:-1,shippingCosts:this.props.ordersSettingsAdmin.shipping_costs,successCallback:e,closeModal:function(){return t.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"createShippingCostSetting",value:function(e){this.props.onUpdateShippingCostsSetting({shippingCosts:e})}},{key:"onFieldChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.setState(Object(Re.a)({},e,t))}},{key:"updateOrderSettingAdmin",value:function(e){var t={updatedField:e,updatedValue:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0};this.props.onUpdateOrderSettingAdmin(t)}},{key:"hasInfinity",value:function(){return 0!==this.props.ordersSettingsAdmin.shipping_costs.length&&!this.props.ordersSettingsAdmin.shipping_costs[this.props.ordersSettingsAdmin.shipping_costs.length-1].max}},{key:"render",value:function(){var e=this;if(0===this.props.ordersSettingsAdmin.length)return null;var t=function(t){return e.createShippingCostSetting(e.props.ordersSettingsAdmin.shipping_costs)},a=null;return 0!==this.props.ordersSettingsAdmin.shipping_costs.length&&(a=r.a.createElement(Ke,{ordersSettingsAdmin:this.props.ordersSettingsAdmin})),r.a.createElement(r.a.Fragment,null,this.state.modal,r.a.createElement("div",{className:"col-12 col-lg-7 col-xl-6"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"shippingDelay",className:"col-12 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Shipping.Delay"})),r.a.createElement("div",{className:"col-12 col-md-5"},r.a.createElement("input",{type:"number",className:"form-control",id:"shippingDelay",min:"0",value:this.state.shipping_delay,onChange:function(t){return e.onFieldChange("shipping_delay",t.target.value)},onBlur:function(t){return e.updateOrderSettingAdmin("shipping_delay",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"minPrice",className:"col-12 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Min.Price"})),r.a.createElement("div",{className:"col-12 col-md-5"},r.a.createElement("input",{type:"number",className:"form-control",id:"minPrice",min:"0",value:this.state.min_order_amount,onChange:function(t){return e.onFieldChange("min_order_amount",t.target.value)},onBlur:function(t){return e.updateOrderSettingAdmin("min_order_amount",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"annualBudget",className:"col-12 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Budget.Annual"})),r.a.createElement("div",{className:"col-12 col-md-5"},r.a.createElement("input",{type:"number",className:"form-control",id:"annualBudget",min:"0",value:this.state.annual_budget,onChange:function(t){return e.onFieldChange("annual_budget",t.target.value)},onBlur:function(t){return e.updateOrderSettingAdmin("annual_budget",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"annualBudget",className:"col-12 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Settings.Urgent.Cost"})),r.a.createElement("div",{className:"col-12 col-md-5"},r.a.createElement("input",{type:"number",className:"form-control",id:"urgent",min:"0",value:this.state.urgent,onChange:function(t){return e.onFieldChange("urgent",t.target.value)},onBlur:function(t){return e.updateOrderSettingAdmin("urgent",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"shippingCost",className:"col-10 col-sm-11 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Shipping.Cost"})),r.a.createElement("div",{className:"col-2 col-sm-1 col-md-5"},r.a.createElement("i",{className:"fa fa-plus-square icon-big hoverable clickable p-0 pt-2",id:"shippingCost",onClick:function(a){return e.openShippingModal(t)},disabled:this.hasInfinity()}))),a))}}]),t}(r.a.Component),Ze=Object(c.b)(function(e){return{lang:e.user.lang,user:e.user,ordersSettingsAdmin:e.ordersSettingsAdmin}},function(e){return{onUpdateOrderSettingAdmin:function(t){return e(function(e){return function(t){return k.a.post(N.updateOrderSettingAdmin,e).then(function(e){t(He()),t(Ve())}).catch(function(e){throw e})}}(t))},onUpdateShippingCostsSetting:function(t){return e(Ye(t))}}})(Je),$e="GET_MATERIALS_TYPES";var et=function(){return function(e){return k.a.get(N.getMaterialsTypes).then(function(t){var a;e((a=t.data,{type:$e,materialsTypes:a}))}).catch(function(e){throw e})}},tt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={name:"",nameError:null,disabled:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"onChange",value:function(e){var t=!0,a=!1,n=void 0;try{for(var l,i=this.props.materialsTypes[Symbol.iterator]();!(t=(l=i.next()).done);t=!0){if(l.value.name.toUpperCase()===e.toUpperCase().trim())return void this.setState({name:e,nameError:r.a.createElement(u.b,{id:"Material.Exist"}),disabled:!0})}}catch(s){a=!0,n=s}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}this.setState({name:e,nameError:null,disabled:!1})}},{key:"add",value:function(){var e=this;this.setState({disabled:!0});var t={newMaterial:this.state.name.trim()};this.props.onAddMaterialsType(t,function(){return e.close()})}},{key:"stopEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},r.a.createElement(u.b,{id:"Add.Material"})),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"name",className:"col-sm-4 col-form-label"},r.a.createElement(u.b,{id:"Name"})),r.a.createElement("div",{id:"name",className:"col-sm-8"},r.a.createElement("input",{className:"form-control",type:"text",id:"materialName",name:"name",onChange:function(t){return e.onChange(t.target.value)}}),r.a.createElement("small",{className:"text-danger"},this.state.nameError)))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.add()},disabled:this.state.disabled||this.state.nameError||""===this.state.name},r.a.createElement(u.b,{id:"Add"})))))))}}]),t}(r.a.Component),at=Object(c.b)(function(e){return{materialsTypes:e.materialsTypes}},function(e){return{onAddMaterialsType:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.addMaterialsType,e).then(function(e){a(et()),t()}).catch(function(e){throw e})}}(t,a))}}})(tt),nt=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"deleteMaterialType",value:function(e){var t={materialId:e};this.props.onDeleteMaterialType(t)}},{key:"render",value:function(){var e=this,t=r.a.createElement(u.b,{id:"Confirm"}),a=r.a.createElement(u.b,{id:"Material.Type.Remove.Confirmation"}),n=function(){return e.deleteMaterialType(e.props.materialType._id)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:this.props.key},r.a.createElement("td",null,this.props.materialType.name),r.a.createElement("td",{className:"text-center"},r.a.createElement("i",{className:"fa fa-trash icon-big",onClick:function(r){return e.props.openConfModal(t,a,n)}}))))}}]),t}(r.a.Component),rt=Object(c.b)(function(e){return{lang:e.user.lang}},function(e){return{onDeleteMaterialType:function(t){return e(function(e){return function(t){return k.a.post(N.deleteMaterialType,e).then(function(e){t(et()),t(Ve())}).catch(function(e){throw e})}}(t))}}})(nt),lt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openConfModal",value:function(e,t,a){var n=this;this.setState({modal:r.a.createElement(K,{isOpen:!0,title:e,content:t,successCallback:a,closeModal:function(){return n.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"render",value:function(){var e=this,t=this.props.materialsTypes.map(function(t){return r.a.createElement(rt,{key:t._id,materialType:t,openConfModal:function(t,a,n){return e.openConfModal(t,a,n)}})});return r.a.createElement(r.a.Fragment,null,this.state.modal,r.a.createElement("table",{className:"table table-striped table-bordered col-12 col-md-10 col-xl-6"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"col-8"},r.a.createElement(u.b,{id:"Type"})),r.a.createElement("th",{className:"col-4"},r.a.createElement(u.b,{id:"Actions"})))),r.a.createElement("tbody",null,t)))}}]),t}(r.a.Component),it=Object(c.b)(function(e){return{}},function(e){return{}})(lt),st=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openMaterialsTypesModal",value:function(){var e=this;this.setState({modal:r.a.createElement(at,{isOpen:!0,closeModal:function(){return e.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:function(t){return e.openMaterialsTypesModal()},className:"iconed-btn nostyle-a hoverable clickable"},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-square icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Add.Material"})))),0!==this.props.materialsTypes.length&&r.a.createElement(it,{materialsTypes:this.props.materialsTypes}),this.state.modal)}}]),t}(r.a.Component),ot=Object(c.b)(function(e){return{user:e.user,materialsTypes:e.materialsTypes}},function(e){return{}})(st),ct=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return 0===Object.keys(this.props.ordersSettingsAdmin).length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist"},r.a.createElement("a",{className:"nav-item nav-link p-2 pr-sm-3 pl-sm-3 rounded-0",id:"nav-home-tab","data-toggle":"tab",href:"#nav-general",role:"tab","aria-controls":"nav-home","aria-selected":"false"},r.a.createElement(u.b,{id:"General"})),r.a.createElement("a",{className:"nav-item nav-link active p-2 pr-sm-3 pl-sm-3 rounded-0",id:"nav-profile-tab","data-toggle":"tab",href:"#nav-profile",role:"tab","aria-controls":"nav-profile","aria-selected":"true"},r.a.createElement(u.b,{id:"Orders"})),r.a.createElement("a",{className:"nav-item nav-link p-2 pr-sm-3 pl-sm-3 rounded-0",id:"nav-contact-tab","data-toggle":"tab",href:"#nav-contact",role:"tab","aria-controls":"nav-contact","aria-selected":"false"},r.a.createElement(u.b,{id:"Emails"})),r.a.createElement("a",{className:"nav-item nav-link p-2 pr-sm-3 pl-sm-3 rounded-0",id:"nav-contact-tab","data-toggle":"tab",href:"#nav-contact",role:"tab","aria-controls":"nav-contact","aria-selected":"false"},"API"),r.a.createElement("a",{className:"nav-item nav-link p-2 pr-sm-3 pl-sm-3 rounded-0",id:"nav-contact-tab","data-toggle":"tab",href:"#nav-types-dm",role:"tab","aria-controls":"nav-contact","aria-selected":"false"},r.a.createElement(u.b,{id:"Types.Dm"})))),r.a.createElement("div",{className:"tab-content mt-3 p-0 p-md-4",id:"nav-tabContent"},r.a.createElement("div",{className:"tab-pane fade",id:"nav-general",role:"tabpanel","aria-labelledby":"nav-home-tab"}),r.a.createElement("div",{className:"tab-pane fade show active",id:"nav-profile",role:"tabpanel","aria-labelledby":"nav-profile-tab"},r.a.createElement(Ze,{ordersSettings:this.props.ordersSettingsAdmin})),r.a.createElement("div",{className:"tab-pane fade",id:"nav-contact",role:"tabpanel","aria-labelledby":"nav-contact-tab"},r.a.createElement(u.b,{id:"Emails"})),r.a.createElement("div",{className:"tab-pane fade",id:"nav-contact",role:"tabpanel","aria-labelledby":"nav-contact-tab"},"api"),r.a.createElement("div",{className:"tab-pane fade",id:"nav-types-dm",role:"tabpanel","aria-labelledby":"nav-contact-tab"},r.a.createElement(ot,null))))}}]),t}(r.a.Component),ut=Object(c.b)(function(e){return{ordersSettingsAdmin:e.ordersSettingsAdmin,user:e.user}},function(e){return{}})(ct),mt="GET_USER";var dt=function(){return function(e){return k.a.get(N.getUser).then(function(t){var a;t&&t.status||(window.location.href="/"),e((a=t.data,{type:mt,user:a}))}).catch(function(e){window.location.href="/"})}},pt="GET_PRODUCTS";function ht(e){return{type:pt,products:e}}var ft=function(){return function(e){return k.a.get(N.getProductsAdmin).then(function(t){e(ht(t.data))}).catch(function(e){throw e})}},bt="GET_CLIENTS";var Et=function(){return function(e){return k.a.get(N.getClients).then(function(t){var a;e((a=t.data,{type:bt,clients:a}))}).catch(function(e){throw e})}},vt="GET_ESTABLISHMENTS";var gt=function(){return function(e){return k.a.get(N.getEstablishments).then(function(t){var a;e((a=t.data,{type:vt,establishments:a}))}).catch(function(e){throw e})}},yt="GET_ORDERS_SETTINGS";var Nt=function(){return function(e){return k.a.get(N.getOrdersSettings).then(function(t){var a;e((a=t.data,{type:yt,ordersSettings:a}))}).catch(function(e){throw e})}},Ct=a(500),kt=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"logout",value:function(e){e.preventDefault(),e.stopPropagation();var t=this;this.props.onLogout(function(){t.props.history.push("/")})}},{key:"updateLang",value:function(e){this.props.onUpdateLang(e)}},{key:"render",value:function(){var e=this,t=this.props.lang;if(t){var a=["en","fr"].map(function(a){return a===t?null:r.a.createElement("li",{key:a,className:"dropdown-item",onClick:function(t){return e.updateLang(a)}},r.a.createElement(u.b,{id:"Lang."+a}))});return r.a.createElement("div",{className:"dropdown dropleft"},r.a.createElement("span",{className:"","data-toggle":"dropdown"},r.a.createElement("span",{className:"a-like"},r.a.createElement("i",{className:"fa fa-user-circle icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-user-circle icon-small text-light d-inline d-md-none"}),this.props.user.first_name," ",this.props.user.name)),r.a.createElement("ul",{className:"dropdown-menu multi-level"},r.a.createElement("li",{className:"dropdown-submenu"},r.a.createElement("span",{className:"dropdown-item"},r.a.createElement(u.b,{id:"Lang"}),"\xa0: ",r.a.createElement(u.b,{id:"Lang."+this.props.lang})),r.a.createElement("ul",{className:"dropdown-menu"},a)),r.a.createElement("li",{className:"dropdown-divider"}),r.a.createElement("li",{className:"dropdown-item",onClick:function(t){return e.logout(t)}},"Disconnect")))}}}]),t}(r.a.Component),Ot=Object(Ct.a)(Object(c.b)(function(e){return{lang:e.i18n.lang,user:e.user}},function(e){return{onLogout:function(t){return e(M(t))},onUpdateLang:function(t){return e(function(e){return function(t){return k.a.get(N.updateLang+e).then(function(e){t(dt())}).catch(function(e){throw e})}}(t))}}})(kt)),Mt=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-custom-blue"},r.a.createElement("div",{id:"menu",className:"collapse navbar-collapse mb-3 mb-md-0"},r.a.createElement("ul",{className:"navbar-nav text-center"},r.a.createElement("a",{href:"#/home"},r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement("i",{className:"fa fa-home icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-home icon-small text-light d-inline d-md-none"}),r.a.createElement(u.b,{id:"Home"}))),r.a.createElement("a",{href:"#/home/orders"},r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement("i",{className:"fa fa-clipboard icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-clipboard icon-small text-light d-inline d-md-none"}),r.a.createElement("span",{className:"relative"},r.a.createElement(u.b,{id:"Orders"}),this.props.orders.length>0&&r.a.createElement("span",{className:"count bg-warning"},this.props.orders.length)))),r.a.createElement("a",{href:"#/home/mercurials"},r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement("i",{className:"fa fa-file-excel-o icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-file-excel-o icon-small text-light d-inline d-md-none"}),r.a.createElement(u.b,{id:"Mercurials"}))),r.a.createElement("a",{href:"#/home/settings"},r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement("i",{className:"fa fa-cogs icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-cogs icon-small text-light d-inline d-md-none"}),r.a.createElement(u.b,{id:"Settings"}))),r.a.createElement("a",{href:"#/home/clients"},r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement("i",{className:"fa fa-users icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-users icon-small text-light d-inline d-md-none"}),r.a.createElement(u.b,{id:"Clients"}))),r.a.createElement("a",{href:"#/home/cart",className:"ml-md-auto"},r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement("i",{className:"fa fa-shopping-cart icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-shopping-cart icon-small text-light d-inline d-md-none"}),r.a.createElement("span",{className:"relative"},r.a.createElement(u.b,{id:"Cart"}),this.props.cart.length>0&&r.a.createElement("span",{className:"count bg-warning"},this.props.totalProduct)))),r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement(Ot,null)))),r.a.createElement("button",{className:"navbar-toggler m-auto",type:"button","data-toggle":"collapse","data-target":"#menu","aria-controls":"menu","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})))}}]),t}(r.a.Component),St=Object(Ct.a)(Object(c.b)(function(e){return{lang:e.i18n.lang,cart:e.cart,orders:e.orders}},function(e){return{}})(Mt)),xt=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-custom-green"},r.a.createElement("div",{id:"menu",className:"collapse navbar-collapse mb-3 mb-md-0"},r.a.createElement("ul",{className:"navbar-nav text-center"},r.a.createElement("a",{href:"#/home"},r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement("i",{className:"fa fa-home icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-home icon-small text-light d-inline d-md-none"}),r.a.createElement(u.b,{id:"Home"}))),r.a.createElement("a",{href:"#/home/orders"},r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement("i",{className:"fa fa-clipboard icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-clipboard icon-small text-light d-inline d-md-none"}),r.a.createElement("span",{className:"relative"},r.a.createElement(u.b,{id:"Orders"}),this.props.orders.length>0&&r.a.createElement("span",{className:"count bg-warning"},this.props.orders.length)))),r.a.createElement("a",{href:"#/home/fleet"},r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement("i",{className:"fa fa-building icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-building icon-small text-light d-inline d-md-none"}),r.a.createElement("span",{className:"relative"},r.a.createElement(u.b,{id:"Fleet"})))),r.a.createElement("a",{href:"#/home/cart",className:"ml-md-auto"},r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement("i",{className:"fa fa-shopping-cart icon-big text-light d-none d-md-block"}),r.a.createElement("i",{className:"fa fa-shopping-cart icon-small text-light d-inline d-md-none"}),r.a.createElement("span",{className:"relative"},r.a.createElement(u.b,{id:"Cart"}),this.props.cart.length>0&&r.a.createElement("span",{className:"count bg-warning"},this.props.totalProduct)))),r.a.createElement("li",{className:"nav-item mx-2 p-2"},r.a.createElement(Ot,null)))),r.a.createElement("button",{className:"navbar-toggler m-auto",type:"button","data-toggle":"collapse","data-target":"#menu","aria-controls":"menu","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})))}}]),t}(r.a.Component),jt=Object(Ct.a)(Object(c.b)(function(e){return{lang:e.i18n.lang,cart:e.cart,orders:e.orders}},function(e){return{}})(xt)),_t=a(204),wt=a.n(_t),Ft=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"confirm",value:function(){this.props.successCallback(),this.close()}},{key:"stopEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content  border border-warning"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},r.a.createElement("i",{className:"fa fa-info-circle  fa-big mr-3"}),this.props.title),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},this.props.content),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-warning text-white",onClick:function(){return e.confirm()}},r.a.createElement(u.b,{id:"Ok"})))))))}}]),t}(r.a.Component),At=Object(c.b)(function(e){return{}},function(e){return{}})(Ft),Dt="GET_NOTIFS";var Tt=function(e){return function(e){return k.a.get(N.getNotifs).then(function(t){var a;e((a=t.data,{type:Dt,notifications:a}))}).catch(function(e){throw e})}},Pt=a(211),It=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"extension",value:function(e){var t=e.split(".");return t[t.length-1]}},{key:"extensionIsOk",value:function(t,a){var n=e.extension(t),r=!0,l=!1,i=void 0;try{for(var s,o=a[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){if(n===s.value)return!0}}catch(c){l=!0,i=c}finally{try{r||null==o.return||o.return()}finally{if(l)throw i}}return!1}},{key:"withoutExtension",value:function(t){var a=e.extension(t);return t.replace("."+a,"")}},{key:"toFileName",value:function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/gi,"_").toLowerCase()}}]),e}(),Ut=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={files:[],extensionError:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"onDrop",value:function(e,t){this.setState({extensionError:null});var a=!0,n=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value;if(!It.extensionIsOk(o.name,this.props.acceptedExtensions))return void this.setState({extensionError:r.a.createElement(u.b,{id:"Unsupported.File.Type.Ext",values:{extension:It.extension(o.name)}})})}}catch(c){n=!0,l=c}finally{try{a||null==s.return||s.return()}finally{if(n)throw l}}this.setState({files:e}),this.props.multiple?this.props.onDropFiles(e):this.props.onDropFile(e[0])}},{key:"render",value:function(){var e=this,t={width:"100%",borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5,padding:10},a={borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},n={borderColor:"#c66",color:"#c66",backgroundColor:"#eee"};return r.a.createElement(Pt.a,{onDrop:function(t,a){return e.onDrop(t,a)},multiple:this.props.multiple},function(l){var i=l.getRootProps,s=l.getInputProps,o=l.isDragActive,c=l.isDragAccept,m=l.isDragReject,d=(l.acceptedFiles,l.rejectedFiles,Object(D.a)({},t));d=o&&c?Object(D.a)({},d,a):d,d=o&&m||e.state.extensionError?Object(D.a)({},d,n):d;var p="";if(e.state.files.length<=10){var h=!0,f=!1,b=void 0;try{for(var E,v=e.state.files[Symbol.iterator]();!(h=(E=v.next()).done);h=!0){p+=" "+E.value.name}}catch(N){f=!0,b=N}finally{try{h||null==v.return||v.return()}finally{if(f)throw b}}p=r.a.createElement("span",null,p)}else{for(var g=0;g<10;g++)p+=" "+e.state.files[g].name;p=r.a.createElement("span",null,p,"... ",r.a.createElement("small",null,r.a.createElement("em",null,"(",r.a.createElement(u.b,{id:"More.items",values:{nbr:e.state.files.length-g}}),")")))}var y=null;return e.state.extensionError?y=e.state.extensionError:m?y=r.a.createElement(u.b,{id:"Unsupported.File.Type"}):e.props.multiple||0!==e.state.files.length?e.props.multiple&&0===e.state.files.length?y=r.a.createElement(u.b,{id:"Drag.Drop.Multiple"}):e.state.files.length>0&&(y=r.a.createElement("div",null,p)):y=r.a.createElement(u.b,{id:"Drag.Drop"}),r.a.createElement("div",Object.assign({},i(),{style:d,className:"text-center"}),r.a.createElement("input",s()),r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-cloud-upload icon-giant d-block",disabled:!e.props.multiple&&e.state.files.length>0}),r.a.createElement("div",null,y)))})}}]),t}(r.a.Component),Rt=Object(c.b)(function(e){return{}},function(e){return{}})(Ut),Lt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={disabled:!1,file:null,name:null,startDate:null,endDate:null,nameError:null,dateError:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"onDropFile",value:function(e){this.setState({file:e})}},{key:"onNameChange",value:function(e){var t=e.target.value,a=!0,n=!1,l=void 0;try{for(var i,s=this.props.mercurials[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){if(i.value.name===t)return void this.setState({name:t,nameError:r.a.createElement(u.b,{id:"Mercurials.Already.Imported"})})}}catch(o){n=!0,l=o}finally{try{a||null==s.return||s.return()}finally{if(n)throw l}}this.setState({name:t,nameError:null})}},{key:"onStartDateChange",value:function(e){var t=e.target.value,a=null;this.state.endDate&&t&&t>this.state.endDate&&(a=r.a.createElement(u.b,{id:"StartDate.Superior.EndDate"})),this.setState({startDate:t,dateError:a})}},{key:"onEndDateChange",value:function(e){var t=e.target.value,a=null;this.state.startDate&&t&&this.state.startDate>t&&(a=r.a.createElement(u.b,{id:"StartDate.Superior.EndDate"})),this.setState({endDate:t,dateError:a})}},{key:"onComplete",value:function(){this.setState({disabled:!0}),this.props.onComplete(this.state.name,this.state.file,this.state.startDate,this.state.endDate)}},{key:"disableButton",value:function(){return!this.state.file||!this.state.name||!this.state.startDate||!this.state.endDate||this.state.startDate>this.state.endDate||this.state.disabled||this.state.nameError}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog modal-lg",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},r.a.createElement(u.b,{id:"Mercurials.Add.Some"})),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body p-4"},r.a.createElement("h4",{className:"mb-5 w-100 text-center "},r.a.createElement(u.b,{id:"Mercurials.Step.1"})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"fam",className:"col-sm-4 col-form-label"},r.a.createElement(u.b,{id:"Mercurials.Name.Of"}),"\xa0: "),r.a.createElement("div",{id:"fam",className:"col-sm-8 pb-3"},r.a.createElement("input",{type:"text",className:"form-control",id:"file-name",onChange:function(t){return e.onNameChange(t)}}),r.a.createElement("div",{className:"text-danger"},r.a.createElement("small",null,this.state.nameError))),r.a.createElement("label",{htmlFor:"file-start-date",className:"col-sm-4 col-form-label"},r.a.createElement(u.b,{id:"Start.Date"}),"\xa0: "),r.a.createElement("div",{className:"col-sm-8 pb-3"},r.a.createElement("input",{type:"date",className:"form-control",id:"file-start-date",onChange:function(t){return e.onStartDateChange(t)}}),r.a.createElement("div",{className:"text-danger"},r.a.createElement("small",null,this.state.dateError))),r.a.createElement("label",{htmlFor:"file-end-date",className:"col-sm-4 col-form-label"},r.a.createElement(u.b,{id:"End.Date"}),"\xa0: "),r.a.createElement("div",{className:"col-sm-8 pb-3"},r.a.createElement("input",{type:"date",className:"form-control",id:"file-end-date",onChange:function(t){return e.onEndDateChange(t)}}))),r.a.createElement(Rt,{onDropFile:function(t){return e.onDropFile(t)},acceptedExtensions:["xls","xlsx"],multiple:!1}),r.a.createElement("div",{className:"w-100 text-center mt-3"},r.a.createElement("a",{role:"button",href:"templates/template_mercurial.xlsx",download:"template_mercurial.xlsx"},r.a.createElement("i",{className:"fa fa-file-excel-o text-blue mr-2"}),r.a.createElement(u.b,{id:"Mercurials.Download.Template"})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:this.disableButton(),onClick:function(){return e.onComplete()}},r.a.createElement(u.b,{id:"Mercurials.Step.2"})))))))}}]),t}(r.a.Component),Bt=Object(c.b)(function(e){return{mercurials:e.mercurials}},function(e){return{}})(Lt),Gt=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"closest",value:function(t,a){if(!t||!a)return!1;for(var n,r,l,i=0;i<a.length;i++){if(t===(l=a[i]))return t;var s=e.sift(t,l);(!n||s<n)&&(n=s,r=l)}return!(n>50)&&r}},{key:"sift",value:function(e,t){if(null===e||0===e.length)return null===t||0===t.length?0:t.length;if(null===t||0===t.length)return e.length;for(var a=0,n=0,r=0,l=0;a+n<e.length&&a+r<t.length;){if(e.charAt(a+n)===t.charAt(a+r))l++;else{n=0,r=0;for(var i=0;i<5;i++){if(a+i<e.length&&e.charAt(a+i)===t.charAt(a)){n=i;break}if(a+i<t.length&&e.charAt(a)===t.charAt(a+i)){r=i;break}}}a++}return(e.length+t.length)/2-l}}]),e}(),Vt={fam:"FAM",famille:"FAMILLE",sous_famille:"SOUS FAMILLE",caracteristiques:"CARACTERISTIQUES",designation:"DESIGNATION",unite_de_vente:"UNITE DE VENTE",min_cde:"MIN CDE",ref:"REF",prix_u_ht_emera:"PRIX U. HT",stock:"STOCK",tva:"TVA",fournisseur:"FOURNISSEUR",ref_frn:"REF FRN",pa_ht:"PA HT",marge:"MARGE"},qt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={disabled:!1,autoMatching:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"formatValue",value:function(e){var t=""+e;return t.length>30&&(t=t.substring(0,30)+"..."),t}},{key:"buildSelect",value:function(e){var t=this,a=Object.keys(this.props.fileData[0]),n=Gt.closest(e,a),l=a.map(function(e){var a=t.props.fileData[0][e];return r.a.createElement("option",{key:e+"-"+a,value:e},e," - ",t.formatValue(a))});return r.a.createElement("select",{key:Math.random(),className:"form-control column-select",defaultValue:this.state.autoMatching&&n&&n,onChange:function(e){return t.manageSelectChange(e)}},r.a.createElement("option",{value:""},this.props.intl.formatMessage({id:"Select"}),"..."),l)}},{key:"getSelColumn",value:function(e){var t=document.getElementById(e).firstChild;return t.options[t.selectedIndex].value}},{key:"onComplete",value:function(){this.setState({disabled:!0});for(var e={},t=Object.keys(Vt),a=0;a<t.length;a++){var n=t[a];e[n]=this.getSelColumn(n)}this.props.onComplete(e)}},{key:"manageSelectChange",value:function(e){this.updateSelectOptions()}},{key:"componentDidMount",value:function(){this.updateSelectOptions()}},{key:"updateSelectOptions",value:function(){var e=document.getElementsByClassName("column-select"),t=!0,a=!1,n=void 0;try{for(var r,l=e[Symbol.iterator]();!(t=(r=l.next()).done);t=!0)for(var i=r.value,s=0;s<i.length;s++)i.options[s].disabled=!1}catch(C){a=!0,n=C}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}var o=!0,c=!1,u=void 0;try{for(var m,d=e[Symbol.iterator]();!(o=(m=d.next()).done);o=!0){var p=m.value,h=p.value,f=!0,b=!1,E=void 0;try{for(var v,g=e[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var y=v.value;if(p!==y)for(var N=0;N<y.length;N++)""!==y.options[N].value&&y.options[N].value===h&&(y.options[N].disabled=!0)}}catch(C){b=!0,E=C}finally{try{f||null==g.return||g.return()}finally{if(b)throw E}}}}catch(C){c=!0,u=C}finally{try{o||null==d.return||d.return()}finally{if(c)throw u}}this.checkDisableButton()}},{key:"updateAutoMatching",value:function(){this.setState({autoMatching:!this.state.autoMatching},this.updateSelectOptions)}},{key:"checkDisableButton",value:function(){document.getElementById("submit-button").disabled=this.state.disabled||!this.selectsAllHaveValues()}},{key:"selectsAllHaveValues",value:function(){var e=document.getElementsByClassName("column-select"),t=!0,a=!1,n=void 0;try{for(var r,l=e[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(!i.value||""===i.value)return!1}}catch(s){a=!0,n=s}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}return!0}},{key:"render",value:function(){for(var e=this,t=[],a=Object.keys(Vt),n=0;n<a.length;n++){var l=a[n];t.push(r.a.createElement(r.a.Fragment,{key:l},r.a.createElement("label",{htmlFor:l,className:"col-sm-4 col-form-label"},Vt[l],"\xa0: "),r.a.createElement("div",{id:l,className:"col-sm-8 pb-3"},this.buildSelect(Vt[l]))))}for(var i=[],s=[],o=0;o<t.length;o++)o<=t.length/2?i.push(t[o]):s.push(t[o]);return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog modal-xl",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},r.a.createElement(u.b,{id:"Mercurials.Add.Some"})),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body text-left p-4"},r.a.createElement("h4",{className:"w-100 text-center"},r.a.createElement(u.b,{id:"Mercurials.Step2.Desc"})),r.a.createElement("h5",{className:"mb-4 w-100 text-center font-weight-light"},r.a.createElement(u.b,{id:"Mercurials.Step2.Read.1st.Line"})),r.a.createElement("div",{className:"custom-control custom-switch mx-auto switch-success mb-3"},r.a.createElement("input",{onChange:function(t){return e.updateAutoMatching()},type:"checkbox",className:"custom-control-input switch-bg-blue",id:"auto-matching",checked:this.state.autoMatching}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"auto-matching"},r.a.createElement(u.b,{id:"Mercurials.Auto.Detect"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-6"},r.a.createElement("div",{className:"form-group row"},i)),r.a.createElement("div",{className:"col-12 col-lg-6"},r.a.createElement("div",{className:"form-group row"},s)))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{id:"submit-button",type:"button",className:"btn btn-primary",onClick:function(){return e.onComplete()},disabled:this.state.disabled},r.a.createElement(u.b,{id:"Mercurials.Step.3"})))))))}}]),t}(r.a.Component),Wt=Object(c.b)(function(e){return{}},function(e){return{}})(Object(u.e)(qt)),Ht=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null,disabled:!1,summary:null,productFiles:null,familyFiles:null,declinedFiles:null,familiesWithNoImg:null,productsWithNoImg:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.state.summary||k.a.get(N.getMercImgOverview+this.props.mercurial._id).then(function(t){e.setState({familiesWithNoImg:t.data.familiesWithNoImg,productsWithNoImg:t.data.productsWithNoImg})})}},{key:"close",value:function(){this.props.closeModal()}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"onComplete",value:function(){this.setState({disabled:!0}),this.props.onComplete(this.props.mercurial._id,this.state.productFiles,this.state.familyFiles)}},{key:"onDropFiles",value:function(e){var t=[],a=[],n=[],r=this.getMercurialProducts(this.props.mercurial),l=!0,i=!1,s=void 0;try{e:for(var o,c=e[Symbol.iterator]();!(l=(o=c.next()).done);l=!0){var u=o.value,m=!0,d=!1,p=void 0;try{for(var h,f=r[Symbol.iterator]();!(m=(h=f.next()).done);m=!0){var b=h.value,E=It.withoutExtension(u.name);if(E===b.ref){t.push(u);continue e}if(E===b.fam.split(".")[0]){a.push(u);continue e}}}catch(v){d=!0,p=v}finally{try{m||null==f.return||f.return()}finally{if(d)throw p}}n.push(u)}}catch(v){i=!0,s=v}finally{try{l||null==c.return||c.return()}finally{if(i)throw s}}this.setState({productFiles:t,familyFiles:a,declinedFiles:n})}},{key:"disabled",value:function(){return this.state.disabled||T.emptyArray(this.state.productFiles)&&T.emptyArray(this.state.familyFiles)}},{key:"openMissingModal",value:function(e,t){var a=this,n=r.a.createElement(u.b,{id:"Mercurials.Missing.Items"}),l=null;e.length>0&&(l=r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(u.b,{id:"Mercurials.Missing.Families"})," :"),r.a.createElement("ul",null,e.map(function(e){return r.a.createElement("li",null,e.fam.split(".")[0]," : ",e.famille)}))));var i=null;t.length>0&&(i=r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(u.b,{id:"Mercurials.Missing.Products"})," :"),r.a.createElement("ul",null,t.map(function(e){var t=e.designation;return"-"===t[t.length-1]&&(t=t.slice(0,-1)),r.a.createElement("li",null,r.a.createElement("span",{className:"text-muted"},"(",e.famille,")")," ",e.ref," : ",t)}))));var s=r.a.createElement("span",null,l,i);this.setState({modal:r.a.createElement(K,{isOpen:!0,size:"xl",title:n,content:s,successCallback:function(){return a.closeModal()},closeModal:function(){return a.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"displayMissingImgs",value:function(){return!(this.state.productFiles||this.state.familyFiles||this.state.declinedFiles)&&(this.state.familiesWithNoImg&&this.state.productsWithNoImg&&(0!==this.state.familiesWithNoImg.length||0!==this.state.productsWithNoImg.length))}},{key:"getMercurialProducts",value:function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var l,i=this.props.products[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;s.mercurial_id===e._id&&t.push(s)}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t}},{key:"render",value:function(){var e=this,t=null;if(this.displayMissingImgs()){var a=null;0!==this.state.familiesWithNoImg.length&&(a=r.a.createElement("li",null,this.state.familiesWithNoImg.length," ",r.a.createElement(u.b,{id:"Mercurials.Missing.Family.Images"})));var n=null;0!==this.state.productsWithNoImg.length&&(n=r.a.createElement("li",null,this.state.productsWithNoImg.length," ",r.a.createElement(u.b,{id:"Mercurials.Missing.Product.Images"}))),t=r.a.createElement("div",{className:"alert alert-danger hoverable clickable",onClick:function(){return e.openMissingModal(e.state.familiesWithNoImg,e.state.productsWithNoImg)},role:"alert"},r.a.createElement(u.b,{id:"Mercurials.Missing"})," :",r.a.createElement("ul",{className:"pb-0 mb-0"},a,n))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog modal-lg",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},r.a.createElement(u.b,{id:"Mercurials.Import.Imgs"})),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body p-4"},r.a.createElement("h4",{className:"w-100 text-center "},r.a.createElement(u.b,{id:"Mercurials.Upload.Imgs"})),r.a.createElement("p",{className:"mb-3 w-100 text-center font-weight-light"},r.a.createElement(u.b,{id:"Mercurials.Upload.Imgs.Rules"})),r.a.createElement("p",{className:"mb-3 w-100 text-center font-weight-light text-success"},r.a.createElement(u.b,{id:"Mercurials.Upload.Imgs.Recommended.Dimensions"})),t,r.a.createElement(Rt,{onDropFiles:function(t){return e.onDropFiles(t)},acceptedExtensions:["jpg","png"],multiple:!0}),r.a.createElement("div",{className:"text-center pt-3"},r.a.createElement("span",{className:"text-success"},this.state.familyFiles&&r.a.createElement("span",null," ",this.state.familyFiles.length," ",r.a.createElement(u.b,{id:"Mercurials.Missing.Family.Images"})," / ")),r.a.createElement("span",{className:"text-success"},this.state.productFiles&&r.a.createElement("span",null," ",this.state.productFiles.length," ",r.a.createElement(u.b,{id:"Mercurials.Missing.Product.Images"})," / ")),r.a.createElement("span",{className:"text-danger"},this.state.declinedFiles&&r.a.createElement("span",null," ",this.state.declinedFiles.length," ",r.a.createElement(u.b,{id:"Mercurials.Invlid.Images"}))))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:this.disabled(),onClick:function(){return e.onComplete()}},r.a.createElement(u.b,{id:"Import"}))))))),this.state.modal)}}]),t}(r.a.Component),Yt=Object(c.b)(function(e){return{mercurials:e.mercurials,products:e.products}},function(e){return{}})(Ht),zt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={disabled:!1,file:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"onDropFile",value:function(e){this.setState({file:e})}},{key:"onComplete",value:function(){this.setState({disabled:!0}),this.props.onComplete(this.props.mercurial,this.state.file)}},{key:"disableButton",value:function(){return!this.state.file||this.state.disabled}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog modal-lg",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},r.a.createElement(u.b,{id:"Mercurials.Update"})),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body p-4"},r.a.createElement("h4",{className:"mb-3 w-100 text-center"},r.a.createElement(u.b,{id:"Mercurials.Update.Upload"})),r.a.createElement("p",{className:"mb-3 w-100 text-center font-weight-light"},r.a.createElement(u.b,{id:"Mercurials.Update.Upload.Info"})),r.a.createElement("div",{className:"card text-white bg-warning  mb-3"},r.a.createElement("div",{className:"card-header"},r.a.createElement("i",{className:"fa fa-warning mr-2"}),r.a.createElement(u.b,{id:"Mercurials.Update.Warning.Title"})),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},r.a.createElement(u.b,{id:"Mercurials.Update.Warning.Content"})))),r.a.createElement(Rt,{onDropFile:function(t){return e.onDropFile(t)},acceptedExtensions:["xls","xlsx"],multiple:!1})),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:this.disableButton(),onClick:function(){return e.onComplete()}},r.a.createElement(u.b,{id:"Update"})))))))}}]),t}(r.a.Component),Qt=Object(c.b)(function(e){return{}},function(e){return{}})(zt),Xt="GET_MERCURIAL";var Kt=function(e){return function(e){return k.a.get(N.getMercurials).then(function(t){var a;e((a=t.data,{type:Xt,mercurials:a}))}).catch(function(e){throw e})}},Jt=a(47),Zt=a.n(Jt),$t=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"save",value:function(e,t){var a=Zt.a.utils.book_new(),n=Zt.a.utils.aoa_to_sheet(e);Zt.a.utils.book_append_sheet(a,n,"SheetJS"),Zt.a.writeFile(a,t+".xlsx")}},{key:"toExcel",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=[],r=[],l=Object.keys(e[0]);e:for(var i=0;i<l.length;i++){var s=l[i],o=!0,c=!1,u=void 0;try{for(var m,d=a[Symbol.iterator]();!(o=(m=d.next()).done);o=!0){if(s===m.value)continue e}}catch(j){c=!0,u=j}finally{try{o||null==d.return||d.return()}finally{if(c)throw u}}r.push(t[s]||s)}n.push(r);var p=!0,h=!1,f=void 0;try{for(var b,E=e[Symbol.iterator]();!(p=(b=E.next()).done);p=!0){var v=b.value,g=[],y=Object.keys(v);e:for(var N=0;N<y.length;N++){var C=y[N],k=!0,O=!1,M=void 0;try{for(var S,x=a[Symbol.iterator]();!(k=(S=x.next()).done);k=!0){if(C===S.value)continue e}}catch(j){O=!0,M=j}finally{try{k||null==x.return||x.return()}finally{if(O)throw M}}g.push(v[C])}n.push(g)}}catch(j){h=!0,f=j}finally{try{p||null==E.return||E.return()}finally{if(h)throw f}}return n}},{key:"parse",value:function(e,t){var a=new FileReader;a.onload=function(e){var a=e.target.result,n=Zt.a.read(a,{type:"binary"});n.SheetNames.forEach(function(e){var a=Zt.a.utils.sheet_to_row_object_array(n.Sheets[e]);t(a)})},a.onerror=function(e){throw e},a.readAsBinaryString(e)}}]),e}(),ea=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"getMercurialProducts",value:function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var l,i=this.props.products[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;s.mercurial_id===e._id&&t.push(s)}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t}},{key:"download",value:function(e){var t=this.getMercurialProducts(e),a=$t.toExcel(t,Vt,["_id","__v","mercurial_id"]),n=It.toFileName(e.name);$t.save(a,n)}},{key:"render",value:function(){var e=this;if(!this.props.mercurial)return null;var t=this.props.mercurial,a=r.a.createElement(u.b,{id:"Confirm"}),n=r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{id:"Mercurial.Remove.Confirmation"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"card text-white bg-danger"},r.a.createElement("div",{className:"card-header"},r.a.createElement("i",{className:"fa fa-warning mr-2 text-white"}),r.a.createElement(u.b,{id:"Warning"})),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},r.a.createElement(u.b,{id:"Mercurials.Delete.Warning.Content"}))))),l=function(a){return e.props.onDeleteMercurial({mercurialId:t._id})},i=!1,s=!0,o=!1,c=void 0;try{for(var m,d=this.props.mercurials[Symbol.iterator]();!(s=(m=d.next()).done);s=!0){var p=m.value;if(p.name===t.name&&p.version>t.version){i=!0;break}}}catch(b){o=!0,c=b}finally{try{s||null==d.return||d.return()}finally{if(o)throw c}}var h=null;(i||t.version>1)&&(h=r.a.createElement("span",{className:"d-table-cell d-md-none"},"(",r.a.createElement(u.b,{id:"Version"})," ",t.version,")"));var f=new Date(t.end_date)<Date.now();return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{className:f?"font-italic text-muted":""},r.a.createElement("td",null,t.name,h),r.a.createElement("td",{className:"d-none d-md-table-cell"},ce.toDate(t.start_date)),r.a.createElement("td",{className:"d-none d-md-table-cell"},ce.toDate(t.end_date)),r.a.createElement("td",{className:"d-none d-sm-table-cell"},t.file_name),r.a.createElement("td",{className:"d-none d-md-table-cell"},t.version),r.a.createElement("td",{className:"text-center align-middle"},r.a.createElement("i",{className:"fa fa-upload icon-big",onClick:function(a){f||e.props.openMercurialUpdModal(t)},disabled:f}),r.a.createElement("i",{className:"fa fa-download icon-big",onClick:function(a){f||e.download(t)},disabled:f}),r.a.createElement("i",{className:"fa fa-file-image-o icon-big",onClick:function(a){f||e.props.openImgsModal(t)},disabled:f}),r.a.createElement("i",{className:"fa fa-trash icon-big",onClick:function(t){f||e.props.openConfModal(a,n,l)},disabled:f}))))}}]),t}(r.a.Component),ta=Object(c.b)(function(e){return{products:e.products}},function(e){return{onDeleteMercurial:function(t){return e(function(e){return function(t){return k.a.post(N.deleteMercurial,e).then(function(e){t(Kt()),t(ft()),t(F()),t(Tt()),t(ae()),t(Ve())}).catch(function(e){throw e})}}(t))}}})(ea),aa=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"confirm",value:function(){this.props.successCallback(),this.close()}},{key:"stopEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content border border-danger"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},r.a.createElement("i",{className:"fa fa-warning fa-big mr-3"}),this.props.title),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},this.props.content),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){return e.close()}},r.a.createElement(u.b,{id:"Ok"})))))))}}]),t}(r.a.Component),na=Object(c.b)(function(e){return{user:e.user}},function(e){return{}})(aa),ra=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null,mercurialName:null,fileName:null,fileData:null,startDate:null,endDate:null,columns:null,nameFilter:null,startDateFilter:null,endDateFilter:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openMercurialImportModal",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.setState({modal:r.a.createElement(Bt,{closeModal:function(){return t.closeModal()},onComplete:function(e,a,n,r){return t.onCompleteStep1(e,a,n,r)}})})}},{key:"onCompleteStep1",value:function(e,t,a,n){var l=this;$t.parse(t,function(i){l.setState({mercurialName:e,fileName:t.name,fileData:i,startDate:a,endDate:n}),l.closeModal(),l.isCorrupt(i)?l.openCorruptFileModal():l.setState({modal:r.a.createElement(Wt,{closeModal:function(){return l.closeModal()},fileData:i,onComplete:function(e){return l.onCompleteStep2(e)}})})})}},{key:"isCorrupt",value:function(e){var t=0,a=!0,n=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;t=Math.max(t,Object.keys(s).length)}}catch(E){n=!0,r=E}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}var o=!0,c=!1,u=void 0;try{for(var m,d=e[Symbol.iterator]();!(o=(m=d.next()).done);o=!0){var p=m.value;if(Object.keys(p).length!==t)return!0;for(var h=Object.keys(p),f=0;f<h.length;f++){var b=h[f];if(void 0===p[b]||null===p[b]||""===p[b])return!0}}}catch(E){c=!0,u=E}finally{try{o||null==d.return||d.return()}finally{if(c)throw u}}return!1}},{key:"openCorruptFileModal",value:function(){var e=this,t=r.a.createElement(u.b,{id:"Error"}),a=r.a.createElement(u.b,{id:"Mercurial.File.Corrupt"});this.setState({mercurialName:null,fileName:null,fileData:null,startDate:null,endDate:null,columns:null,modal:r.a.createElement(na,{isOpen:!0,title:t,content:a,closeModal:function(){return e.closeModal()}})})}},{key:"onCompleteStep2",value:function(e){var t=this;this.setState({columns:e});this.addMercurial(this.state.mercurialName,this.state.fileName,this.state.fileData,this.state.startDate,this.state.endDate,e,function(e){t.closeModal(),t.openImgsModal(e)})}},{key:"addMercurial",value:function(e,t,a,n,r,l,i){var s={name:e,fileName:t,startDate:n,endDate:r,products:this.fixProductsCols(a,l)};this.props.onaddMercurial(s,i)}},{key:"fixProductsCols",value:function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){for(var o=i.value,c={},u=Object.keys(t),m=0;m<u.length;m++){var d=u[m];c[d]=o[t[d]]}a.push(c)}}catch(p){r=!0,l=p}finally{try{n||null==s.return||s.return()}finally{if(r)throw l}}return a}},{key:"openConfModal",value:function(e,t,a){var n=this;this.setState({modal:r.a.createElement(K,{isOpen:!0,title:e,size:"xl",content:t,successCallback:a,closeModal:function(){return n.closeModal()}})})}},{key:"openImgsModal",value:function(e){var t=this;this.setState({modal:r.a.createElement(Yt,{closeModal:function(){return t.closeModal()},onComplete:function(e,a,n){return t.uploadImgs(e,a,n)},mercurial:e})})}},{key:"uploadImgs",value:function(e,t,a){var n=this;!function(a){if(!t||0===t.length)return a();var r=new FormData,l=!0,i=!1,s=void 0;try{for(var o,c=t[Symbol.iterator]();!(l=(o=c.next()).done);l=!0){var u=o.value;r.append(u.name,u)}}catch(m){i=!0,s=m}finally{try{l||null==c.return||c.return()}finally{if(i)throw s}}n.props.onAddProductsImgs(e,r,a)}(function(){return function(t){if(!a||0===a.length)return t();var r=new FormData,l=!0,i=!1,s=void 0;try{for(var o,c=a[Symbol.iterator]();!(l=(o=c.next()).done);l=!0){var u=o.value;r.append(u.name,u)}}catch(m){i=!0,s=m}finally{try{l||null==c.return||c.return()}finally{if(i)throw s}}n.props.onAddFamilyImgs(e,r,t)}(function(){return n.closeModal()})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"openMercurialUpdModal",value:function(e){var t=this;this.setState({modal:r.a.createElement(Qt,{mercurial:e,closeModal:function(){return t.closeModal()},onComplete:function(e,a){return t.onUpd(e,a)}})})}},{key:"onUpd",value:function(e,t){var a=this;$t.parse(t,function(n){if(a.isCorrupt(n))a.closeModal(),a.openCorruptFileModal();else{if(!n[0])return void a.closeModal();for(var r={},l=Object.keys(Vt),i=0;i<l.length;i++){var s=l[i],o=Gt.closest(Vt[s],Object.keys(n[0]));if(!o)return void a.openCorruptFileModal();r[s]=o}var c=a.fixProductsCols(n,r);a.props.onUpdateMercurial({mercurialId:e._id,fileName:t.name,products:c},function(){return a.closeModal()})}})}},{key:"render",value:function(){var e=this;if(0===this.props.mercurials.length)return r.a.createElement(r.a.Fragment,null,this.state.modal,r.a.createElement("span",{onClick:function(t){return e.openMercurialImportModal(t)},className:"iconed-btn hoverable clickable"},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Mercurials.Add.Some"})))),r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},r.a.createElement(u.b,{id:"Empty.Mercurials"})));var t=this.props.mercurials.map(function(t){return e.state.nameFilter&&""!==e.state.nameFilter&&-1===t.name.indexOf(e.state.nameFilter)?null:e.state.startDateFilter&&""!==e.state.startDateFilter&&new Date(t.start_date)<new Date(e.state.startDateFilter)?null:e.state.endDateFilter&&""!==e.state.endDateFilter&&new Date(t.end_date)<new Date(e.state.endDateFilter)?null:r.a.createElement(ta,{key:t.name+"-"+t.version,mercurial:t,mercurials:e.props.mercurials,openMercurialUpdModal:function(t){return e.openMercurialUpdModal(t)},openConfModal:function(t,a,n){return e.openConfModal(t,a,n)},openImgsModal:function(t){return e.openImgsModal(t)}})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:function(t){return e.openMercurialImportModal(t)},className:"iconed-btn hoverable clickable"},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Mercurials.Add.Some"})))),r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(u.b,{id:"Name"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Start.Date"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"End.Date"})),r.a.createElement("th",{className:"d-none d-sm-table-cell"},r.a.createElement(u.b,{id:"File"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Version"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})))),r.a.createElement("tbody",null,r.a.createElement("tr",{className:"d-none d-xl-table-row filter-row"},r.a.createElement("td",null,r.a.createElement("input",{className:"form-control",type:"search",onChange:function(t){e.setState({nameFilter:t.target.value})}})),r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("input",{className:"form-control",type:"date",onChange:function(t){e.setState({startDateFilter:t.target.value})}})),r.a.createElement("td",{className:"d-none d-lg-table-cell"},r.a.createElement("input",{className:"form-control",type:"date",onChange:function(t){e.setState({endDateFilter:t.target.value})}})),r.a.createElement("td",{className:"d-none d-sm-table-cell"}),r.a.createElement("td",{className:"d-none d-md-table-cell"}),r.a.createElement("td",null)),t)),this.state.modal)}}]),t}(r.a.Component),la=Object(c.b)(function(e){return{mercurials:e.mercurials}},function(e){return{onaddMercurial:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.addMercurial,e).then(function(e){return a(Kt()),a(ft()),t(e.data)}).catch(function(e){throw e})}}(t,a))},onAddProductsImgs:function(t,a,n){return e(function(e,t,a){return function(n){return k.a.post(N.addProductsImgs+e,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return a()}).catch(function(e){throw e})}}(t,a,n))},onAddFamilyImgs:function(t,a,n){return e(function(e,t,a){return function(n){return k.a.post(N.addFamilyImgs+e,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return a()}).catch(function(e){throw e})}}(t,a,n))},onUpdateMercurial:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.updateMercurial,e).then(function(e){return a(Kt()),a(ft()),a(F()),a(Tt()),a(ae()),a(Ve()),t(e.data)}).catch(function(e){throw e})}}(t,a))}}})(ra),ia=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-6 h-200"},r.a.createElement("input",{type:"text",id:"barcode"}),r.a.createElement("button",{onClick:window.scan()},"Scan a barcode")),r.a.createElement("div",{className:"col-12 col-lg-6 h-200"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-6 h-200"}),r.a.createElement("div",{className:"col-12 col-lg-6 h-200"})))}}]),t}(r.a.Component),sa=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-6 h-200"}),r.a.createElement("div",{className:"col-12 col-lg-6 h-200"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-6 h-200"}),r.a.createElement("div",{className:"col-12 col-lg-6 h-200"})))}}]),t}(r.a.Component),oa=a(64),ca="GET_ESTABLISHMENT_TYPES";var ua=function(){return function(e){return k.a.get(N.getEstablishmentTypes).then(function(t){var a;e((a=t.data,{type:ca,establishmentTypes:a}))}).catch(function(e){throw e})}},ma=a(207),da=a.n(ma),pa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={option:null},a.props.defaultOption&&(a.state={option:a.formatOption(a.getOptionById(a.props.defaultOption))}),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"getOptionById",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.options[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(i._id===e)return i}}catch(s){a=!0,n=s}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}}},{key:"formatOptions",value:function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;t.push(this.formatOption(s))}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t}},{key:"formatOption",value:function(e){return{value:e._id,label:e.name}}},{key:"createOption",value:function(e){var t=this;if(!T.emptyString(e)){this.props.onCreateOption({name:e},function(e){t.setState({option:t.formatOption(e)}),t.props.onChange(e._id)})}}},{key:"onChange",value:function(e){this.setState({option:e}),this.props.onChange(e.value)}},{key:"onBlur",value:function(){this.state.option&&this.props.onBlur(this.state.option.value)}},{key:"render",value:function(){var e=this,t=this.formatOptions(this.props.options);return r.a.createElement(da.a,{menuPlacement:this.props.placement||"auto",onCreateOption:function(t){return e.createOption(t)},onChange:function(t){return e.onChange(t)},onBlur:function(){return e.onBlur()},value:this.state.option,options:t,noOptionsMessage:function(e){return r.a.createElement(u.b,{id:"No.Options"})},formatCreateLabel:function(e){return r.a.createElement(u.b,{id:"Create.Val",values:{val:e}})},placeholder:r.a.createElement(u.b,{id:"Select"})})}}]),t}(r.a.Component),ha=function(e){function t(e){var a;Object(d.a)(this,t);var n=(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).props.establishment||{};a.state={name:n.name||"",email:n.email||"",phone:n.phone||"",address:n.address||"",address_compl:n.address_compl||"",postal_code:n.postal_code||"",city:n.city||"",website:n.website||"",type_id:n.type_id||"",nameError:null,disabled:!1},a.GOOGLE_MAP_API_KEY="AIzaSyBxMSAT2ijMVaod_XWLk2eto1h3B8_mlSA";return a.mapComponent=Object(oa.withScriptjs)(Object(oa.withGoogleMap)(function(e){return r.a.createElement(oa.GoogleMap,{defaultZoom:5,defaultCenter:{lat:48.8534,lng:2.3488}},e.isMarkerShown&&r.a.createElement(oa.Marker,{position:{lat:48.8534,lng:2.3488}}))})),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"onFieldChange",value:function(e,t){if(this.setState(Object(Re.a)({},e,t)),"name"===e){if(!this.isNameUnique(t))return void this.setState({nameError:r.a.createElement(u.b,{id:"Establishment.Name.Already.Exists"})});this.setState({nameError:null})}}},{key:"sendUpdate",value:function(e,t){this.props.establishment&&!this.disabled()&&this.props.onUpdateEstablishment({establishmentId:this.props.establishment._id,updatedField:e,updatedValue:t})}},{key:"isNameUnique",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.establishments[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(i.name.toLowerCase()===e.toLowerCase()){if(this.props.establishment&&this.props.establishment._id===i._id)continue;return!1}}}catch(s){a=!0,n=s}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}return!0}},{key:"onAddressBlur",value:function(){this.state.address}},{key:"onSubmit",value:function(){var e=this,t={name:this.state.name,email:this.state.email,phone:this.state.phone,address:this.state.address,address_compl:this.state.address_compl,postal_code:this.state.postal_code,city:this.state.city,website:this.state.website,type_id:this.state.type_id};this.props.onAddEstablishment(t,function(t){e.props.closeModal(),e.props.openModal(t)})}},{key:"disabled",value:function(){return T.emptyString(this.state.name)||!this.isNameUnique(this.state.name)||this.state.disabled}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-12 col-lg-6"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"establishment-name",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Establishment"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"establishment-name",autoComplete:"off",value:this.state.name,onChange:function(t){return e.onFieldChange("name",t.target.value)},onBlur:function(t){return e.sendUpdate("name",t.target.value)}}),this.state.nameError&&r.a.createElement("div",{className:"text-danger"},r.a.createElement("small",null,this.state.nameError)))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"establishment-email",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Email"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"email",className:"form-control",id:"establishment-email",autoComplete:"off",value:this.state.email,onChange:function(t){return e.onFieldChange("email",t.target.value)},onBlur:function(t){return e.sendUpdate("email",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"establishment-phone",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Phone"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"establishment-phone",autoComplete:"off",value:this.state.phone,onChange:function(t){return e.onFieldChange("phone",t.target.value)},onBlur:function(t){return e.sendUpdate("phone",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"establishment-address",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Address"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"establishment-address",autoComplete:"off",value:this.state.address,onChange:function(t){return e.onFieldChange("address",t.target.value)},onBlur:function(t){return e.sendUpdate("address",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"establishment-address-compl",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Address.Compl"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"establishment-address-compl",autoComplete:"off",value:this.state.address_compl,onChange:function(t){return e.onFieldChange("address_compl",t.target.value)},onBlur:function(t){return e.sendUpdate("address_compl",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"establishment-postal-code",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Postal.Code"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"number",className:"form-control",id:"establishment-postal-code",autoComplete:"off",value:this.state.postal_code,onChange:function(t){return e.onFieldChange("postal_code",t.target.value)},onBlur:function(t){return e.sendUpdate("postal_code",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"establishment-city",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"City"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"establishment-city",autoComplete:"off",value:this.state.city,onChange:function(t){return e.onFieldChange("city",t.target.value)},onBlur:function(t){return e.sendUpdate("city",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"establishment-website",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Website"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"establishment-city",autoComplete:"off",value:this.state.website,onChange:function(t){return e.onFieldChange("website",t.target.value)},onBlur:function(t){return e.sendUpdate("website",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"establishment-type-id",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Type"})),r.a.createElement("div",{id:"establishment-type-id",className:"col-12 col-md-7"},r.a.createElement(pa,{menuPlacement:"top",onChange:function(t){return e.onFieldChange("type_id",t)},onBlur:function(t){return e.sendUpdate("type_id",t)},defaultOption:this.state.type_id,options:this.props.establishmentTypes,onCreateOption:function(t,a){return e.props.onAddEstablishmentType(t,a)}})))),r.a.createElement("div",{className:"col-12 col-lg-6"},r.a.createElement(this.mapComponent,{isMarkerShown:!0,googleMapURL:"https://maps.googleapis.com/maps/api/js?key="+this.GOOGLE_MAP_API_KEY+"&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}))),r.a.createElement("div",{className:"row"},!this.props.establishment&&r.a.createElement("div",{className:"col-12 col-lg-6 offset-lg-3"},r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.disabled(),onClick:function(){return e.onSubmit()}},r.a.createElement(u.b,{id:"Add"})))))}}]),t}(r.a.Component),fa=Object(c.b)(function(e){return{establishments:e.establishments,establishmentTypes:e.establishmentTypes}},function(e){return{onAddEstablishment:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.addEstablishment,e).then(function(e){a(gt()),a(Ve()),t(e.data)}).catch(function(e){throw e})}}(t,a))},onUpdateEstablishment:function(t){return e(function(e){return function(t){return k.a.post(N.updateEstablishment,e).then(function(e){t(gt())}).catch(function(e){throw e})}}(t))},onAddEstablishmentType:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.addEstablishmentType,e).then(function(e){a(ua()),t(e.data)}).catch(function(e){throw e})}}(t,a))}}})(ha),ba="GET_PAYMENT_METHODS";var Ea=function(){return function(e){return k.a.get(N.getPaymentMethods).then(function(t){var a;e((a=t.data,{type:ba,paymentMethods:a}))}).catch(function(e){throw e})}},va="GET_PAYMENT_DEADLINES";var ga=function(){return function(e){return k.a.get(N.getPaymentDeadlines).then(function(t){var a;e((a=t.data,{type:va,paymentDeadlines:a}))}).catch(function(e){throw e})}},ya=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).START_YEAR=2019,a.END_YEAR=2025,a.YEARS=a.getYears(a.START_YEAR,a.END_YEAR),a.state={year:a.START_YEAR,budget:0,budgetError:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"onChange",value:function(e,t){"budget"===e&&!T.emptyString(t)&&parseInt(t)>=0&&this.setState({budgetError:null}),this.setState(Object(Re.a)({},e,t))}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"getYears",value:function(e,t){for(var a=[];e<=t;e++)a.push(e);return a}},{key:"onComplete",value:function(){if(T.emptyString(this.state.budget))this.setState({budgetError:r.a.createElement(u.b,{id:"Must.Provide.Value"})});else if(parseInt(this.state.budget)<0)this.setState({budgetError:r.a.createElement(u.b,{id:"Must.Provide.Positive.Value"})});else if(this.props.budgets&&0!==this.props.budgets.length){var e=!1,t=!0,a=!1,n=void 0;try{for(var l,i=this.props.budgets[Symbol.iterator]();!(t=(l=i.next()).done);t=!0){var s=l.value;if(parseInt(s.year)===parseInt(this.state.year)){s.budget=this.state.budget,e=!0;break}}}catch(o){a=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}e||this.props.budgets.push({year:this.state.year,budget:this.state.budget}),this.props.onComplete(this.props.budgets)}else this.props.onComplete([{year:this.state.year,budget:this.state.budget}])}},{key:"hasYear",value:function(e,t){if(T.emptyArray(t))return!1;var a=!0,n=!1,r=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;if(parseInt(e)===parseInt(s.year))return!0}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return!1}},{key:"getBudget",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.budgets[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(parseInt(e)===parseInt(i.year))return i.budget}}catch(s){a=!0,n=s}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}}},{key:"getDefaultYear",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,r=this.YEARS[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var l=n.value;if(!this.hasYear(l,this.props.budgets))return l}}catch(i){t=!0,a=i}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}}},{key:"componentWillMount",value:function(){var e=0,t=this.getDefaultYear();this.props.year&&(e=this.getBudget(this.props.year),t=this.props.year),this.setState({year:t,budget:e})}},{key:"render",value:function(){var e=this,t=this.YEARS.map(function(t){var a=e.hasYear(t,e.props.budgets);return r.a.createElement("option",{key:t,value:t,disabled:a},t)}),a=r.a.createElement(u.b,{id:"Add.Annual.Budget"});return this.props.year&&(a=r.a.createElement(u.b,{id:"Modify.Annual.Budget"})),r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.props.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.props.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"year",className:"col-5 col-form-label"},r.a.createElement(u.b,{id:"Year"})),r.a.createElement("div",{className:"col-7"},r.a.createElement("select",{id:"year",className:"form-control",defaultValue:this.state.year,disabled:this.props.year,onChange:function(t){return e.onChange("year",t.target.value)}},t))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"budget",className:"col-5 col-form-label"},r.a.createElement(u.b,{id:"Budget"})),r.a.createElement("div",{className:"col-7"},r.a.createElement("input",{id:"budget",type:"number",className:"form-control",value:this.state.budget,onChange:function(t){return e.onChange("budget",t.target.value)},onBlur:function(){return e.onComplete()}}),r.a.createElement("div",{className:"text-danger"},r.a.createElement("small",null,this.state.budgetError))))),!this.props.year&&r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.props.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.onComplete()}},r.a.createElement(u.b,{id:"Create"})))))))}}]),t}(r.a.Component),Na=Object(c.b)(function(e){return{}},function(e){return{}})(ya),Ca=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"sortByDateAsc",value:function(e,t){return e.year<t.year?-1:e.year>t.year?1:0}},{key:"deleteBudget",value:function(e){var t=this;this.setState({modal:r.a.createElement(K,{isOpen:!0,content:r.a.createElement(u.a,{id:"Remove.Row.Confirmation"}),successCallback:function(){return function(){for(var a=0;a<t.props.budgets.length;a++)if(parseInt(t.props.budgets[a].year)===parseInt(e)){t.props.budgets.splice(a,1);break}t.props.updateBudgets(t.props.budgets)}()},closeModal:function(){return t.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"editBudget",value:function(e){this.props.editBudget(e)}},{key:"render",value:function(){var e=this,t=this.props.budgets.sort(this.sortByDateAsc).map(function(t){return r.a.createElement("tr",{key:t.year},r.a.createElement("th",null,t.year),r.a.createElement("th",null,t.budget,"\u20ac"),r.a.createElement("td",{className:"text-center"},r.a.createElement("i",{className:"fa fa-edit icon-big",onClick:function(){return e.editBudget(t.year)}}),r.a.createElement("i",{className:"fa fa-trash icon-big",onClick:function(a){return e.deleteBudget(t.year)}})))});return r.a.createElement(r.a.Fragment,null,this.state.modal,r.a.createElement("table",{className:"table table-striped table-bordered col-12"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(u.a,{id:"Year"})),r.a.createElement("th",null,r.a.createElement(u.a,{id:"Budget"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})))),r.a.createElement("tbody",null,t)),this.state.modal)}}]),t}(r.a.Component),ka=Object(c.b)(function(e){return{lang:e.user.lang}},function(e){return{}})(Ca),Oa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={payment_method_id:"",payment_deadline_id:"",mercurial_id:"",shipping_delay:"",min_order_amount:"",modal:null,disabled:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.fixWithDefaultValues()}},{key:"fixWithDefaultValues",value:function(){if(this.props.establishmentSettings)for(var e=Object.keys(this.state),t=0;t<e.length;t++){var a=e[t];T.emptyString(this.state[a])&&!T.emptyString(this.props.establishmentSettings[a])&&this.setState(Object(Re.a)({},a,this.props.establishmentSettings[a]))}}},{key:"onFieldChange",value:function(e,t){this.setState(Object(Re.a)({},e,t))}},{key:"sendUpdate",value:function(e,t){var a=this,n={establishmentId:this.props.establishment._id,updatedField:e,updatedValue:t};this.props.onUpdateEstablishmentSettings(n,function(){return a.fixWithDefaultValues()})}},{key:"openAnnualBudgetModal",value:function(e){var t=this,a=this.props.establishmentSettings?this.props.establishmentSettings.budgets:null;this.setState({modal:r.a.createElement(Na,{budgets:a,year:e,close:function(){return t.closeModal()},onComplete:function(e){t.sendUpdate("budgets",e),t.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"render",value:function(){var e=this,t=new Date(Date.now()),a=this.props.mercurials.map(function(e){if(new Date(e.start_date)>t||new Date(e.end_date)<t)return null;var a=null;return 1!==e.version&&(a="(v"+e.version+")"),r.a.createElement("option",{key:e._id,value:e._id},e.name," ",a," ")}),n=null;return this.props.establishmentSettings&&this.props.establishmentSettings.budgets&&this.props.establishmentSettings.budgets.length>0&&(n=r.a.createElement(ka,{budgets:this.props.establishmentSettings.budgets,editBudget:function(t){return e.openAnnualBudgetModal(t)},updateBudgets:function(t){return e.sendUpdate("budgets",t)}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-12 col-lg-12 col-xl-9"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"conf-payment-method",className:"col-12 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Payment.Method"})),r.a.createElement("div",{className:"col-12 col-md-5"},r.a.createElement(pa,{menuPlacement:"auto",onChange:function(t){return e.onFieldChange("payment_method_id",t)},onBlur:function(t){return e.sendUpdate("payment_method_id",t)},defaultOption:this.state.payment_method_id,options:this.props.paymentMethods,onCreateOption:function(t,a){return e.props.onAddPaymentMethod(t,a)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"conf-payment-deadline",className:"col-12 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Payments.Deadline"})),r.a.createElement("div",{className:"col-12 col-md-5"},r.a.createElement(pa,{menuPlacement:"auto",onChange:function(t){return e.onFieldChange("payment_deadline_id",t)},onBlur:function(t){return e.sendUpdate("payment_deadline_id",t)},defaultOption:this.state.payment_deadline_id,options:this.props.paymentDeadlines,onCreateOption:function(t,a){return e.props.onAddPaymentDeadline(t,a)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"conf-mercurial",className:"col-12 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Mercurial"})),r.a.createElement("div",{className:"col-12 col-md-5"},r.a.createElement("select",{id:"conf-mercurial",className:"form-control w-100",defaultValue:this.state.mercurial_id,onChange:function(t){return e.onFieldChange("mercurial_id",t.target.value)},onBlur:function(t){return e.sendUpdate("mercurial_id",t.target.value)}},r.a.createElement("option",{value:""},this.props.intl.formatMessage({id:"Select"})),a))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"shippingDelay",className:"col-12 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Shipping.Delay"})),r.a.createElement("div",{className:"col-12 col-md-5"},r.a.createElement("input",{type:"number",className:"form-control",id:"shippingDelay",min:"0",value:this.state.shipping_delay,onChange:function(t){return e.onFieldChange("shipping_delay",t.target.value)},onBlur:function(t){return e.sendUpdate("shipping_delay",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"minPrice",className:"col-12 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Min.Price"})),r.a.createElement("div",{className:"col-12 col-md-5"},r.a.createElement("input",{type:"number",className:"form-control",id:"minPrice",min:"0",value:this.state.min_order_amount,onChange:function(t){return e.onFieldChange("min_order_amount",t.target.value)},onBlur:function(t){return e.sendUpdate("min_order_amount",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"shippingCost",className:"col-10 col-sm-11 col-md-7 col-form-label"},r.a.createElement(u.b,{id:"Annual.Budgets"})),r.a.createElement("div",{className:"col-2 col-sm-1 col-md-5"},r.a.createElement("i",{className:"fa fa-plus-square icon-big hoverable clickable p-0 pt-2",onClick:function(t){return e.openAnnualBudgetModal()}}))),n)),this.state.modal)}}]),t}(r.a.Component),Ma=Object(c.b)(function(e){return{paymentMethods:e.paymentMethods,paymentDeadlines:e.paymentDeadlines,mercurials:e.mercurials}},function(e){return{onAddPaymentMethod:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.addPaymentMethod,e).then(function(e){a(Ea()),t(e.data)}).catch(function(e){throw e})}}(t,a))},onAddPaymentDeadline:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.addPaymentDeadline,e).then(function(e){a(ga()),t(e.data)}).catch(function(e){throw e})}}(t,a))},onUpdateEstablishmentSettings:function(t,a){return e(qe(t,a))}}})(Object(u.e)(Oa)),Sa=function(e){function t(e){var a;if(Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).props.user){var n=a.props.user;a.state={username:n.username,name:n.name,firstname:n.first_name,function:n.function,email:n.email,phone:n.phone,validator:n.validator,usernameError:null,nameError:null,firstnameError:null,emailError:null,disabled:!1}}else a.state={username:"",name:"",firstname:"",function:"",email:"",phone:"",validator:!1,usernameError:null,nameError:null,firstnameError:null,emailError:null,disabled:!1};return a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"scanErrors",value:function(e){var t=this,a=T.emptyString(this.state.username),n=T.emptyString(this.state.name),l=T.emptyString(this.state.firstname),i=T.emptyString(this.state.email);if(a&&this.setState({usernameError:r.a.createElement(u.b,{id:"Empty.Username"})}),n&&this.setState({nameError:r.a.createElement(u.b,{id:"Empty.Name"})}),l&&this.setState({firstnameError:r.a.createElement(u.b,{id:"Empty.FirstName"})}),i&&this.setState({emailError:r.a.createElement(u.b,{id:"Empty.Email"})}),T.isEmail(this.state.email)||this.setState({emailError:r.a.createElement(u.b,{id:"Invalid.Email"})}),this.props.user)return a||n||l||l?void 0:e();this.props.onCheckIfUsernameExists(this.state.username,function(){t.setState({usernameError:r.a.createElement(u.b,{id:"Username.Already.Exists"})})},function(){return t.props.onCheckIfEmailExists(t.state.email,function(){t.setState({emailError:r.a.createElement(u.b,{id:"Email.Already.Exists"})})},function(){if(!a&&!n&&!l&&!l)return e()})})}},{key:"onComplete",value:function(){var e=this;this.scanErrors(function(){var t={username:e.state.username,name:e.state.name,first_name:e.state.firstname,function:e.state.function,email:e.state.email,validator:e.state.validator,phone:e.state.phone,establishment_id:e.props.establishment._id};e.setState({disabled:!0}),e.props.onAddClient(t,function(){return e.props.close()})})}},{key:"update",value:function(e){var t=this;if(this.props.user){this.scanErrors(function(){var a={clientId:t.props.user._id,updatedField:e,updatedValue:t.state[e]};t.props.onUpdateClient(a)})}}},{key:"onFieldChange",value:function(e,t){var a=this;"validator"===e?this.setState({validator:!this.state.validator}):this.setState(Object(Re.a)({},e,t)),"name"!==e||T.emptyString(t)||this.setState({nameError:null}),"firstname"!==e||T.emptyString(t)||this.setState({firstnameError:null}),"username"!==e||T.emptyString(t)||(this.setState({usernameError:null}),this.props.onCheckIfUsernameExists(t,function(){a.setState({usernameError:r.a.createElement(u.b,{id:"Username.Already.Exists"})})},function(){})),"email"!==e||T.emptyString(t)||(this.setState({emailError:null}),this.props.onCheckIfEmailExists(t,function(){a.setState({emailError:r.a.createElement(u.b,{id:"Email.Already.Exists"})})},function(){}))}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.props.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},this.props.user?r.a.createElement(u.b,{id:"Modify.User"}):r.a.createElement(u.b,{id:"Add.User"})),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.props.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"user-username",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Username"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"user-username",autoComplete:"off",value:this.state.username,disabled:this.props.user,onChange:function(t){return e.onFieldChange("username",t.target.value)}}),r.a.createElement("div",{className:"text-danger"},r.a.createElement("small",null,this.state.usernameError)))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"user-name",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Name"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"user-name",autoComplete:"off",value:this.state.name,onChange:function(t){return e.onFieldChange("name",t.target.value)},onBlur:function(t){return e.update("name")}}),r.a.createElement("div",{className:"text-danger"},r.a.createElement("small",null,this.state.nameError)))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"user-firstname",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"First.Name"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"user-firstname",autoComplete:"off",value:this.state.firstname,onChange:function(t){return e.onFieldChange("firstname",t.target.value)},onBlur:function(t){return e.update("firstname")}}),r.a.createElement("div",{className:"text-danger"},r.a.createElement("small",null,this.state.firstnameError)))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"user-function",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Function"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"user-function",autoComplete:"off",value:this.state.function,onChange:function(t){return e.onFieldChange("function",t.target.value)},onBlur:function(t){return e.update("function")}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"user-email",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Email"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"user-email",autoComplete:"off",value:this.state.email,disabled:this.props.user,onChange:function(t){return e.onFieldChange("email",t.target.value)}}),r.a.createElement("div",{className:"text-danger"},r.a.createElement("small",null,this.state.emailError)))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"user-phone",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Phone"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"user-phone",autoComplete:"off",value:this.state.phone,onChange:function(t){return e.onFieldChange("phone",t.target.value)},onBlur:function(t){return e.update("phone")}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-12 col-md-5 custom-control-label no-after no-before"},r.a.createElement(u.b,{id:"Validator"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("div",{className:"custom-control custom-switch mx-auto switch-success text-left"},r.a.createElement("input",{onChange:function(t){return e.onFieldChange("validator",t.target.value)},type:"checkbox",id:"validator-switch",className:"custom-control-input switch-bg-blue",checked:this.state.validator,onBlur:function(t){return e.update("validator")}}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"validator-switch"}))))),!this.props.user&&r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.props.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:this.state.disabled,onClick:function(){return e.onComplete()}},r.a.createElement(u.b,{id:"Add"})))))))}}]),t}(r.a.Component),xa=Object(c.b)(function(e){return{}},function(e){return{onAddClient:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.addClient,e).then(function(e){a(Et()),t()}).catch(function(e){throw e})}}(t,a))},onCheckIfUsernameExists:function(t,a,n){return e(function(e,t,a){return function(n){return k.a.get(N.checkIfUsernameExists+e).then(function(e){200===e.status?t():a()})}}(t,a,n))},onCheckIfEmailExists:function(t,a,n){return e(function(e,t,a){return function(n){return k.a.get(N.checkIfEmailExists+e).then(function(e){200===e.status?t():a()})}}(t,a,n))},onUpdateClient:function(t){return e(function(e){return function(t){return k.a.post(N.updateClient,e).then(function(e){t(Et())}).catch(function(e){throw e})}}(t))}}})(Sa),ja=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openModal",value:function(e){var t=this;this.setState({modal:r.a.createElement(xa,{user:e,establishment:this.props.establishment,close:function(){return t.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"render",value:function(){var e=this,t=this.props.clients.map(function(t){return r.a.createElement("tr",{className:"break-word",key:t._id},r.a.createElement("td",{className:"d-none d-lg-table-cell"},t.username),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.first_name),r.a.createElement("td",{className:"d-none d-lg-table-cell"},t.email),r.a.createElement("td",{className:"d-none d-lg-table-cell"},t.function),r.a.createElement("td",{className:"d-none d-md-table-cell text-center"},t.validator?r.a.createElement("i",{className:"fa fa-check"}):r.a.createElement("i",{className:"fa fa-close"})),r.a.createElement("td",{className:"text-center"},r.a.createElement("i",{className:"fa fa-edit icon-big",onClick:function(a){return e.openModal(t)}})))}),a="table table-striped table-bordered";return this.props.cssStyle&&(a=this.props.cssStyle),r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:a},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Username"})),r.a.createElement("th",{className:""},r.a.createElement(u.b,{id:"Name"})),r.a.createElement("th",{className:""},r.a.createElement(u.b,{id:"First.Name"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Email"})),r.a.createElement("th",{className:"d-none d-lg-table-cell"},r.a.createElement(u.b,{id:"Function"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Validator"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})))),r.a.createElement("tbody",null,t)),this.state.modal)}}]),t}(r.a.Component),_a=Object(c.b)(function(e){return{}},function(e){return{}})(ja),wa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"openModal",value:function(){var e=this;this.setState({modal:r.a.createElement(xa,{establishment:this.props.establishment,close:function(){return e.closeModal()}})})}},{key:"render",value:function(){var e=this;return 0===this.props.clients.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{href:"#/",className:"iconed-btn hoverable clickable",onClick:function(t){return e.openModal()}},r.a.createElement("span",{className:"mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"User.Add"})))),r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},r.a.createElement(u.b,{id:"Empty.Users"})),this.state.modal):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{href:"#/",className:"iconed-btn hoverable clickable",onClick:function(t){return e.openModal()}},r.a.createElement("span",{className:"mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"User.Add"})))),r.a.createElement(_a,{clients:this.props.clients}),this.state.modal)}}]),t}(r.a.Component),Fa=Object(c.b)(function(e){return{}},function(e){return{}})(wa),Aa=function(e){function t(e){var a;if(Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={material_type_id:"",daily_fee:0,long_term_fee:0,maintenance_fee:0},null!==a.props.index){var n=a.props.establishmentSettings.materials_types[a.props.index];a.state={material_type_id:n.material_type_id,daily_fee:n.daily_fee,long_term_fee:n.long_term_fee,maintenance_fee:n.maintenance_fee}}return a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.close()}},{key:"stopEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"checkMaterialsTypes",value:function(e){if(this.props.establishmentSettings.materials_types){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.establishmentSettings.materials_types[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){if(r.value.material_type_id===e)return!0}}catch(i){a=!0,n=i}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}}}},{key:"add",value:function(){var e=this;if(!this.hasEmptyField()){var t=this.props.establishmentSettings.materials_types||[],a={material_type_id:this.state.material_type_id,daily_fee:parseInt(this.state.daily_fee),long_term_fee:parseInt(this.state.long_term_fee),maintenance_fee:parseInt(this.state.maintenance_fee)};t.push(a);var n={establishmentId:this.props.establishment._id,updatedField:"materials_types",updatedValue:t};this.props.onUpdateEstablishmentSettings(n,function(){return e.close()})}}},{key:"update",value:function(){var e=this;if(void 0!==this.props.index&&null!==this.props.index&&!this.hasEmptyField()){var t=this.props.establishmentSettings.materials_types;t[this.props.index].material_type_id=this.state.material_type_id,t[this.props.index].daily_fee=parseInt(this.state.daily_fee),t[this.props.index].long_term_fee=parseInt(this.state.long_term_fee),t[this.props.index].maintenance_fee=parseInt(this.state.maintenance_fee);var a={establishmentId:this.props.establishmentSettings.establishment_id,updatedField:"materials_types",updatedValue:t};this.props.onUpdateEstablishmentSettings(a,function(){return e.close()})}}},{key:"hasEmptyField",value:function(){return T.emptyString(this.state.material_type_id)||T.emptyString(this.state.daily_fee)||T.emptyString(this.state.long_term_fee)||T.emptyString(this.state.maintenance_fee)}},{key:"onChange",value:function(e,t){this.setState(Object(Re.a)({},e,t))}},{key:"render",value:function(){var e=this,t=null;this.props.materialsTypes.length>0&&(t=this.props.materialsTypes.map(function(t){var a=e.checkMaterialsTypes(t._id);return r.a.createElement("option",{key:t._id,value:t._id,disabled:a},t.name)}));var a=r.a.createElement(u.b,{id:"Add.Material.Fee"});return void 0!==this.props.index&&null!==this.props.index&&(a=r.a.createElement(u.b,{id:"Modify.Material.Fee"})),r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.props.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.props.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"materialType",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Type"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("select",{id:"materialType",className:"form-control",value:this.state.material_type_id,onBlur:function(){return e.update()},onChange:function(t){return e.onChange("material_type_id",t.target.value)}},r.a.createElement("option",{value:""}),t))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"dailyFee",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Daily.Fee"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"number",className:"form-control",min:"0",id:"dailyFee",value:this.state.daily_fee,onBlur:function(){return e.update()},onChange:function(t){return e.onChange("daily_fee",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"longTermFee",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Long.Term.Fee"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"number",className:"form-control",min:"0",id:"longTermFee",value:this.state.long_term_fee,onBlur:function(){return e.update()},onChange:function(t){return e.onChange("long_term_fee",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"maintenanceFee",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Maintenance.Fee"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"number",className:"form-control",min:"0",id:"maintenanceFee",value:this.state.maintenance_fee,onBlur:function(){return e.update()},onChange:function(t){return e.onChange("maintenance_fee",t.target.value)}})))),(void 0===this.props.index||null===this.props.index)&&r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.props.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.add()},disabled:this.hasEmptyField()},r.a.createElement(u.b,{id:"Add"})))))))}}]),t}(r.a.Component),Da=Object(c.b)(function(e){return{materialsTypes:e.materialsTypes}},function(e){return{onUpdateEstablishmentSettings:function(t,a){return e(qe(t,a))}}})(Aa),Ta=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"deleteMaterialType",value:function(e,t){var a={establishmentId:this.props.establishmentSettings.establishment_id,updatedField:e,updatedValue:t};this.props.onUpdateEstablishmentSettings(a)}},{key:"splice",value:function(e,t){return e.splice(t,1),e}},{key:"render",value:function(){var e=this,t=r.a.createElement(u.b,{id:"Confirm"}),a=r.a.createElement(u.b,{id:"Remove.Row.Confirmation"}),n=function(){return e.deleteMaterialType("materials_types",e.splice(e.props.establishmentSettings.materials_types,e.props.index))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,this.props.materialName),r.a.createElement("td",null,this.props.materialType.daily_fee),r.a.createElement("td",null,this.props.materialType.long_term_fee),r.a.createElement("td",null,this.props.materialType.maintenance_fee),r.a.createElement("td",null,r.a.createElement("i",{className:"fa fa-edit icon-big",onClick:function(t){return e.props.openEstablishmentDMModal(e.props.index)}}),r.a.createElement("i",{className:"fa fa-trash icon-big",onClick:function(r){return e.props.openConfModal(t,a,n)}}))))}}]),t}(r.a.Component),Pa=Object(c.b)(function(e){return{}},function(e){return{onUpdateEstablishmentSettings:function(t){return e(qe(t))}}})(Ta),Ia=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openEstablishmentDMModal",value:function(e){var t=this;this.setState({modal:r.a.createElement(Da,{isOpen:!0,index:e,establishment:this.props.establishment,establishmentSettings:this.props.establishmentSettings,close:function(){return t.closeModal()}})})}},{key:"openConfModal",value:function(e,t,a){var n=this;this.setState({modal:r.a.createElement(K,{isOpen:!0,title:e,content:t,successCallback:a,closeModal:function(){return n.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"getMaterialName",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.materialsTypes[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(i._id===e)return i.name}}catch(s){a=!0,n=s}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}}},{key:"render",value:function(){var e=this,t=-1,a=this.props.establishmentSettings.materials_types.map(function(a){return t++,r.a.createElement(Pa,{key:a.material_type_id,index:t,establishmentSettings:e.props.establishmentSettings,openConfModal:function(t,a,n){return e.openConfModal(t,a,n)},openEstablishmentDMModal:function(t){return e.openEstablishmentDMModal(t)},materialType:a,materialName:e.getMaterialName(a.material_type_id)})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table table-striped table-bordered col-12"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(u.b,{id:"Type"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Daily.Fee"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Long.Term.Fee"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Maintenance.Fee"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})))),r.a.createElement("tbody",null,a)),this.state.modal)}}]),t}(r.a.Component),Ua=Object(c.b)(function(e){return{materialsTypes:e.materialsTypes}},function(e){return{}})(Ia),Ra=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openEstablishmentDMModal",value:function(){var e=this;this.setState({modal:r.a.createElement(Da,{isOpen:!0,index:null,establishment:this.props.establishment,establishmentSettings:this.props.establishmentSettings,close:function(){return e.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:function(t){return e.openEstablishmentDMModal()},className:"iconed-btn nostyle-a hoverable clickable"},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-square icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Add.Material.Fee"})))),this.props.establishmentSettings&&this.props.establishmentSettings.materials_types&&this.props.establishmentSettings.materials_types.length>0&&r.a.createElement(Ua,{establishmentSettings:this.props.establishmentSettings}),this.state.modal)}}]),t}(r.a.Component),La=Object(c.b)(function(e){return{}},function(e){return{}})(Ra),Ba=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"confirm",value:function(){this.props.successCallback(),this.close()}},{key:"stopEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"getEstablishmentSettings",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.establishmentsSettings[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(i.establishment_id===e)return i}}catch(s){a=!0,n=s}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}}},{key:"getClients",value:function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var l,i=this.props.clients[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;s.establishment_id===e&&t.push(s)}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t}},{key:"render",value:function(){var e=this,t=null;this.props.establishment&&(t=this.getEstablishmentSettings(this.props.establishment._id));var a=[];if(this.props.establishment&&(a=this.getClients(this.props.establishment._id)),this.props.establishment&&!t)return null;var n=this.props.establishment?"":"disabled";return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog modal-xl",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-body"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist"},r.a.createElement("a",{className:"nav-item nav-link active p-2 pr-sm-3 pl-sm-3 rounded-0",id:"nav-clients-info-tab","data-toggle":"tab",href:"#nav-clients-info",role:"tab","aria-controls":"nav-clients-info","aria-selected":"true"},r.a.createElement(u.b,{id:"Informations"})),r.a.createElement("a",{className:"nav-item nav-link p-2 pr-sm-3 pl-sm-3 rounded-0 "+n,id:"nav-clients-settings-tab","data-toggle":"tab",href:"#nav-clients-settings",role:"tab","aria-controls":"nav-clients-settings","aria-selected":"false"},r.a.createElement(u.b,{id:"Settings"})),r.a.createElement("a",{className:"nav-item nav-link p-2 pr-sm-3 pl-sm-3 rounded-0 "+n,id:"nav-clients-dmtypes-tab","data-toggle":"tab",href:"#nav-clients-dmtypes",role:"tab","aria-controls":"nav-clients-dmtypes","aria-selected":"false"},r.a.createElement(u.b,{id:"Conf.DM"})),r.a.createElement("a",{className:"nav-item nav-link p-2 pr-sm-3 pl-sm-3 rounded-0 "+n,id:"nav-clients-users-tab","data-toggle":"tab",href:"#nav-clients-users",role:"tab","aria-controls":"nav-clients-users","aria-selected":"false"},r.a.createElement(u.b,{id:"Users"})))),r.a.createElement("div",{className:"tab-content mt-3 p-2",id:"nav-tabContent"},r.a.createElement("div",{className:"tab-pane fade show active",id:"nav-clients-info",role:"tabpanel","aria-labelledby":"nav-clients-info-tab"},r.a.createElement(fa,{establishment:this.props.establishment,openModal:function(t){return e.props.openModal(t)},closeModal:function(){return e.props.closeModal()}})),r.a.createElement("div",{className:"tab-pane fade",id:"nav-clients-settings",role:"tabpanel","aria-labelledby":"nav-clients-settings-tab"},r.a.createElement(Ma,{establishment:this.props.establishment,establishmentSettings:t})),r.a.createElement("div",{className:"tab-pane fade",id:"nav-clients-dmtypes",role:"tabpanel","aria-labelledby":"nav-clients-dmtypes-tab"},r.a.createElement(La,{establishment:this.props.establishment,establishmentSettings:t})),r.a.createElement("div",{className:"tab-pane fade",id:"nav-clients-users",role:"tabpanel","aria-labelledby":"nav-clients-users-tab"},r.a.createElement(Fa,{establishment:this.props.establishment,clients:a}))))))))}}]),t}(r.a.Component),Ga=Object(c.b)(function(e){return{establishmentsSettings:e.establishmentsSettings,clients:e.clients}},function(e){return{}})(Ba),Va=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"getMercurialName",value:function(e){var t=null,a=!0,n=!1,r=void 0;try{for(var l,i=this.props.establishmentsSettings[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;if(s.establishment_id===e){t=s;break}}}catch(f){n=!0,r=f}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}if(!t||!t.mercurial_id)return null;var o=!0,c=!1,u=void 0;try{for(var m,d=this.props.mercurials[Symbol.iterator]();!(o=(m=d.next()).done);o=!0){var p=m.value;if(p._id===t.mercurial_id){var h="";return 1!==p.version&&(h="(v"+p.version+")"),p.name+" "+h}}}catch(f){c=!0,u=f}finally{try{o||null==d.return||d.return()}finally{if(c)throw u}}}},{key:"collapse",value:function(e){var t=document.getElementById(e);t.classList.contains("table-hidden")?(this.setState({collapsed:!0}),t.classList.remove("table-hidden"),t.classList.add("table-visible-blue")):(this.setState({collapsed:!1}),t.classList.remove("table-visible-blue"),t.classList.add("table-hidden"))}},{key:"getTotalHT",value:function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var l,i=this.props.clients[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;if(s.establishment_id===e){var o=!0,c=!1,u=void 0;try{for(var m,d=this.props.orders[Symbol.iterator]();!(o=(m=d.next()).done);o=!0){var p=m.value;p.id_client===s._id&&t.push(p)}}catch(E){c=!0,u=E}finally{try{o||null==d.return||d.return()}finally{if(c)throw u}}}}}catch(E){n=!0,r=E}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}for(var h=0,f=0;f<t.length;f++){var b=t[f];h+=this.getCmdTotalHT(b)}return h}},{key:"getCmdTotalHT",value:function(e){var t=this;return new ne(e.products,this.props.products,this.props.oldProducts,function(e){return t.props.onGetOldProducts(e)}).totalHt}},{key:"render",value:function(){var e=this,t=this.props.establishment;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:t._id},r.a.createElement("td",null,t.name),r.a.createElement("td",{className:"d-none d-md-table-cell"},t.address),r.a.createElement("td",{className:"d-none d-md-table-cell"},this.getMercurialName(t._id)),r.a.createElement("td",{className:"d-none d-sm-table-cell"},this.getTotalHT(t._id),"\u20ac"),r.a.createElement("td",{className:"d-none d-md-table-cell"},"XXX"),r.a.createElement("td",{className:"d-none d-md-table-cell"},"XXX"),r.a.createElement("td",{className:"d-none d-sm-table-cell"},"XXXXXX"),r.a.createElement("td",{className:"text-center"},r.a.createElement("i",{className:"fa fa-sort-down icon-big "+(this.state.collapsed?"flip-ver":""),onClick:function(a){return e.collapse("client-"+t._id)},disabled:!1}),r.a.createElement("i",{className:"fa fa-edit icon-big",onClick:function(a){return e.props.openModal(t)}}))),r.a.createElement("tr",{id:"client-"+t._id,className:"table-hidden"},r.a.createElement("td",{colSpan:"1000",className:"p-1"},this.props.clients.length>0?r.a.createElement(_a,{clients:this.props.clients,cssStyle:"table table-striped table-bordered m-0"}):r.a.createElement("div",{className:"alert alert-secondary m-0",role:"alert"},r.a.createElement(u.b,{id:"Empty.Users"})))))}}]),t}(r.a.Component),qa=Object(c.b)(function(e){return{establishmentsSettings:e.establishmentsSettings,mercurials:e.mercurials,products:e.products,oldProducts:e.oldProducts,orders:e.orders}},function(e){return{onGetOldProducts:function(t){return e(ke(t))}}})(Va),Wa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={nameFilter:null,addressFilter:null,mercurialFilter:null,modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){0===this.props.establishmentTypes.length&&this.props.onGetEstablishmentTypes(),0===this.props.paymentMethods.length&&this.props.onGetPaymentMethods(),0===this.props.paymentDeadlines.length&&this.props.onGetPaymentDeadlines(),0===this.props.establishmentsSettings.length&&this.props.onGetEstablishmentSettings()}},{key:"openModal",value:function(e){var t=this;this.setState({modal:r.a.createElement(Ga,{isOpen:!0,establishment:e,openModal:function(e){return t.openModal(e)},closeModal:function(){return t.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"getSettings",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,l=this.props.establishmentsSettings[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var i=r.value;if(i.establishment_id===e)return i}}catch(s){a=!0,n=s}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}}},{key:"getMercurialName",value:function(e){var t=this.getSettings(e);if(!t||!t.mercurial_id)return null;var a=!0,n=!1,r=void 0;try{for(var l,i=this.props.mercurials[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;if(s._id===t.mercurial_id)return s.name}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"getClients",value:function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var l,i=this.props.clients[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;s.establishment_id===e&&t.push(s)}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t}},{key:"render",value:function(){var e=this;if(0===this.props.establishments.length&&0===this.props.clients.length)return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{href:"#/",className:"iconed-btn hoverable clickable",onClick:function(t){return e.openModal()}},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Establishment.Add"})))),r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},r.a.createElement(u.b,{id:"Empty.Establishment"})),this.state.modal);var t=this.props.establishments.map(function(t){if(e.state.nameFilter&&""!==e.state.nameFilter&&-1===t.name.toUpperCase().indexOf(e.state.nameFilter.toUpperCase()))return null;if(e.state.addressFilter&&""!==e.state.addressFilter&&-1===t.address.toUpperCase().indexOf(e.state.addressFilter.toUpperCase()))return null;var a=e.getSettings(t._id);return!e.state.mercurialFilter||""===e.state.mercurialFilter||a.mercurial_id&&a.mercurial_id===e.state.mercurialFilter?r.a.createElement(qa,{key:t._id,establishment:t,openModal:function(t){return e.openModal(t)},clients:e.getClients(t._id)}):null}),a=new Date(Date.now()),n=this.props.mercurials.map(function(e){if(new Date(e.start_date)>a||new Date(e.end_date)<a)return null;var t=null;return 1!==e.version&&(t="(v"+e.version+")"),r.a.createElement("option",{key:e._id,value:e._id},e.name," ",t," ")});return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{href:"#/",className:"iconed-btn hoverable clickable",onClick:function(t){return e.openModal()}},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Establishment.Add"})))),r.a.createElement("table",{className:"table table-striped-3 table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(u.b,{id:"Establishment"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Address"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Mercurial"})),r.a.createElement("th",{className:"d-none d-sm-table-cell"},r.a.createElement(u.b,{id:"Total.Cmd.Excl.Tax"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Requests"})),r.a.createElement("th",{className:"d-none d-md-table-cell"},r.a.createElement(u.b,{id:"Fleet"})),r.a.createElement("th",{className:"d-none d-sm-table-cell"},r.a.createElement(u.b,{id:"Sales.Rep"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})))),r.a.createElement("tbody",null,r.a.createElement("tr",{className:"d-none d-xl-table-row filter-row"},r.a.createElement("td",null,r.a.createElement("input",{className:"form-control",type:"search",onChange:function(t){e.setState({nameFilter:t.target.value})}})),r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("input",{className:"form-control",type:"search",onChange:function(t){e.setState({addressFilter:t.target.value})}})),r.a.createElement("td",{className:"d-none d-md-table-cell"},r.a.createElement("select",{id:"order-filter-status",className:"form-control w-100",onChange:function(t){e.setState({mercurialFilter:t.target.value})}},r.a.createElement("option",{value:""},this.props.intl.formatMessage({id:"All"})),n)),r.a.createElement("td",{className:"d-none d-sm-table-cell"}),r.a.createElement("td",{className:"d-none d-md-table-cell"}),r.a.createElement("td",{className:"d-none d-md-table-cell"}),r.a.createElement("td",{className:"d-none d-sm-table-cell"}),r.a.createElement("td",null)),t)),this.state.modal)}}]),t}(r.a.Component),Ha=Object(c.b)(function(e){return{clients:e.clients,establishments:e.establishments,establishmentTypes:e.establishmentTypes,paymentMethods:e.paymentMethods,paymentDeadlines:e.paymentDeadlines,establishmentsSettings:e.establishmentsSettings,mercurials:e.mercurials}},function(e){return{onGetEstablishmentTypes:function(){return e(ua())},onGetPaymentMethods:function(){return e(Ea())},onGetPaymentDeadlines:function(){return e(ga())},onGetEstablishmentSettings:function(){return e(Ve())}}})(Object(u.e)(Wa)),Ya="GET_RESIDENTS";var za=function(){return function(e){return k.a.get(N.getResidents).then(function(t){var a;e((a=t.data,{type:Ya,residents:a}))}).catch(function(e){throw e})}},Qa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={name:"",firstname:"",uniqueError:null,disabled:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"checkUniqueness",value:function(e,t,a){var n=this;this.props.onCheckIfResidentExists({name:e,firstname:t},function(){n.setState({uniqueError:r.a.createElement(u.b,{id:"Resident.Already.Exists"})})},function(){return a()})}},{key:"onComplete",value:function(){var e=this;this.checkUniqueness(this.state.name,this.state.firstname,function(){var t={name:e.state.name,firstname:e.state.firstname};e.setState({disabled:!0}),e.props.onAddResident(t,function(){return e.props.close()})})}},{key:"onFieldChange",value:function(e,t){this.setState(Object(Re.a)({},e,t))}},{key:"disabled",value:function(){return T.emptyString(this.state.name)||T.emptyString(this.state.firstname)||this.state.disabled}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.props.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},r.a.createElement(u.b,{id:"Resident.Add"})),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.props.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"resident-name",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"Name"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"resident-name",autoComplete:"off",value:this.state.name,onChange:function(t){return e.onFieldChange("name",t.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"resident-firstname",className:"col-12 col-md-5 col-form-label"},r.a.createElement(u.b,{id:"First.Name"})),r.a.createElement("div",{className:"col-12 col-md-7"},r.a.createElement("input",{type:"text",className:"form-control",id:"resident-firstname",autoComplete:"off",value:this.state.firstname,onChange:function(t){return e.onFieldChange("firstname",t.target.value)}}),r.a.createElement("div",{className:"text-danger"},r.a.createElement("small",null,this.state.uniqueError))))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.props.close()}},r.a.createElement(u.b,{id:"Cancel"})),r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:this.disabled(),onClick:function(){return e.onComplete()}},r.a.createElement(u.b,{id:"Add"})))))))}}]),t}(r.a.Component),Xa=Object(c.b)(function(e){return{}},function(e){return{onAddResident:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.addResident,e).then(function(e){a(za()),t()}).catch(function(e){throw e})}}(t,a))},onCheckIfResidentExists:function(t,a,n){return e(function(e,t,a){return function(n){return k.a.post(N.checkIfResidentExists,e).then(function(e){200===e.status?t():a()})}}(t,a,n))}}})(Qa),Ka=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"deleteResident",value:function(e){var t=this,a=r.a.createElement(u.b,{id:"Delete.Resident"}),n=r.a.createElement(u.b,{id:"Delete.Resident.Confirmation"});this.setState({modal:r.a.createElement(K,{isOpen:!0,title:a,content:n,successCallback:function(){return t.props.onDeleteResident(e._id,function(){return t.closeModal()})},closeModal:function(){return t.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"render",value:function(){var e=this,t=this.props.residents.map(function(t){return r.a.createElement("tr",{className:"break-word",key:t._id},r.a.createElement("td",null,t.first_name," ",t.name),r.a.createElement("td",{className:"text-center"},r.a.createElement("i",{className:"fa fa-trash icon-big",onClick:function(a){return e.deleteResident(t)}})))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(u.b,{id:"Resident"})),r.a.createElement("th",null,r.a.createElement(u.b,{id:"Actions"})))),r.a.createElement("tbody",null,t)),this.state.modal)}}]),t}(r.a.Component),Ja=Object(c.b)(function(e){return{residents:e.residents}},function(e){return{onDeleteResident:function(t,a){return e(function(e,t){return function(a){return k.a.post(N.deleteResident+e).then(function(e){a(za()),t()}).catch(function(e){throw e})}}(t,a))}}})(Ka),Za=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"openResidentModal",value:function(){var e=this;this.setState({modal:r.a.createElement(Xa,{close:function(){return e.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"render",value:function(){var e=this,t=null;return t=0===this.props.residents.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{href:"#/",className:"iconed-btn hoverable clickable",onClick:function(t){return e.openResidentModal()}},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Resident.Add"})))),r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},r.a.createElement(u.b,{id:"Empty.Residents"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{href:"#/",className:"iconed-btn hoverable clickable",onClick:function(t){return e.openResidentModal()}},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-plus-circle icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Resident.Add"})))),r.a.createElement(Ja,null)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-bg show",onClick:function(){return e.props.close()}},r.a.createElement("div",{className:"modal fade show"},r.a.createElement("div",{className:"modal-dialog",role:"document",onClick:function(t){return e.stopEvent(t)}},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},r.a.createElement(u.b,{id:"Residents.Management"})),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.props.close()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},t),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.props.close()}},r.a.createElement(u.b,{id:"Ok"}))))))),this.state.modal)}}]),t}(r.a.Component),$a=Object(c.b)(function(e){return{residents:e.residents}},function(e){return{}})(Za),en=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){0===this.props.residents.length&&this.props.onGetResidents()}},{key:"openResidentsModal",value:function(){var e=this;this.setState({modal:r.a.createElement($a,{close:function(){return e.closeModal()}})})}},{key:"closeModal",value:function(){this.setState({modal:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{href:"#/",className:"iconed-btn hoverable clickable",onClick:function(t){return e.openResidentsModal()}},r.a.createElement("span",{className:"mt-3 mb-3"},r.a.createElement("i",{className:"fa fa-users icon-big text-dark"}),r.a.createElement("p",null,r.a.createElement(u.b,{id:"Residents.Management"})))),this.state.modal)}}]),t}(r.a.Component),tn=Object(c.b)(function(e){return{residents:e.residents}},function(e){return{onGetResidents:function(){return e(za())}}})(en),an=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;Promise.all([this.props.onGetUser()]).then(function(){e.props.onGetCart(),e.props.onGetNotifs(),e.props.user.role===L.a.CLIENT&&(e.props.onGetProducts(),e.props.onGetOrders(),e.props.onGetOrdersSettings()),e.props.user.role===L.a.ADMIN&&(e.props.onGetProductsAdmin(),e.props.onGetOrdersAdmin(),e.props.onGetClients(),e.props.onGetEstablishments(),e.props.onGetOrdersSettingsAdmin(),e.props.onGetMercurials(),e.props.onGetMaterialsTypes())})}},{key:"closeNotifModal",value:function(e){this.props.onDeleteNotif({notifId:e._id})}},{key:"render",value:function(){var e=this,t=0,a=!0,n=!1,l=void 0;try{for(var i,s=this.props.cart[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){t+=i.value.quantity}}catch(v){n=!0,l=v}finally{try{a||null==s.return||s.return()}finally{if(n)throw l}}var o=r.a.createElement(jt,{totalProduct:t}),c=r.a.createElement(rn,null);this.props.user.role===L.a.ADMIN&&(o=r.a.createElement(St,{totalProduct:t}),c=r.a.createElement(ln,null));var m=[];if(0!==this.props.notifications.length){var d=!0,p=!1,h=void 0;try{for(var f,b=function(){var t=f.value;if(t.subject===wt.a.MERCURIAL_DELETE_OR_UPDATE){var a=r.a.createElement(u.b,{id:"Notification.Mercurial.Upd.Title"}),n=r.a.createElement(u.b,{id:"Notification.Mercurial.Upd.Content"});m.push(r.a.createElement(At,{key:t._id,title:a,content:n,successCallback:function(){return e.closeNotifModal(t)},closeModal:function(){return e.closeNotifModal(t)}}))}},E=this.props.notifications[Symbol.iterator]();!(d=(f=E.next()).done);d=!0)b()}catch(v){p=!0,h=v}finally{try{d||null==E.return||E.return()}finally{if(p)throw h}}}return r.a.createElement(r.a.Fragment,null,o,r.a.createElement("div",{className:"container-fluid p-3 animated fadeIn"},c),m)}}]),t}(r.a.Component),nn=Object(c.b)(function(e){return{user:e.user,cart:e.cart,notifications:e.notifications}},function(e){return{onGetUser:function(){return e(dt())},onGetCart:function(){return e(F())},onGetProducts:function(){return e(function(e){return k.a.get(N.getProducts).then(function(t){e(ht(t.data))}).catch(function(e){throw e})})},onGetProductsAdmin:function(){return e(ft())},onGetOrders:function(){return e(te())},onGetNotifs:function(){return e(Tt())},onDeleteNotif:function(t){return e(function(e,t){return function(t){return k.a.post(N.deleteNotif,e).then(function(){t(Tt())}).catch(function(e){throw e})}}(t))},onGetOrdersSettings:function(){return e(Nt())},onGetOrdersAdmin:function(){return e(ae())},onGetClients:function(){return e(Et())},onGetEstablishments:function(){return e(gt())},onGetOrdersSettingsAdmin:function(){return e(He())},onGetMercurials:function(){return e(Kt())},onGetMaterialsTypes:function(){return e(et())}}})(an),rn=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(g.a,{path:"/home/families",component:_}),r.a.createElement(g.a,{path:"/home/products/:famille",component:q}),r.a.createElement(g.a,{path:"/home/cart",component:se}),r.a.createElement(g.a,{path:"/home/orders",component:xe}),r.a.createElement(g.a,{path:"/home/fleet",component:tn}),r.a.createElement(g.a,{path:"/home",component:sa}))}}]),t}(r.a.Component),ln=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(g.a,{path:"/home/mercurials",component:la}),r.a.createElement(g.a,{path:"/home/families",component:_}),r.a.createElement(g.a,{path:"/home/products/:famille",component:q}),r.a.createElement(g.a,{path:"/home/cart",component:se}),r.a.createElement(g.a,{path:"/home/orders",component:Ue}),r.a.createElement(g.a,{path:"/home/settings",component:ut}),r.a.createElement(g.a,{path:"/home/clients",component:Ha}),r.a.createElement(g.a,{path:"/home",component:ia}))}}]),t}(r.a.Component),sn=(a(494),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"not-found"},"404 Not Found")}}]),t}(r.a.Component));k.a.defaults.baseURL=N.rootUrl,k.a.defaults.headers.post["Content-Type"]="application/json",k.a.defaults.withCredentials=!0;var on=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={modal:null},k.a.interceptors.response.use(void 0,function(e){if(e.response&&500===e.response.status)return a.openErrorModal(),new Promise(function(){});if(!e.response||403!==e.response.status)throw e;window.location.href="/"}),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"logout",value:function(){var e=this;function t(){window.location.href="/"}this.setState({modal:null},function(){return e.props.onLogout(t)})}},{key:"openErrorModal",value:function(){var e=this,t=r.a.createElement(u.b,{id:"Unexpected.Error"}),a=r.a.createElement(u.b,{id:"Unexpected.Error.Expl"});this.setState({modal:r.a.createElement(na,{isOpen:!0,title:t,content:a,closeModal:function(t){return e.logout()}})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,{exact:!0,path:"/",component:x}),r.a.createElement(g.a,{path:"/home",component:nn}),r.a.createElement(g.a,{component:sn}))),this.state.modal)}}]),t}(n.Component),cn=Object(c.b)(function(e){return{lang:e.user.lang}},function(e){return{onLogout:function(t){return e(M(t))}}})(on);var un=a(121);var mn=a(194),dn=a(195),pn=a(210),hn=a.n(pn);Object(u.d)(hn.a);var fn=navigator.language||navigator.userLanguage||navigator.languages[0];void 0!==fn&&null!==fn||(fn="en_EN");var bn=fn.toLowerCase().split(/[_-]+/)[0];function En(e){switch(e){case"fr":return mn;case"en":default:return dn}}var vn=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return Object.assign({},e,t.user);default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:return t.products;default:return e}},oldProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:return[].concat(Object(un.a)(e),Object(un.a)(t.oldProducts));default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.cart;default:return e}},i18n:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lang:bn,messages:En(bn)},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return Object.assign({},e,{lang:t.user.lang,messages:En(t.user.lang)});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return t.orders;default:return e}},clients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt:return t.clients;default:return e}},establishments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vt:return t.establishments;default:return e}},establishmentTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ca:return t.establishmentTypes;default:return e}},establishmentsSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return t.establishmentSettings;default:return e}},ordersSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yt:return t.ordersSettings;default:return e}},ordersSettingsAdmin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We:return t.ordersSettingsAdmin;default:return e}},mercurials:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xt:return t.mercurials;default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt:return t.notifications;default:return e}},paymentMethods:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ba:return t.paymentMethods;default:return e}},paymentDeadlines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case va:return t.paymentDeadlines;default:return e}},materialsTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $e:return t.materialsTypes;default:return e}},residents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ya:return t.residents;default:return e}}}),gn=function(e,t){return t.type===O&&(e=void 0),vn(e,t)};a(496).config();var yn=Object(s.d)(gn,Object(s.a)(o.a));i.a.render(r.a.createElement(c.a,{store:yn},r.a.createElement(m,null,r.a.createElement(cn,null))),document.getElementById("root"))},88:function(e,t,a){}},[[215,2,1]]]);
//# sourceMappingURL=main.ca2478d8.chunk.js.map